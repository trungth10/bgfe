(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["demo"],{"01f2":function(e,t,i){"use strict";i("8e0a")},"0322":function(e,t,i){"use strict";i("4ed5")},"05a8":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-7",attrs:{type:"gradient-success"}}),i("div",{staticClass:"ml-4 mr-4 mb-4 p-4 mt--7"},[i("product-cate-table")],1)],1)},o=[],a=i("eca8"),r={components:{ProductCateTable:a["a"]},created:function(){var e=this.$session.get("user-info");if(void 0!=e){var t=e.brandId;void 0!=t?this.$store.commit("product_cate/setBrandId",t):this.$router.push("/login").catch((function(){}))}else this.$router.push("/login").catch((function(){}))},methods:{},props:{},watch:{},data:function(){return{}}},s=r,l=i("2877"),c=Object(l["a"])(s,n,o,!1,null,null,null);t["default"]=c.exports},"07b4":function(e,t,i){},"08d9":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"action"}},[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid mt--9"},[i("el-row",[i("div",{staticClass:"card shadow"},[i("div",{staticClass:"card-header bg-transparent"},[i("el-col",{staticClass:"mt-2",attrs:{span:12}},[i("h2",{staticClass:"mb-0"},[e._v("Manage Action")])]),i("el-col",{attrs:{span:12,type:"primary"}},[i("el-button",{staticClass:"float-right",attrs:{type:"primary",icon:"el-icon-plus",size:"medium"},on:{click:e.createAction}},[e._v("New Action")])],1)],1)])]),i("el-row",{staticClass:"mt-3"},[i("action-table")],1)],1)],1)},o=[],a=i("2b0e"),r=i("4eb5"),s=i.n(r),l=i("5f5b"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow p-3"},[i("div",{staticClass:"table-responsive"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%",color:"#525f7f"},attrs:{data:e.actionList,id:"action-table","header-cell-style":{color:"#696969","font-weight":"600","font-size":"1rem !important","background-color":"#f4f4f4","padding-bottom":"0.8vh","padding-top":"1.2vh"},"cell-style":{"padding-top":"1.5vh","padding-bottom":"1.5vh","padding-left":"0px","padding-right":"0px","font-size":"1.05rem !important",height:"5.5vh"}}},[i("el-table-column",{attrs:{type:"index",label:"No",index:e.indexMethod,width:"50"}}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{prop:"name",label:"Name",width:"270"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-link",{staticClass:"text-body",staticStyle:{"word-break":"break-word","font-size":"1.05rem"},attrs:{underline:!1},on:{click:function(i){return e.openDialog(t.row.actionId)}}},[e._v(" "+e._s(t.row.name)+" ")])]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{prop:"actionType",label:"Type"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"mb-0",staticStyle:{"word-break":"break-word"}},[e._v(" "+e._s(e._f("actionTypeFilter")(t.row.actionType))+" ")])]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{prop:"insDate",label:"Created date"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-time mr-1"}),e._v(" "+e._s(e._f("dateFormat")(t.row.insDate)))]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{prop:"updDate",label:"Updated date"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-time mr-1"}),e._v(" "+e._s(e._f("dateFormat")(t.row.updDate)))]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{label:"",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"p-0 m-0 bg-transparent",staticStyle:{outline:"none",border:"0px"},attrs:{icon:"el-icon-delete-solid"},on:{click:function(i){return e.deleteAction(t.row)}}})]}}])})],1),i("div",{staticClass:"d-flex justify-content-end mr-2 mb-2 mt-0"},[i("base-pagination",{ref:"basePagination",staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1),i("el-dialog",{attrs:{title:"UPDATE ACTION",width:"55%",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("action-detail",{ref:"actionDetailDialog",on:{reset:e.changePage}})],1)],1)])},u=[],d=i("c1df"),m=i.n(d),p=i("c067"),h={props:{title:String},components:{ActionDetail:p["default"]},name:"action-table",data:function(){return{dialogTableVisible:!1,pagination:{default:1},loading:!0,pageCount:10}},computed:{actionList:function(){return this.setPageCount(),this.$store.state.action.actionList}},beforeDestroy:function(){this.$store.commit("action/setActionList",[])},methods:{openDialog:function(e){this.$store.commit("action/setId",e),this.$refs["actionDetailDialog"]&&this.$refs["actionDetailDialog"].setupData(),this.dialogTableVisible=!0},showMessage:function(e,t){this.$message({showClose:!0,center:!0,duration:2500,message:e,type:t})},changePage:function(e){this.$store.commit("action/setPageIndexAction",e),this.loading=!0,this.getActionList()},setPageCount:function(){var e=this.$store.state.action.PageSizeAction;this.pageCount=Math.ceil(this.$store.state.action.counteraction/e)},indexMethod:function(e){var t=this.$store.state.action.PageSizeAction,i=this.$store.state.action.PageIndexAction;return e+=1,i>1?e+(i-1)*t:e},getActionList:function(){var e=this;this.$store.dispatch("action/getAction").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.showMessage(t.message+", please try again!")}))},deleteAction:function(e){var t=this;this.$confirm("This will permanently delete the file. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.loading=!0;var i=e.actionId;t.$store.commit("action/setId",i),t.$store.dispatch("action/deleteAction").then((function(e){t.loading=!1,200==e.status?(t.changePage(1),t.$notify({icon:"el-icon-warning",title:"Success",message:"Delete failed, please try again",type:"success"})):t.$notify({icon:"el-icon-warning",title:"Error",message:"Delete failed, please try again",type:"danger"})})).catch((function(){t.loading=!1,t.changePage(1),t.$notify({icon:"el-icon-warning",title:"Error",message:"Delete failed, please try again",type:"danger"})}))}))}},created:function(){this.changePage(1)},filters:{dateFormat:function(e){if(e)return m()(e).format("HH:mm - DD/MM/YYYY")},actionTypeFilter:function(e){switch(e){case 1:return"Discount amount of order";case 2:return"Discount percent of order";case 3:return"Discount shipping fee of order";case 4:return"Discount amount of item";case 5:return"Discount percent of item";case 6:return"Discount unit of item";case 7:return"Fixed price of item";case 8:return"Ladder price of item";case 9:return"Bundle price of item"}}}},g=h,f=(i("778a"),i("2877")),v=Object(f["a"])(g,c,u,!1,null,null,null),b=v.exports;a["default"].use(s.a);var y={components:{ActionTable:b},directives:{"b-tooltip":l["b"]},data:function(){return{}},methods:{createAction:function(){this.$router.push({name:"Action builder",params:{isAction:!0}})}}},C=y,w=(i("eb8d"),Object(f["a"])(C,n,o,!1,null,null,null));t["default"]=w.exports},"08ec":function(e,t,i){"use strict";i("8bce")},"0b44":function(e,t,i){},"0d10":function(e,t,i){},"11b4":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow container-fluid mt-3 mb-3 pb-2",attrs:{id:"device"}},[i("div",{staticClass:"row pt-3 pb-2"},[e._m(0),i("div",{staticClass:"col-6"},[i("div",{staticClass:"row justify-content-end"},[e.isEdit?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close"},on:{click:e.editMode}},[e._v("Cancel")]):e._e(),e.isEdit?i("el-button",{attrs:{type:"success",icon:"el-icon-document-checked",size:"mini"},on:{click:e.saveDev}},[e._v("Save")]):e._e(),this.isPress?e._e():i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.deviceList.length>0,expression:"deviceList.length > 0"}],attrs:{type:"success",icon:"el-icon-edit-outline",size:"mini"},on:{click:e.editMode}},[e._v("Edit")]),e.isAdd?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close"},on:{click:e.addMode}},[e._v("Cancel")]):e._e(),this.isPress?e._e():i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:e.addMode}},[e._v("Add")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.deviceList.length>0,expression:"deviceList.length > 0"}],attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.multiSelection.length>0,size:"mini"},on:{click:e.cancelDialog}},[e._v("Delete")])],1)])]),e.isAdd?i("div",{staticClass:"col-12"},[i("el-form",{ref:"createForm",staticClass:"row justify-content-center",attrs:{model:e.createForm,rules:e.addRules}},[i("el-form-item",{staticClass:"col-3 align-self-center",attrs:{prop:"storeId"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Stores ")])]),i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.isAdd,placeholder:"Select store",size:"small"},model:{value:e.createForm.storeId,callback:function(t){e.$set(e.createForm,"storeId",t)},expression:"createForm.storeId"}},e._l(e.storeList,(function(e){return i("el-option",{key:e.storeId,attrs:{label:e.storeName,value:e.storeId}})})),1)],1),i("el-form-item",{staticClass:"col-4 mb-3",attrs:{prop:"name"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Device Name ")])]),i("el-input",{attrs:{type:"text",placeholder:"Input name here",size:"small",spellcheck:"false",maxlength:"50","show-word-limit":""},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1),i("el-form-item",{staticClass:"col-1 mb-0 mt-2 align-self-center"},[i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.submitForm("createForm")}}},[e._v("Add")])],1)],1)],1):e._e(),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"mb-2 device-table",staticStyle:{width:"100%"},attrs:{data:e.deviceList,"max-height":"580",height:"580","cell-style":{padding:"0",height:"5vh"},stripe:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),i("el-table-column",{attrs:{label:"No.",type:"index",index:e.indexMethod,width:"50"}}),i("el-table-column",{attrs:{label:"Store",prop:"storeId"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.isEdit,placeholder:"",size:"small"},on:{change:function(i){return e.handleChange(t.$index)}},model:{value:t.row.storeId,callback:function(i){e.$set(t.row,"storeId",i)},expression:"scope.row.storeId"}},e._l(e.storeList,(function(t){return i("el-option",{key:t.storeId,attrs:{label:t.storeName,value:t.storeId}},[i("span",{staticStyle:{float:"left"}},[e._v(e._s(t.storeName))])])})),1)]}}])}),i("el-table-column",{attrs:{label:"Device Name",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?i("el-input",{attrs:{type:"text",placeholder:"Input name here",size:"small",maxlength:"50",spellcheck:"false","show-word-limit":""},on:{input:function(i){return e.handleChangeName(t.$index,t.row.name)}},model:{value:t.row.name,callback:function(i){e.$set(t.row,"name",i)},expression:"scope.row.name"}}):e._e(),e.isEdit?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.name))])]}}])}),i("el-table-column",{attrs:{label:"Device Code",prop:"code",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.code))])]}}])})],1),i("div",{staticClass:"d-flex justify-content-end pr-0"},[i("base-pagination",{ref:"basePagination",staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1),i("el-dialog",{attrs:{title:"Confirm action",visible:e.dialogVisible,width:"27%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("Are you sure you want to delete these items ?")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelDialog}},[e._v("Cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:e.hideDev}},[e._v("Confirm")])],1)])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-6"},[i("div",{staticClass:"row justify-content-start"},[i("strong",[e._v("Devices")])])])}],a=(i("4160"),i("caad"),i("c975"),i("a434"),i("b0c0"),i("ac1f"),i("2532"),i("5319"),i("498a"),i("159b"),i("96cf"),i("1da1")),r={name:"device-table",data:function(){return{isEdit:!1,isAdd:!1,isPress:!1,loading:!0,isDuplicate:!1,pagination:{default:1},pageCount:1,multiSelection:[],errorIndex:[],editIndex:[],createForm:{storeId:"",name:""},dialogVisible:!1,addRules:{name:[{validator:this.validateAddName,trigger:"change"}],storeId:[{required:!0,message:"Store is required!"}]}}},watch:{},props:{},computed:{gameConfigList:function(){return this.$store.state.game_campaign.gameConfigs},deviceList:function(){return this.setPageCount(),this.$store.state.device.deviceList},storeList:function(){return this.$store.state.device.storeSelectList}},methods:{getGameCampaignList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.$store.commit("game_campaign/setPageSize",0),e.$store.commit("game_campaign/setPageIndex",0),e.$store.dispatch("game_campaign/getGameCampaignList").then((function(t){200!=t.status&&(console.log(t.data.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when Get Game config. Please try again",type:"danger"})),e.loading=!1,e.$store.commit("game_campaign/setPageSize",10),e.$store.commit("game_campaign/setPageIndex",1)})).catch((function(t){console.log(t.message),e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when Get Game config. Please try again",type:"danger"})}));case 4:case"end":return t.stop()}}),t)})))()},validateAddName:function(e,t,i){t?(console.log("validateAddName :>> ",t),t.trim()?i():i(new Error("Name is required!"))):i(new Error("Name is required!"))},resetPage:function(){this.$refs["basePagination"].changePage(1)},getDevice:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("device/getDevice").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("DeviceTable.vue - getDevice:>> "+t)}));case 2:case"end":return t.stop()}}),t)})))()},handleClickDropDown:function(e){console.log("val :>> ",e)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.addDevice()}))},addDevice:function(){var e=this;this.loading=!0,this.$store.commit("device/setStoreId",this.createForm.storeId),this.$store.commit("device/setName",this.createForm.name.replace(/\s +/g," ").trim()),this.$store.dispatch("device/addDev").then((function(){e.$message({message:"Add successful.",type:"success"}),e.loading=!1,e.isPress=!e.isPress,e.isAdd=!e.isAdd,e.createForm.storeId="",e.createForm.name="",e.resetPage(),e.getDevice()}),(function(t){e.$message({message:"Add failed.",type:"danger"}),console.log("DeviceTable.vue - addDev:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("DeviceTable.vue - addDev:>> "+t)}))},changePage:function(e){console.log("index :>> ",e),this.$store.commit("device/setPageIndex",e),this.loading=!0,this.getDevice()},setPageCount:function(){var e=this.$store.state.device.PageSize;console.log("counter :>> ",this.$store.state.device.counter),console.log("pageSize :>> ",this.$store.state.device.PageSize),this.pageCount=Math.ceil(this.$store.state.device.counter/e)},indexMethod:function(e){var t=this.$store.state.device.PageSize,i=this.$store.state.device.PageIndex;return e+=1,i>1?e+(i-1)*t:e},handleSelectionChange:function(e){console.log("val :>> ",e),this.multiSelection=e},editMode:function(){this.isEdit=!this.isEdit,this.isPress=!this.isPress,this.isEdit||(this.handleSelectionChange([]),this.getDevice())},addMode:function(){this.isAdd=!this.isAdd,this.isPress=!this.isPress,this.isAdd||(this.createForm.name="",this.createForm.storeId="",this.handleSelectionChange([]),this.getDevice())},cancelDialog:function(){this.dialogVisible=!this.dialogVisible,this.dialogVisible||(this.handleSelectionChange([]),this.getDevice())},handleChangeName:function(e,t){console.log("handleChangeName :>> ",t),t?t.trim()?this.errorIndex.includes(e)&&(console.log("gỡ lỗi ở handleChangeName khi mà có value"),this.errorIndex.splice(this.errorIndex.indexOf(e),1)):(this.$message({showClose:!0,center:!0,duration:2500,message:"Name is required!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeName khi mà !value.trim()"),this.errorIndex.push(e))):(this.$message({showClose:!0,center:!0,duration:2500,message:"Name is required!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeName khi mà ko có value"),this.errorIndex.push(e))),this.handleChange(e)},handleChange:function(e){console.log("handleChange trigger");var t=this.editIndex;t.includes(e)&&t.splice(t.indexOf(e),1),t.push(e)},hideDev:function(){var e=this;this.loading=!this.loading;var t=this.multiSelection;console.log("removeObj :>> ",t),this.$store.commit("device/setHideParams",t),this.$store.dispatch("device/hideDev").then((function(){e.$message({showClose:!0,center:!0,duration:3e3,message:"Delete successful.",type:"warning"}),e.resetPage(),e.dialogVisible=!e.dialogVisible,e.getDevice()}),(function(t){console.log("Delete FAIL: device/hideDev"),e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("DeviceTable.vue - hideDev:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("DeviceTable.vue - hideDev:>> "+t)}))},saveDev:function(){var e=this;if(this.errorIndex.length>0)this.$message({showClose:!0,center:!0,duration:3e3,message:"Products: Please check again the error field(s)!",type:"error"}),console.log("this.errorIndex :>> ",this.errorIndex);else if(this.loading=!0,null!=this.editIndex&&this.editIndex.length>0){var t=[];this.editIndex.forEach((function(i){var n={deviceId:e.deviceList[i].deviceId,storeId:e.deviceList[i].storeId,name:e.deviceList[i].name.replace(/\s +/g," ").trim(),gameConfigId:e.deviceList[i].gameConfigId};t.push(n)})),console.log("updateParams :>> ",t),this.$store.commit("device/setUpdateParams",t),this.$store.dispatch("device/saveDev").then((function(){e.$message({showClose:!0,center:!0,duration:3e3,message:"Save successful!",type:"success"}),e.isPress=!e.isPress,e.isEdit=!e.isEdit,e.editIndex=[],e.errorIndex=[],e.resetPage(),e.getDevice()}),(function(t){e.$message({showClose:!0,center:!0,duration:3e3,message:"Save failed!",type:"error"}),console.log("DeviceTable.vue - saveDev:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("DeviceTable.vue - saveDev:>> "+t)}))}else this.isPress=!this.isPress,this.isEdit=!this.isEdit,this.getDevice()}},created:function(){this.getGameCampaignList(),this.getDevice()},destroyed:function(){this.$store.commit("device/setPageIndex",1)},filters:{}},s=r,l=(i("3bd5"),i("2877")),c=Object(l["a"])(s,n,o,!1,null,null,null);t["a"]=c.exports},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"13d5":function(e,t,i){"use strict";var n=i("23e7"),o=i("d58f").left,a=i("a640"),r=i("ae40"),s=a("reduce"),l=r("reduce",{1:0});n({target:"Array",proto:!0,forced:!s||!l},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},1428:function(e,t,i){},"18bd":function(e,t,i){},"1c7e2":function(e,t,i){"use strict";i("2007")},"1f73":function(e,t,i){"use strict";i("7e34")},"1fd2":function(e,t,i){"use strict";i("ebd0")},2007:function(e,t,i){},2090:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"gift"}},[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid mt--9"},[i("el-row",[i("div",{staticClass:"card shadow"},[i("div",{staticClass:"card-header bg-transparent"},[i("el-col",{staticClass:"mt-2",attrs:{span:12}},[i("h2",{staticClass:"mb-0"},[e._v("Manage Gift")])]),i("el-col",{attrs:{span:12,type:"primary"}},[i("el-button",{staticClass:"float-right",attrs:{type:"primary",icon:"el-icon-plus",size:"medium"},on:{click:e.createAction}},[e._v("New Gift")])],1)],1)])]),i("el-row",{staticClass:"mt-3"},[i("gift-table")],1)],1)],1)},o=[],a=i("2b0e"),r=i("4eb5"),s=i.n(r),l=i("5f5b"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow"},[i("div",{staticClass:"p-3"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"m-0 store-table",staticStyle:{width:"100%"},attrs:{data:e.giftList,id:"gift-table","header-cell-style":{color:"#696969","font-weight":"600","font-size":"1rem !important","background-color":"#f4f4f4","padding-bottom":"0.8vh","padding-top":"1.2vh"},"cell-style":{"padding-top":"1.5vh","padding-bottom":"1.5vh","padding-left":"0px","padding-right":"0px","font-size":"1.05rem !important",height:"5.5vh"}}},[i("el-table-column",{attrs:{type:"index",label:"No",index:e.indexMethod,width:"50"}}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{prop:"name",label:"Name",width:"270"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-link",{staticClass:"text-body",staticStyle:{"word-break":"break-word","font-size":"1.05rem"},attrs:{underline:!1},on:{click:function(i){return e.openDialog(t.row.giftId)}}},[e._v(" "+e._s(t.row.name)+" ")])]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{prop:"postActionType",label:"Type"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("actionTypeFilter")(t.row.postActionType)))]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{prop:"insDate",label:"Created date"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-time mr-1"}),e._v(" "+e._s(e._f("dateFormat")(t.row.insDate)))]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{prop:"updDate",label:"Updated date"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-time mr-1"}),e._v(" "+e._s(e._f("dateFormat")(t.row.updDate)))]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{label:"",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"p-0 m-0",staticStyle:{outline:"none",border:"0px","background-color":"transparent"},attrs:{icon:"el-icon-delete-solid"},on:{click:function(i){return e.deleteAction(t.row)}}})]}}])})],1),i("div",{staticClass:"d-flex justify-content-end m-3"},[i("base-pagination",{ref:"basePagination",staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1)],1),i("el-dialog",{attrs:{width:"55%","close-on-click-modal":!1,title:"UPDATE ACTION",visible:e.dialogTableVisible,"before-close":e.beforeCloseDialog},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("gfit-detail",{ref:"actionDetailDialog",on:{reset:e.changePage}})],1)],1)},u=[],d=i("c1df"),m=i.n(d),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"font-size":"1.25rem"}},[i("div",{},[i("div",{staticClass:"pb-2"},[i("el-form",{ref:"giftForm",attrs:{model:e.gift,rules:e.actionRules}},[i("el-row",[i("el-col",{staticClass:"pb-1 ml-2",attrs:{span:24}},[i("el-form-item",{attrs:{prop:"name",label:"Name"}},[i("el-input",{attrs:{type:"text",label:"Action Name",placeholder:"Input name here",maxlength:"100",spellcheck:"false","show-word-limit":""},model:{value:e.gift.name,callback:function(t){e.$set(e.gift,"name",t)},expression:"gift.name"}})],1)],1),i("el-col",{attrs:{span:24}},[e.gift.postActionType==e.$ENV.POST_ACTION_TYPE.GIFT_PRODUCT?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" gift product in ")]),i("el-button",{staticClass:"ml-2",staticStyle:{outline:"none",border:"0px","font-size":"1.2rem"},attrs:{type:"text",plain:""},on:{click:function(t){return e.openDrawerProduct(e.productSelection)}}},[e._v("selection list ("+e._s(e.productSelection.length)+") ")])],1)],1)],1):e._e(),e.gift.postActionType==e.$ENV.POST_ACTION_TYPE.GIFT_VOUCHER?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",{staticClass:"mr-2"},[e._v(" gift a voucher from promotion ")]),i("el-select",{model:{value:e.gift.giftVoucherGroupId,callback:function(t){e.$set(e.gift,"giftVoucherGroupId",t)},expression:"gift.giftVoucherGroupId"}},e._l(e.voucherGroups,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.voucherGroupId}})})),1)],1)],1)],1):e._e(),e.gift.postActionType==e.$ENV.POST_ACTION_TYPE.GIFT_POINT?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" Give ")]),i("el-form-item",{attrs:{prop:"bonusPoint"}},[i("el-input-number",{staticClass:"drag-input-number ml-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:99999999},model:{value:e.gift.bonusPoint,callback:function(t){e.$set(e.gift,"bonusPoint",t)},expression:"gift.bonusPoint"}})],1),i("label",{staticClass:"ml-2"},[e._v(" point(s) for customer ")])],1)],1)],1):e._e(),e.gift.postActionType==e.$ENV.POST_ACTION_TYPE.GIFT_GAME_CODE?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",{staticClass:"mr-3"},[e._v(" Gift a Game Code of ")]),i("el-select",{model:{value:e.gift.gameCampaignId,callback:function(t){e.$set(e.gift,"gameCampaignId",t)},expression:"gift.gameCampaignId"}},e._l(e.games,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1):e._e()]),i("el-col",[i("el-row",{attrs:{type:"flex",justify:"end"}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-document-checked"},on:{click:e.updateAction}},[e._v(" Update Gift ")])],1)],1)],1)],1)],1)]),i("el-drawer",{directives:[{name:"show",rawName:"v-show",value:e.drawer,expression:"drawer"}],staticClass:"drawer",attrs:{id:"gift-action-detail","append-to-body":!0,"before-close":e.handleCloseDrawer,visible:e.drawer,size:"50%",direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[i("div",{staticClass:"m-3"},[i("h3",[e._v("Product list")]),i("label",{staticClass:"custom-tag"},[i("i",{staticClass:"el-icon-warning-outline mr-1"}),e._v(" Selected "),i("b",[e._v(e._s(e.productSelection.length))]),e._v(" product(s) ")]),i("el-table",{ref:"multipleTable",attrs:{data:e.products,border:"",height:"400"},on:{"selection-change":e.handleSelectionChange,select:e.handleSelectRow},model:{value:e.productSelection,callback:function(t){e.productSelection=t},expression:"productSelection"}},[i("el-table-column",{attrs:{type:"selection"}}),i("el-table-column",{attrs:{type:"index"}}),i("el-table-column",{attrs:{property:"productName",width:"250",label:"Product name"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("label",{staticClass:"custom-content-break"},[e._v(" "+e._s(t.row.productName)+" ")])]}}])}),i("el-table-column",{attrs:{property:"productCode",label:"Product code",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{staticClass:"custom-content-break text-black",attrs:{type:"info",effect:"plain"}},[e._v(" "+e._s(t.row.code))])]}}])}),i("el-table-column",{attrs:{property:"cateName",label:"Category"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("label",{staticClass:"custom-content-break"},[e._v(" "+e._s(t.row.cateName)+" ")])]}}])}),e.gift.postActionType==e.$ENV.POST_ACTION_TYPE.GIFT_PRODUCT?i("el-table-column",{attrs:{label:"Quantity",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:10},model:{value:t.row.quantity,callback:function(i){e.$set(t.row,"quantity",i)},expression:"scope.row.quantity"}})]}}],null,!1,3354592409)}):e._e()],1),i("el-col",{attrs:{span:24}},[i("el-button",{staticClass:"float-right mt-3",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.selectProduct}},[e._v("Select Product")])],1)],1)])],1)},h=[],g=(i("7db0"),i("4160"),i("159b"),i("96cf"),i("1da1")),f={props:{},data:function(){return{strategyOptions:[{value:1,name:"CHEAPEST"},{value:2,name:"MOST EXPENSIVE"},{value:3,name:"DEFAULT"}],loading:!1,drawer:!1,isEdit:!1,gift:{giftId:"",postActionType:0,bonusPoint:0,name:"",brandId:"",listProduct:[]},actionRules:{name:[{required:!0,trigger:["blur","change"],message:"Please input name!"}],discountAmount:[{required:!0,trigger:["blur","change"],message:"Please input the amount!"}],bonusPoint:[{required:!0,trigger:["blur","change"],message:"Please input ponit!"}],minPriceAfter:[{required:!0,trigger:["blur","change"],message:"Please input the minimum price of product!"}],discountPercentage:[{required:!0,trigger:["blur","change"],message:"Please input the percentage!"}],maxAmount:[{required:!0,trigger:["blur","change"],message:"Please input the maximum discount price!"}],discountQuantity:[{required:!0,trigger:["blur","change"],message:"Please input the quantity of product to discount!"}],fixedPrice:[{required:!0,trigger:["blur","change"],message:"Please input the price!"}],ladderPrice:[{required:!0,trigger:["blur","change"],message:"Please input the price!"}],orderLadderProduct:[{required:!0,trigger:["blur","change"],message:"Please input the order of product!"}],bundleQuantity:[{required:!0,trigger:["blur","change"],message:"Please input the quantity of product in bundle!"}],bundlePrice:[{required:!0,trigger:["blur","change"],message:"Please input the price!"}],bundleStrategy:[{required:!0,trigger:["blur","change"],message:"Please input the price!"}]},shippingOption:"1",productSelection:[],isShipAmount:!0,CONSTANT:this.$ENV}},computed:{games:function(){return this.$store.state.game_campaign.gameConfigs},actions:function(){return this.action},products:function(){return this.$store.state.condition.products},actionParam:function(){return this.$store.state.action.giftParam},voucherGroups:function(){return this.$store.state.voucher.availVouchers}},methods:{handleSelectRow:function(e,t){var i=t.productId,n=null!=e.find((function(e){return e.productId==i}));console.log(n),n||(t.quantity=0)},getVoucherGroups:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.$store.commit("voucher/setAvailPageSize",0),e.$store.commit("voucher/setAvailPageIndex",0),t.next=5,e.$store.dispatch("voucher/getAvailableVoucher").then((function(t){e.loading=!1,200!=t.status&&e.$notify({title:"Warning",message:"Cannot get Vouchers",type:"warning"})})).catch((function(){e.loading=!1,e.$notify({title:"Warning",message:"Cannot get Vouchers",type:"warning"})}));case 5:case"end":return t.stop()}}),t)})))()},editMode:function(){this.isEdit=!this.isEdit,this.isEdit||this.getGiftDetail()},handleSelectionChange:function(e){this.productSelection=e},selectProduct:function(){var e=this.$ENV.POST_ACTION_TYPE.GIFT_PRODUCT,t=!0;this.gift.postActionType==e&&(t=this.validGiftQuantity()),t?this.drawer=!1:this.$notify({icon:"el-icon-warning",title:"Error",message:"Please input quantity",type:"warning"})},validGiftQuantity:function(){var e=!0;return this.productSelection.forEach((function(t){void 0!=t.quantity&&0!=t.quantity||(e=!1)})),e},openDrawerProduct:function(){this.drawer=!0,this.$nextTick((function(){var e=this;this.productSelection.forEach((function(t){console.log("forEach");var i=e.products.find((function(e){return e.productId==t.productId}));i&&(i.quantity=t.quantity,e.$refs["multipleTable"].toggleRowSelection(i,!0))}))}))},setupData:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getGiftDetail();case 2:return t.next=4,e.getVoucherGroups();case 4:return t.next=6,e.getProductList();case 6:return t.next=8,e.getGameCampaign();case 8:e.setupAction();case 9:case"end":return t.stop()}}),t)})))()},getGameCampaign:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("game_campaign/setPageSize",0),e.$store.commit("game_campaign/setPageIndex",0),t.next=4,e.$store.dispatch("game_campaign/getGameCampaignList").then((function(t){e.$store.commit("game_campaign/setPageSize",10),e.$store.commit("game_campaign/setPageIndex",1),200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Error while get Games",type:"warning"})})).catch((function(){e.$notify({icon:"el-icon-warning",title:"Error",message:"Error while get Games",type:"warning"})}));case 4:case"end":return t.stop()}}),t)})))()},setupAction:function(){var e=this;this.loading=!0;var t=this.$store.state.action.giftParam;this.loading=!0,this.productSelection=[],this.gift=t,this.gift.listProduct=[],this.productSelection=t.listProductMapp,null!=t.listProductMapp&&t.listProductMapp.forEach((function(t){e.gift.listProduct.push(t.productId)})),this.loading=!1},getGiftDetail:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("action/getGiftDetail").then((function(t){200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Cannot get gift information",type:"warning"})})).catch((function(){e.$notify({icon:"el-icon-warning",title:"Error",message:"Cannot get gift information",type:"warning"})}));case 3:case"end":return t.stop()}}),t)})))()},handleCloseDrawer:function(){var e=this;this.gift.listProduct=[],this.productSelection.length>0&&this.productSelection.forEach((function(t){e.gift.listProduct.push(t.productId)})),this.drawer=!1},getProductList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("condition/getBrandProduct").then((function(t){200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Error when getting product",type:"warning"})})).catch((function(){e.$notify({icon:"el-icon-warning",title:"Error",message:"Error when getting product",type:"warning"})}));case 2:case"end":return t.stop()}}),t)})))()},handleGiftUpdate:function(e){if(e.postActionType==this.$ENV.POST_ACTION_TYPE.GIFT_PRODUCT){if(0==this.productSelection.length)return void this.$notify({icon:"el-icon-warning",title:"Error",message:"Please select product",type:"danger"});e.listProduct=[],e.listProductMapp=[],this.productSelection.forEach((function(t){var i={productId:t.productId,quantity:t.quantity};e.listProduct.push(i)}))}return e},updateAction:function(){var e=this;this.$refs["giftForm"].validate((function(t){if(t){var i=e.handleGiftUpdate(e.gift);i&&(e.loading=!0,e.$store.commit("action/setUpdGift",i),e.$store.dispatch("action/updateGift").then((function(t){e.loading=!1,200!=t.status?e.$notify({icon:"el-icon-warning",title:"Error",message:"Update failed, please try again",type:"danger"}):(e.$notify({icon:"el-icon-warning",title:"Success",message:"Update success, please try again",type:"success"}),e.$emit("reset",1))})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Update failed, please try again",type:"danger"})})))}}))}},created:function(){this.setupData()}},v=f,b=(i("4eba"),i("2877")),y=Object(b["a"])(v,p,h,!1,null,null,null),C=y.exports,w={components:{GfitDetail:C},name:"gift-table",data:function(){return{pagination:{default:1},loading:!0,pageCount:10,dialogTableVisible:!1}},computed:{giftList:function(){return this.setPageCount(),this.$store.state.action.giftList}},beforeDestroy:function(){this.$store.commit("action/setPostActionList",[])},methods:{beforeCloseDialog:function(){this.$store.commit("action/setGiftParam",{}),this.dialogTableVisible=!1},openDialog:function(e){this.$store.commit("action/setGiftId",e),this.$refs["actionDetailDialog"]&&this.$refs["actionDetailDialog"].setupData(),this.dialogTableVisible=!0},showMessage:function(e,t){this.$message({showClose:!0,center:!0,duration:2500,message:e,type:t})},changePage:function(e){console.log("index :>> ",e),this.$store.commit("action/setPageIndexPost",e),this.loading=!0,this.getPostActionList()},setPageCount:function(){var e=this.$store.state.action.PageSizePost;this.pageCount=Math.ceil(this.$store.state.action.counterpost/e)},indexMethod:function(e){var t=this.$store.state.action.PageSizePost,i=this.$store.state.action.PageIndexPost;return e+=1,i>1?e+(i-1)*t:e},deleteAction:function(e){var t=this;this.$confirm("This will permanently delete the file. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.loading=!0;var i=e.giftId;t.$store.commit("action/setGiftId",i),t.$store.dispatch("action/deleteGift").then((function(e){t.loading=!1,200==e.status?(t.changePage(1),t.$notify({icon:"el-icon-warning",title:"Success",message:"Delete failed, please try again",type:"success"})):t.$notify({icon:"el-icon-warning",title:"Error",message:"Delete failed, please try again",type:"danger"})})).catch((function(){t.loading=!1,t.changePage(1),t.$notify({icon:"el-icon-warning",title:"Error",message:"Delete failed, please try again",type:"danger"})}))}))},getPostActionList:function(){var e=this;this.$store.dispatch("action/getPostAction").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.showMessage(t.message+", please try again!"),console.log("ActionTable.vue - getPostActionList:>> "+t)}))},deletePromotion:function(e){console.log("hi "+e)}},created:function(){this.changePage(1)},filters:{dateFormat:function(e){if(e)return m()(e).format("HH:mm - DD/MM/YYYY")},actionTypeFilter:function(e){switch(e){case 1:return"Gift products";case 2:return"Gift vouchers";case 3:return"Gift points";case 4:return"Gift game code"}}}},x=w,_=(i("b5f6"),Object(b["a"])(x,c,u,!1,null,null,null)),P=_.exports;a["default"].use(s.a);var T={components:{GiftTable:P},directives:{"b-tooltip":l["b"]},data:function(){return{}},methods:{createAction:function(){this.$router.push({name:"Action builder",params:{isAction:!1}})}}},I=T,E=(i("f5b0"),Object(b["a"])(I,n,o,!1,null,null,null));t["default"]=E.exports},"21a3":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow container-fluid mt-3 mb-3 pb-2",attrs:{id:"product"}},[i("div",{staticClass:"row pt-3 pb-2"},[e._m(0),i("div",{staticClass:"col-6"},[i("div",{staticClass:"row justify-content-end"},[e.isEdit?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close"},on:{click:e.editMode}},[e._v("Cancel")]):e._e(),e.isEdit?i("el-button",{attrs:{type:"success",icon:"el-icon-document-checked",size:"mini"},on:{click:e.saveProd}},[e._v("Save")]):e._e(),this.isPress?e._e():i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.productList.length>0,expression:"productList.length > 0"}],attrs:{type:"success",icon:"el-icon-edit-outline",size:"mini"},on:{click:e.editMode}},[e._v("Edit")]),e.isAdd?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close"},on:{click:e.addMode}},[e._v("Cancel")]):e._e(),this.isPress?e._e():i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:e.addMode}},[e._v("Add")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.productList.length>0,expression:"productList.length > 0"}],attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.multiSelection.length>0,size:"mini"},on:{click:e.cancelDialog}},[e._v("Delete")])],1)])]),e.isAdd?i("div",{staticClass:"col-12"},[i("el-form",{ref:"createForm",staticClass:"row justify-content-center",attrs:{model:e.createForm,rules:e.addRules}},[i("el-form-item",{staticClass:"col-3 align-self-center",attrs:{prop:"productCateId"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Product Category")])]),i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.isAdd,placeholder:"Select Category",size:"small"},model:{value:e.createForm.productCateId,callback:function(t){e.$set(e.createForm,"productCateId",t)},expression:"createForm.productCateId"}},e._l(e.productCateList,(function(e){return i("el-option",{key:e.productCateId,attrs:{label:e.name,value:e.productCateId}})})),1)],1),i("el-form-item",{staticClass:"col-4 mb-0",attrs:{prop:"code"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Product Code ")])]),i("el-input",{attrs:{type:"text",placeholder:"Input Code here",size:"small",maxlength:"50",spellcheck:"false","show-word-limit":""},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.createForm.code,callback:function(t){e.$set(e.createForm,"code",t)},expression:"createForm.code"}})],1),i("el-form-item",{staticClass:"col-4 mb-3",attrs:{prop:"name"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Product Name ")])]),i("el-input",{attrs:{type:"text",placeholder:"Input name here",size:"small",maxlength:"80",spellcheck:"false","show-word-limit":""},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1),i("el-form-item",{staticClass:"col-1 mb-0 mt-2 align-self-center"},[i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.submitForm("createForm")}}},[e._v("Add")])],1)],1)],1):e._e(),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"mb-2 product-table",staticStyle:{width:"100%"},attrs:{data:e.productList,"max-height":"580","cell-style":{padding:"0px",height:"5vh"},stripe:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{type:"selection",align:"center",fixed:""}}),i("el-table-column",{attrs:{label:"No.",type:"index",index:e.indexMethod,width:"50"}}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{label:"Product Category",prop:"cateId",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{attrs:{disabled:!e.isEdit,placeholder:"",size:"small"},on:{change:function(i){return e.handleChange(t.$index)}},model:{value:t.row.productCateId,callback:function(i){e.$set(t.row,"productCateId",i)},expression:"scope.row.productCateId"}},e._l(e.productCateList,(function(t){return i("el-option",{key:t.productCateId,attrs:{label:t.name,value:t.productCateId}},[i("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))])])})),1)]}}])}),i("el-table-column",{attrs:{label:"Product Code",prop:"code"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?i("el-input",{attrs:{type:"text",placeholder:"Input code here",size:"small",maxlength:"50",spellcheck:"false",valid:t.row.valid,"show-word-limit":""},on:{input:function(i){return e.handleChangeCode(t.$index,t.row.code)}},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:t.row.code,callback:function(i){e.$set(t.row,"code",i)},expression:"scope.row.code"}}):e._e(),e.isEdit?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.code))])]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{label:"Product Name",prop:"productName"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?i("el-input",{attrs:{type:"text",placeholder:"Input name here",size:"small",maxlength:"80",spellcheck:"false",valid:t.row.valid,"show-word-limit":""},on:{input:function(i){return e.handleChangeName(t.$index,t.row.productName)}},model:{value:t.row.productName,callback:function(i){e.$set(t.row,"productName",i)},expression:"scope.row.productName"}}):e._e(),e.isEdit?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.productName))])]}}])})],1),i("div",{staticClass:"d-flex justify-content-end pr-0"},[i("base-pagination",{ref:"basePagination",staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1),i("el-dialog",{attrs:{title:"Confirm action",visible:e.dialogVisible,width:"27%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("Are you sure you want to delete these items ?")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelDialog}},[e._v("Cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:e.hideProd}},[e._v("Confirm")])],1)])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-6"},[i("div",{staticClass:"row justify-content-start"},[i("strong",[e._v("Products")])])])}],a=(i("4160"),i("caad"),i("c975"),i("a434"),i("b0c0"),i("ac1f"),i("2532"),i("5319"),i("498a"),i("159b"),i("b85c")),r={name:"product-table",data:function(){return{isEdit:!1,isAdd:!1,isPress:!1,loading:!0,isDuplicate:!1,pagination:{default:1},pageCount:1,multiSelection:[],errorIndex:[],editIndex:[],createForm:{productCateId:"",code:"",name:""},dialogVisible:!1,addRules:{code:[{validator:this.validateAddCode,trigger:"change"}],name:[{validator:this.validateAddName,trigger:"change"}],productCateId:[{required:!0,message:"Category is required!"}]}}},watch:{editIndex:function(){if(this.editIndex){var e,t=Object(a["a"])(this.editIndex);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=this.productList[i];n.code&&n.productName.trim()||(!n.code&&n.productName.trim()?this.errorIndex.includes(i)||(console.log("đẩy lỗi ở editIndex !product.code && product.productName.trim()"),this.errorIndex.push(i)):n.code&&!n.productName.trim()&&(this.errorIndex.includes(i)||(console.log("đẩy lỗi ở editIndex product.code && !product.productName.trim()"),this.errorIndex.push(i))))}}catch(o){t.e(o)}finally{t.f()}}}},props:{},computed:{productList:function(){return this.setPageCount(),this.$store.state.product.productList},productCodeList:function(){return this.$store.state.product.productCodeList},productCateList:function(){return this.$store.state.product_cate.productCateSelectList}},methods:{validateAddName:function(e,t,i){t?(console.log("validateAddName :>> ",t),t.trim()?i():i(new Error("Name is required!"))):i(new Error("Name is required!"))},validateAddCode:function(e,t,i){if(t){for(var n=this.productCodeList,o=0;o<t.length;o++)t.charCodeAt(o)>127&&i(new Error("Accept no Unicode!"));t.trim()?-1!=n.indexOf(t)?i(new Error("Duplicate Code!")):i():i(new Error("Code is required!"))}else i(new Error("Code is required!"))},resetPage:function(){this.$refs["basePagination"].changePage(1)},getProduct:function(){var e=this;this.$store.dispatch("product/getProduct").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("ProductTable.vue - getProduct:>> "+t)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.addProduct()}))},addProduct:function(){var e=this;this.loading=!0,this.$store.commit("product/setProductCateId",this.createForm.productCateId),this.$store.commit("product/setProductName",this.createForm.name.replace(/\s+/g," ").trim()),this.$store.commit("product/setCode",this.createForm.code.trim()),this.$store.dispatch("product/addProd").then((function(){e.$message({message:"Add successful.",type:"success"}),e.loading=!1,e.isPress=!e.isPress,e.isAdd=!e.isAdd,e.createForm.productCateId="",e.createForm.code="",e.createForm.name="",e.resetPage(),e.getProduct()}),(function(t){e.$message({message:"Add failed.",type:"danger"}),console.log("ProductTable.vue - addProd:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("ProductTable.vue - addProd:>> "+t)}))},changePage:function(e){console.log("index :>> ",e),this.$store.commit("product/setPageIndex",e),this.loading=!0,this.getProduct()},setPageCount:function(){var e=this.$store.state.product.PageSize;this.pageCount=Math.ceil(this.$store.state.product.counter/e)},indexMethod:function(e){var t=this.$store.state.product.PageSize,i=this.$store.state.product.PageIndex;return e+=1,i>1?e+(i-1)*t:e},handleSelectionChange:function(e){this.multiSelection=e},editMode:function(){this.isEdit=!this.isEdit,this.isPress=!this.isPress,this.isEdit||(this.editIndex=[],this.errorIndex=[],this.handleSelectionChange([]),this.getProduct())},addMode:function(){this.isAdd=!this.isAdd,this.isPress=!this.isPress,this.isAdd||(this.createForm.code="",this.createForm.name="",this.createForm.productCateId="",this.handleSelectionChange([]),this.getProduct())},cancelDialog:function(){this.dialogVisible=!this.dialogVisible,this.dialogVisible||(this.handleSelectionChange([]),this.getProduct())},handleChangeCode:function(e,t){var i=this;if(console.log("handleChangeCode :>> ",t),t){for(var n=!1,o=0;o<t.length;o++)t.charCodeAt(o)>127&&(n=!0);n?(this.$message({showClose:!0,center:!0,duration:2500,message:"Accept no Unicode!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeCode existUnicode"),this.errorIndex.push(e)),console.log("this.errorIndex :>> ",this.errorIndex)):(this.errorIndex.includes(e)&&(console.log("gỡ lỗi ở handlechangeCode"),this.errorIndex.splice(this.errorIndex.indexOf(e),1)),this.$store.commit("product/setProductCode",t),this.$store.commit("product/setProductId",this.productList[e].productId),this.$store.dispatch("product/checkDuplicate").then((function(){i.isDuplicate=i.$store.state.product.isDuplicate,i.isDuplicate&&(i.$message({showClose:!0,center:!0,duration:2500,message:"Duplicate Code!",type:"error"}),i.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeCode checkDuplicate"),i.errorIndex.push(e)))})))}else this.$message({showClose:!0,center:!0,duration:2500,message:"Code is required!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeCode khi mà ko có value"),this.errorIndex.push(e));this.handleChange(e)},handleChangeName:function(e,t){console.log("handleChangeName :>> ",t),t?t.trim()?this.errorIndex.includes(e)&&(console.log("gỡ lỗi ở handleChangeName khi mà có value"),this.errorIndex.splice(this.errorIndex.indexOf(e),1)):(this.$message({showClose:!0,center:!0,duration:2500,message:"Name is required!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeName khi mà !value.trim()"),this.errorIndex.push(e))):(this.$message({showClose:!0,center:!0,duration:2500,message:"Name is required!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeName khi mà ko có value"),this.errorIndex.push(e))),this.handleChange(e)},handleChange:function(e){this.editIndex.includes(e)?this.editIndex.splice(this.editIndex.indexOf(e),1,e):this.editIndex.push(e)},hideProd:function(){var e=this;this.loading=!this.loading;var t=this.multiSelection;this.$store.commit("product/setHideParams",t),this.$store.dispatch("product/hideProd").then((function(){e.$message({message:"Delete successful.",type:"warning"}),e.resetPage(),e.dialogVisible=!e.dialogVisible,e.getProduct()}),(function(t){console.log("Delete FAIL: product/hideProd"),console.log(t),e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("ProductTable.vue - hideProd:>> "+t)}))},getProductCate:function(){var e=this;this.$store.dispatch("product_cate/getProductCate").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("ProductCateTable.vue - getProdCate:>> "+t)}))},saveProd:function(){var e=this;if(this.errorIndex.length>0)this.$message({showClose:!0,center:!0,duration:3e3,message:"Products: Please check again the error field(s)!",type:"error"}),console.log("this.errorIndex :>> ",this.errorIndex);else if(console.log("this.errorIndex khi ko có lỗi :>> ",this.errorIndex),this.loading=!0,null!=this.editIndex&&this.editIndex.length>0){var t=[];this.editIndex.forEach((function(i){var n={productId:e.productList[i].productId,productCateId:e.productList[i].productCateId,code:e.productList[i].code.trim(),name:e.productList[i].productName.replace(/\s +/g," ").trim()};t.push(n)})),this.$store.commit("product/setUpdateParams",t),this.$store.dispatch("product/saveProd").then((function(){e.$message({showClose:!0,center:!0,duration:3e3,message:"Save successful!",type:"success"}),e.isPress=!e.isPress,e.isEdit=!e.isEdit,e.editIndex=[],e.errorIndex=[],e.resetPage(),e.getProduct()}),(function(t){e.$message({showClose:!0,center:!0,duration:3e3,message:"Save failed!",type:"error"}),console.log("ProductTable.vue - saveProd:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("ProductTable.vue - saveProd:>> "+t)}))}else this.isPress=!this.isPress,this.isEdit=!this.isEdit,this.getProduct()}},created:function(){this.getProductCate(),this.getProduct()},destroyed:function(){this.$store.commit("product/setPageIndex",1)},filters:{}},s=r,l=(i("c90f"),i("2877")),c=Object(l["a"])(s,n,o,!1,null,null,null);t["a"]=c.exports},2430:function(e,t,i){"use strict";i("f3e7")},2479:function(e,t,i){},2532:function(e,t,i){"use strict";var n=i("23e7"),o=i("5a34"),a=i("1d80"),r=i("ab13");n({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(a(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},"26d3":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"align-center"},[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}}),i("div",{staticClass:"ml-4 mr-4 mb-0 pt-3 pl-4 pr-4 pb-0 mt--9",attrs:{id:"settings"}},[i("div",{staticClass:"container-fluid mt-3 mb-0 pb-2 settings"},[i("div",{staticClass:"row align-items-center justify-content-start pt-3 pb-0"},[i("div",{staticClass:"card shadow distributor-container col-12 mb-2 mr-3 pb-2"},[i("span",{staticClass:"h1 row mt-2 ml-0 mb-0 font-weight-bolder"},[e._v(" Distributor ")]),i("el-divider",{staticClass:"mt-0 mb-3"}),i("center",{staticClass:"row justify-content-start ml-0"},[i("el-button",{staticClass:"col-3 ml-0 mb-2 mr-3",attrs:{type:"success",plain:""},on:{click:function(t){return e.redirectPage("/store")}}},[i("center",[i("i",{staticClass:"icon row justify-content-center fa fa-store-alt mr-0 ml-0"}),i("span",{staticClass:"row justify-content-center"},[e._v("Store")])])],1),i("el-button",{staticClass:"col-3 ml-0 mb-2 mr-1",attrs:{type:"success",plain:""},on:{click:function(t){return e.redirectPage("/channel")}}},[i("center",[i("i",{staticClass:"icon row justify-content-center fa fa-network-wired mr-0 ml-0"}),i("span",{staticClass:"row justify-content-center"},[e._v("Channel")])])],1)],1)],1)]),i("div",{staticClass:"row align-items-center justify-content-start pt-0 pb-0"},[i("div",{staticClass:"card shadow distributor-container col-12 mb-2 mr-3 pb-2"},[i("span",{staticClass:"h1 row mt-2 ml-0 mb-0 font-weight-bolder"},[e._v(" Product ")]),i("el-divider",{staticClass:"mt-0 mb-3"}),i("center",{staticClass:"row justify-content-start ml-0"},[i("el-button",{staticClass:"col-3 ml-0 mb-2 mr-3",attrs:{type:"success",plain:""},on:{click:function(t){return e.redirectPage("/product-cate")}}},[i("center",[i("i",{staticClass:"icon row justify-content-center fa fa-list-ul mr-0 ml-0"}),i("span",{staticClass:"row justify-content-center"},[e._v("Product Category")])])],1),i("el-button",{staticClass:"col-3 ml-0 mb-2 mr-1",attrs:{type:"success",plain:""},on:{click:function(t){return e.redirectPage("/product")}}},[i("center",[i("i",{staticClass:"icon row justify-content-center fa fa-shopping-cart mr-0 ml-0"}),i("span",{staticClass:"row justify-content-center"},[e._v("Product")])])],1)],1)],1)]),i("div",{staticClass:"row align-items-center justify-content-start pt-0 pb-0"},[i("div",{staticClass:"card shadow distributor-container col-12 mb-2 mr-3 pb-2"},[i("span",{staticClass:"h1 row mt-2 ml-0 mb-0 font-weight-bolder"},[e._v(" Other")]),i("el-divider",{staticClass:"mt-0 mb-3"}),i("center",{staticClass:"row justify-content-start ml-0"},[i("el-button",{staticClass:"col-3 ml-0 mb-2 mr-3",attrs:{type:"success",plain:""},on:{click:function(t){return e.redirectPage("/game-campaign")}}},[i("center",[i("i",{staticClass:"icon row justify-content-center fa fa-gamepad mr-0 ml-0"}),i("span",{staticClass:"row justify-content-center"},[e._v("Game campaign")])])],1),i("el-button",{staticClass:"col-3 ml-0 mb-2 mr-3",attrs:{type:"success",plain:""},on:{click:function(t){return e.redirectPage("/device")}}},[i("center",[i("i",{staticClass:"icon row justify-content-center fa fa-tablet mr-0 ml-0"}),i("span",{staticClass:"row justify-content-center"},[e._v("Device")])])],1),i("el-button",{staticClass:"col-3 ml-0 mb-2 mr-1",attrs:{type:"success",plain:""},on:{click:function(t){return e.redirectPage("/memlv")}}},[i("center",[i("i",{staticClass:"icon row justify-content-center fa fa-address-card mr-0 ml-0"}),i("span",{staticClass:"row justify-content-center"},[e._v("Membership level")])])],1)],1)],1)])])])],1)},o=[],a={watch:{},props:{},methods:{redirectPage:function(e){this.$router.push(e)}},created:function(){}},r=a,s=(i("3e4b"),i("2877")),l=Object(s["a"])(r,n,o,!1,null,null,null);t["default"]=l.exports},2741:function(e,t,i){},"2bc0":function(e,t,i){"use strict";i("c809")},"2cae":function(e,t,i){"use strict";i("9f6e")},"2d23":function(e,t,i){},"2d66":function(e,t,i){"use strict";i("0b44")},"2dab":function(e,t,i){},"2f68":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{staticClass:"drop-zone",attrs:{id:"condition-zone",span:24}},[i("h3",[e._v("Conditions")]),i("el-collapse",[i("div",[i("el-collapse-item",[i("template",{slot:"title"},[e._v(" Cart item ")]),i("draggable",{attrs:{list:e.prodCondItem,group:{name:"prodCondItem",pull:"clone",put:!1},clone:e.cloneProdCond}},e._l(e.prodCondItem,(function(t,n){return i("el-col",{key:n,staticClass:"mb-2",attrs:{span:24}},[i("el-tag",{staticClass:"mb-1 ml-1 mr-1 text-dark custom-tag-item",attrs:{effect:"plain",type:"success"}},[e._v(" "+e._s(t.name)+" ")])],1)})),1)],2)],1),i("div",{attrs:{id:"cond-cart-zone"}},[i("el-collapse-item",[i("template",{slot:"title"},[e._v(" Cart ")]),i("draggable",{staticClass:" ",attrs:{list:e.orderCondItem,clone:e.cloneOrderCond,group:{name:"orderCondItem",pull:"clone",put:!1}}},e._l(e.orderCondItem,(function(t,n){return i("el-col",{key:n,staticClass:"mb-2",attrs:{span:24}},[i("el-tag",{staticClass:"mb-1 ml-1 mr-1 text-dark custom-tag-item",attrs:{effect:"plain",type:"success"}},[e._v(" "+e._s(t.name)+" ")])],1)})),1)],2)],1),i("div",{attrs:{id:"cond-group-zone"}},[i("el-collapse-item",[i("template",{slot:"title"},[e._v(" Group ")]),i("draggable",{attrs:{list:e.condGroupItem,group:{name:"groupItem",pull:"clone",put:!1},clone:e.cloneCondGroup}},e._l(e.condGroupItem,(function(t,n){return i("el-col",{key:n,attrs:{span:24}},[i("el-tag",{staticClass:"mb-1 ml-1 mr-1 text-dark custom-tag-item",attrs:{effect:"plain",type:"success"}},[e._v(" "+e._s(t.name)+" ")])],1)})),1)],2)],1)])],1)],1)],1)},o=[],a=i("b76a"),r=i.n(a),s={name:"drag-item-section",props:{conditionItem:Array,actionItem:Array,actionType:String},components:{draggable:r.a},created:function(){},data:function(){return{condGroupItem:[{name:"Group",groupNo:0,tasks:[],nextOperator:"1"}],prodCondItem:[{condType:"PRODUCT",itemType:"QUANTITY",name:"Quantity",productQuantity:0,quantityOperator:"1",nextOperator:"1",productList:[]},{condType:"PRODUCT",itemType:"CODE",name:"Product code",productCode:"",nextOperator:"1",productConditionType:"0",productList:[]}],orderCondItem:[{condType:"ORDER",itemType:"QUANTITY",name:"Quantity",quantityOperator:"1",quantity:0,nextOperator:"1"},{condType:"ORDER",itemType:"AMOUNT",name:"Amount",amountOperator:"1",amount:0,nextOperator:"1"}]}},computed:{products:function(){return this.$store.state.condition.products}},methods:{log:function(e){console.log("log change"),window.console.log(e)},cloneCondGroup:function(){return{groupNo:0,tasks:[],nextOperator:1}},cloneProdCond:function(e){var t=this.$ENV.NEXT_OPERATOR,i=this.$ENV.CONTAIN_CODE,n=this.$ENV.OPERATOR_PARAM,o=e.itemType;switch(o){case"QUANTITY":return{condType:"PRODUCT",itemType:"QUANTITY",name:"Quantity",productQuantity:0,quantityOperator:n.GREATER_THAN,nextOperator:t.OR,productList:[]};case"CODE":return{condType:"PRODUCT",itemType:"CODE",name:"Product code",nextOperator:t.OR,productConditionType:i.INCLUDE,productList:[]}}},cloneOrderCond:function(e){var t=this.$ENV.OPERATOR_PARAM,i=this.$ENV.NEXT_OPERATOR,n=e.itemType;switch(n){case"QUANTITY":return{condType:"ORDER",itemType:"QUANTITY",name:"Quantity",quantityOperator:t.GREATER_THAN,quantity:0,nextOperator:i.OR};case"AMOUNT":return{condType:"ORDER",itemType:"AMOUNT",name:"Amount",amountOperator:t.GREATER_THAN,amount:0,nextOperator:i.OR}}}}},l=s,c=(i("2d66"),i("2877")),u=Object(c["a"])(l,n,o,!1,null,"0ac9e18e",null);t["a"]=u.exports},3389:function(e,t,i){},3530:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-7",attrs:{type:"gradient-success"}}),i("div",{staticClass:"ml-4 mr-4 mb-4 p-4 mt--5 float-center"},[i("admin-table")],1)],1)},o=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow container-fluid mt-3 mb-3 pb-2 pr-0 pl-0 pt-2"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb-2",staticStyle:{width:"100%"},attrs:{data:e.accountList,stripe:""}},[i("el-table-column",{attrs:{label:"No.",type:"index",width:"45",align:"right",fixed:""}}),i("el-table-column",{attrs:{label:"Username",prop:"username",width:"280"}}),i("el-table-column",{attrs:{label:"Brand",prop:"brand.brandName",width:"330"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!=t.row.brand?t.row.brand.brandName:"")+" ")]}}])}),i("el-table-column",{attrs:{label:"Role",prop:"roleId",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.roleId?i("el-button",{staticClass:"mr-3",attrs:{type:"primary",icon:"el-icon-s-shop",size:"small",plain:""}},[e._v(" "+e._s(e._f("roleFilter")(t.row.roleId))+" ")]):e._e(),2===t.row.roleId?i("el-button",{staticClass:"mr-3",attrs:{type:"warning",icon:"el-icon-s-custom",size:"small",plain:""}},[e._v(" "+e._s(e._f("roleFilter")(t.row.roleId))+" ")]):e._e()]}}])}),i("el-table-column",{attrs:{label:"Active",prop:"isActive",fixed:"right",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{disabled:2===t.row.roleId},on:{change:function(i){e.handleStatus(t.$index,t.row.username,{username:t.row.username,updDate:new Date,isActive:t.row.isActive})}},model:{value:t.row.isActive,callback:function(i){e.$set(t.row,"isActive",i)},expression:"scope.row.isActive"}})]}}])})],1),i("div",{staticClass:"d-flex justify-content-end pr-0"},[i("base-pagination",{staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1)],1)},r=[],s=(i("d3b7"),i("25f0"),i("b012")),l=i("c1df"),c=i.n(l),u={name:"admin-table",data:function(){return{loading:!0,pagination:{default:1},pageCount:1,isActive:!0}},computed:{accountList:function(){return this.setPageCount(),this.$store.state.admin.accountList}},components:{},methods:{handleStatus:function(e,t,i){var n=this;this.$store.commit("admin/setParams",i),this.$store.commit("admin/setUsername",t),this.$store.commit("admin/setPosition",e),this.$store.dispatch("admin/updateStatus").then((function(){n.loading=!1,n.getAccount()})).catch((function(e){n.loading=!1,n.message=e.response&&e.response.data||e.message||e.toString()}))},changePage:function(e){console.log("changePage trigger!"),this.$store.commit("admin/setPageIndex",e),this.loading=!0,this.getAccount()},getAccount:function(){var e=this;this.$store.dispatch("admin/getAccountList").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.message=t.response&&t.response.data||t.message||t.toString()}))},setPageCount:function(){var e=this.$store.state.admin.PageSize;this.pageCount=Math.ceil(this.$store.state.admin.counter/e)},getSearch:Object(s["debounce"])((function(){console.log("getSearch trigger!")}),1e3)},created:function(){this.getAccount()},filters:{dateFormat:function(e){if(e)return c()(e).format("DD/MM/YYYY, HH:mm:ss")},statusFilter:function(e){return e?"Active":"Disable"},roleFilter:function(e){return 1===e?"Brand":"Admin"}}},d=u,m=i("2877"),p=Object(m["a"])(d,a,r,!1,null,null,null),h=p.exports,g=i("b084"),f={beforeCreate:function(){var e=this.$session,t=g["a"].validation(e);if(t){var i=e.get("user-info");i.roleName==this.$ENV.ROLE.ADMIN?this.$router.push("/admin").catch((function(){})):this.$router.push("/")}else this.$router.push("/login").catch((function(){}))},data:function(){return{}},components:{AdminTable:h},methods:{}},v=f,b=Object(m["a"])(v,n,o,!1,null,null,null);t["default"]=b.exports},"3bd5":function(e,t,i){"use strict";i("74a4")},"3e4b":function(e,t,i){"use strict";i("bf50")},"413c":function(e,t,i){},"43bb":function(e,t,i){"use strict";i("7a83")},"44e7":function(e,t,i){var n=i("861d"),o=i("c6b6"),a=i("b622"),r=a("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==o(e))}},"466d":function(e,t,i){"use strict";var n=i("d784"),o=i("825a"),a=i("50c4"),r=i("1d80"),s=i("8aa5"),l=i("14c3");n("match",1,(function(e,t,i){return[function(t){var i=r(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,i):new RegExp(t)[e](String(i))},function(e){var n=i(t,e,this);if(n.done)return n.value;var r=o(e),c=String(this);if(!r.global)return l(r,c);var u=r.unicode;r.lastIndex=0;var d,m=[],p=0;while(null!==(d=l(r,c))){var h=String(d[0]);m[p]=h,""===h&&(r.lastIndex=s(c,a(r.lastIndex),u)),p++}return 0===p?null:m}]}))},"467e":function(e,t,i){},"47b0":function(e,t,i){"use strict";i("6475")},"498a":function(e,t,i){"use strict";var n=i("23e7"),o=i("58a8").trim,a=i("c8d2");n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return o(this)}})},"4a39":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingImage,expression:"loadingImage"}],class:e.headerClass,style:e.headerStyle},[i("span",{staticClass:"mask opacity-2"}),i("div",{staticClass:"container-fluid d-flex align-items-center"},[i("div",{staticClass:"row mt-5"},[i("div",{staticClass:"col-lg-12 col-md-10 mt-9"},[i("el-button",{staticClass:"mt-5 opacity-4",attrs:{icon:"el-icon-camera-solid",type:"info",plain:""},on:{click:function(t){return e.$refs.fileInput.click()}}},[i("i",{staticClass:"bi bi-camera"}),e._v(" Upload Image ")]),i("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",enctype:"multipart/form-data",accept:"image/*"},on:{change:e.chooseImage}})],1)])])]),i("div",{staticClass:"container-fluid mt--7"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xl-11 order-xl-1"},[i("el-form",{ref:"userProfile",staticClass:"demo-ruleForm",attrs:{"label-position":e.formPosition,model:e.userProfile,rules:e.rules,"label-width":"120px"}},[i("card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{shadow:"",type:"secondary"}},[i("div",{staticClass:"bg-white border-0",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"row align-items-center"},[i("div",{staticClass:"col-8"},[i("h3",{staticClass:"mb-0"},[e._v("My Profile")])]),i("div",{staticClass:"col-4 text-right"},[e.isEdit?e._e():i("el-button",{attrs:{size:"small",icon:"el-icon-edit-outline",type:"primary"},on:{click:e.editProfile}},[e._v("Edit")]),e.isEdit?i("el-button",{attrs:{size:"small",icon:"el-icon-circle-close",type:"info"},on:{click:function(t){return e.cancelEdit("userProfile")}}},[e._v("Close")]):e._e(),e.isDisable?e._e():i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingSave,expression:"loadingSave"}],attrs:{size:"small",icon:"el-icon-document-checked",type:"primary"},on:{click:function(t){return e.saveProfile("userProfile")}}},[e._v("Save")])],1)])]),[i("h6",{staticClass:"heading-small text-muted mb-4"},[e._v("Brand information")]),i("div",{staticClass:"pl-lg-4"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-4"},[i("el-form-item",{attrs:{label:"Brand Code",prop:"brandCode"}},[i("label",[i("b",[e._v(" "+e._s(e.userProfile.brandCode)+" ")])])])],1),i("div",{staticClass:"col-lg-8"},[i("el-form-item",{attrs:{label:"Brand name",prop:"brandName"}},[e.isDisable?i("label",[i("b",[e._v(" "+e._s(e.userProfile.brandName))])]):e._e(),e.isDisable?e._e():i("el-input",{attrs:{"input-classes":"form-control-alternative"},model:{value:e.userProfile.brandName,callback:function(t){e.$set(e.userProfile,"brandName",t)},expression:"userProfile.brandName"}})],1)],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-4"},[i("el-form-item",{attrs:{label:"Company",prop:"companyName"}},[e.isDisable?i("label",[i("b",[e._v(" "+e._s(e.userProfile.companyName))])]):e._e(),e.isDisable?e._e():i("el-input",{model:{value:e.userProfile.companyName,callback:function(t){e.$set(e.userProfile,"companyName",t)},expression:"userProfile.companyName"}})],1)],1),i("div",{staticClass:"col-lg-4"},[i("el-form-item",{attrs:{label:"Email",prop:"brandEmail"}},[e.isDisable?i("label",[i("b",[e._v(e._s(e.userProfile.brandEmail))])]):e._e(),e.isDisable?e._e():i("el-input",{model:{value:e.userProfile.brandEmail,callback:function(t){e.$set(e.userProfile,"brandEmail",t)},expression:"userProfile.brandEmail"}})],1)],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-4"},[i("el-form-item",{attrs:{label:"Address",prop:"address"}},[e.isDisable?i("label",[i("b",[e._v(" "+e._s(e.userProfile.address))])]):e._e(),e.isDisable?e._e():i("el-input",{model:{value:e.userProfile.address,callback:function(t){e.$set(e.userProfile,"address",t)},expression:"userProfile.address"}})],1)],1),i("div",{staticClass:"col-lg-4"},[i("el-form-item",{attrs:{label:"Hotline",prop:"phoneNumber"}},[e.isDisable?i("label",[i("b",[e._v(" "+e._s(e.userProfile.phoneNumber))])]):e._e(),e.isDisable?e._e():i("el-input",{attrs:{type:"number"},model:{value:e.userProfile.phoneNumber,callback:function(t){e.$set(e.userProfile,"phoneNumber",t)},expression:"userProfile.phoneNumber"}})],1)],1)])]),i("hr",{staticClass:"my-4"}),i("h6",{staticClass:"heading-small text-muted mb-4"},[e._v("About Brand")]),i("div",{staticClass:"pl-lg-4"},[i("div",{staticClass:"form-group"},[i("base-input",{attrs:{label:"Discription",alternative:""}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userProfile.description,expression:"userProfile.description"}],staticClass:"form-control form-control-alternative",attrs:{disabled:e.isDisable,rows:"4",placeholder:"A few words about you ..."},domProps:{value:e.userProfile.description},on:{input:function(t){t.target.composing||e.$set(e.userProfile,"description",t.target.value)}}})])],1)])]],2)],1)],1),i("div",{staticClass:"col-xl-11 order-xl-1 mt-2"},[i("card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{shadow:"",type:""}},[i("h6",{staticClass:"heading-small text-muted mb-4"},[e._v("Account")]),i("div",{staticClass:"pl-lg-4"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb-2",staticStyle:{width:"100%"},attrs:{data:e.userProfile.account,stripe:""}},[i("el-table-column",{attrs:{label:"No.",type:"index",width:"45",align:"right",fixed:""}}),i("el-table-column",{attrs:{label:"Name",prop:"brand",width:"330"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.lastName+" "+t.row.firstName)+" ")]}}])}),i("el-table-column",{attrs:{label:"Username",prop:"username",width:"280"}}),i("el-table-column",{attrs:{label:"Phone",prop:"phoneNumber",width:"330"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.phoneNumber)+" ")]}}])}),i("el-table-column",{attrs:{label:"Email",prop:"email",width:"330"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.email)+" ")]}}])}),i("el-table-column",{attrs:{label:"Active",prop:"isActive",fixed:"right",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isActive?i("el-tag",{staticClass:"mr-3",attrs:{type:"success"}},[e._v(" "+e._s(e._f("statusFilter")(t.row.isActive))+" ")]):e._e(),t.row.isActive?e._e():i("el-tag",{staticClass:"mr-3",attrs:{type:"danger"}},[e._v(" "+e._s(e._f("statusFilter")(t.row.isActive))+" ")])]}}])})],1)],1)])],1)])]),i("el-dialog",{attrs:{title:"Account Information",visible:e.accountDialog,width:"70%","before-close":e.handleClose},on:{"update:visible":function(t){e.accountDialog=t}}},[i("el-form",[i("div",{staticClass:"pl-lg-4"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-4"},[i("el-form-item",{attrs:{label:"First Name",prop:"firstName"}},[i("el-input",{model:{value:e.account.firstName,callback:function(t){e.$set(e.account,"firstName",t)},expression:"account.firstName"}})],1)],1),i("div",{staticClass:"col-lg-4"},[i("el-form-item",{attrs:{label:"Last Name",prop:"lastName"}},[i("el-input",{model:{value:e.account.lastName,callback:function(t){e.$set(e.account,"lastName",t)},expression:"account.lastName"}})],1)],1),i("div",{staticClass:"col-lg-4"},[i("el-form-item",{attrs:{label:"Phone No",prop:"phoneNumber"}},[i("el-input",{attrs:{type:"number","input-classes":"form-control-alternative"},model:{value:e.account.phoneNumber,callback:function(t){e.$set(e.account,"phoneNumber",e._n(t))},expression:"account.phoneNumber"}})],1)],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-4"},[i("el-form-item",{attrs:{label:"Username",prop:"username"}},[i("el-input",{model:{value:e.account.username,callback:function(t){e.$set(e.account,"username",t)},expression:"account.username"}})],1)],1),i("div",{staticClass:"col-lg-8"},[i("el-form-item",{attrs:{label:"Email",prop:"email"}},[i("el-input",{model:{value:e.account.email,callback:function(t){e.$set(e.account,"email",t)},expression:"account.email"}})],1)],1)])])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.accountDialog=!1}}},[e._v("Cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.accountDialog=!1}}},[e._v("Confirm")])],1)],1)],1)},o=[],a=(i("b0c0"),i("d3b7"),i("25f0"),i("96cf"),i("1da1")),r=i("2591"),s={name:"user-profile",data:function(){return{account:{},loading:!0,loadingImage:!0,loadingSave:!1,isDisable:!0,accountDialog:!1,headerClass:"header pb-8 pt-5 pt-lg-8 d-flex align-items-center img-fluid",rules:{brandEmail:[{required:!0,message:"Please input Email",trigger:"blur"},{type:"email",message:"Please input correct email format",trigger:["blur","change"]}],firstName:[{required:!0,message:"Please input First name",trigger:"change"}],lastName:[{required:!0,message:"Please input Last name",trigger:"change"}],phoneNumber:[{required:!0,message:"Please input Number",trigger:"change"}],brandName:[{required:!0,message:"Please input Brand Name",trigger:"change"}],companyName:[{required:!0,message:"Please input Company Name",trigger:"change"}],address:[{required:!0,message:"Please input Address",trigger:"change"}]},isEdit:!1,image:"",imageData:null,headerStyle:"",formPosition:"left"}},created:function(){this.getProfile()},computed:{userProfile:function(){return this.$store.state.profile.profile}},methods:{getProfile:function(){var e=this;this.$store.dispatch("profile/getProfile").then((function(){e.loading=!1,e.headerStyle="min-height: 600px; background-size: cover; background-position: center top; background-image: url("+e.userProfile.imgUrl+"); ",e.loadingImage=!1}),(function(t){e.loading=!1,e.message=t.response&&t.response.data||t.message||t.toString()})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))},editProfile:function(){this.isDisable=!1,this.isEdit=!0,this.formPosition="top"},saveProfile:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.openErrMsg(),!1;t.isEdit=!1,t.loadingSave=!0,console.log("Image: ",t.userProfile.imgUrl),t.$store.commit("profile/setProfile",t.userProfile),t.$store.dispatch("profile/saveProfile").then((function(){t.loadingSave=!1,t.isDisable=!0,t.formPosition="left"}),(function(e){t.loadingSave=!1,t.message=e.response&&e.response.data||e.message||e.toString()})).catch((function(e){t.loading=!1,t.$message({message:e.message+", please try again.",type:"error"})}))}))},chooseImage:function(e){e.preventDefault(),console.log(e),this.imageData=e.target.files[0],this.uploadImage()},uploadImage:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.image=null,e.loadingImage=!0,i=r["a"].storage().ref("".concat(e.imageData.name)).put(e.imageData),i.on("state_changed",(function(t){e.uploadValue=t.bytesTransferred/t.totalBytes*100}),(function(t){e.loadingImage=!1,console.log(t.message)}),(function(){e.uploadValue=100,i.snapshot.ref.getDownloadURL().then((function(t){e.image=t,e.saveImage(),e.headerStyle="min-height: 600px; background-size: cover; background-position: center top; background-image: url("+e.image+"); ",e.loadingImage=!1}))}));case 4:case"end":return t.stop()}}),t)})))()},addAccount:function(){this.accountDialog=!0},saveImage:function(){var e=this;this.isEdit=!1,this.loadingSave=!0,console.log("Image: ",this.userProfile.imgUrl),this.$store.commit("profile/setNewImg",this.image),this.$store.dispatch("profile/saveProfileImage").then((function(){e.loadingImage=!1,e.isDisable=!0}),(function(t){e.loadingImage=!1,e.message=t.response&&t.response.data||t.message||t.toString()})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))},handleClose:function(){this.accountDialog=!1},openErrMsg:function(){this.$message.error("Please fill all fields!")},cancelEdit:function(e){this.formPosition="left",this.$refs[e].resetFields(),this.loading=!0,this.getProfile(),this.isDisable=!0,this.isEdit=!1}},filters:{statusFilter:function(e){return e?"Active":"Disable"}}},l=s,c=(i("79cc"),i("2877")),u=Object(c["a"])(l,n,o,!1,null,null,null);t["default"]=u.exports},"4eba":function(e,t,i){"use strict";i("d6e4")},"4ed5":function(e,t,i){},"4fee":function(e,t,i){},"53ca":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0");function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}},"55ba":function(e,t,i){"use strict";i("7e37")},"56b8":function(e,t,i){"use strict";i("1428")},"58eb":function(e,t,i){},"58fc":function(e,t,i){"use strict";i("844a")},"59ed":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow container-fluid mt-3 mb-3 pb-2",attrs:{id:"member-level"}},[i("div",{staticClass:"row pt-3 pb-2"},[e._m(0),i("div",{staticClass:"col-6"},[i("div",{staticClass:"row justify-content-end"},[e.isEdit?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close"},on:{click:e.editMode}},[e._v("Cancel")]):e._e(),e.isEdit?i("el-button",{attrs:{type:"success",icon:"el-icon-document-checked",size:"mini"},on:{click:e.saveMemLv}},[e._v("Save")]):e._e(),this.isPress?e._e():i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.memberLevelList.length>0,expression:"memberLevelList.length > 0"}],attrs:{type:"success",icon:"el-icon-edit-outline",size:"mini"},on:{click:e.editMode}},[e._v("Edit")]),e.isAdd?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close"},on:{click:e.addMode}},[e._v("Cancel")]):e._e(),this.isPress?e._e():i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:e.addMode}},[e._v("Add")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.memberLevelList.length>0,expression:"memberLevelList.length > 0"}],attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.multiSelection.length>0,size:"mini"},on:{click:e.cancelDialog}},[e._v("Delete")])],1)]),e.isAdd?i("div",{staticClass:"col-12"},[i("el-form",{ref:"createForm",staticClass:"row justify-content-center",attrs:{model:e.createForm,rules:e.addRules}},[i("el-form-item",{staticClass:"col-6 mb-3",attrs:{prop:"name"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Membership Level ")])]),i("el-input",{attrs:{type:"text",placeholder:"Input Name here",size:"small",maxlength:"50",spellcheck:"false","show-word-limit":""},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1),i("el-form-item",{staticClass:"col-1 mb-0 mt-2 align-self-center"},[i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.submitForm("createForm")}}},[e._v("Add")])],1)],1)],1):e._e()]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"mb-2 member-level-table",staticStyle:{width:"100%"},attrs:{data:e.memberLevelList,"max-height":"580",height:"580","cell-style":{padding:"0",height:"5vh"},stripe:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),i("el-table-column",{attrs:{label:"No.",type:"index",index:e.indexMethod,width:"50"}}),i("el-table-column",{attrs:{label:"Membership Levels",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?i("el-input",{attrs:{type:"text",placeholder:"Input Id here",size:"small",maxlength:"50",spellcheck:"false","show-word-limit":""},on:{input:function(i){return e.handleChangeName(t.$index,t.row.name)}},model:{value:t.row.name,callback:function(i){e.$set(t.row,"name",i)},expression:"scope.row.name"}}):e._e(),e.isEdit?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.name))])]}}])})],1),i("div",{staticClass:"d-flex justify-content-end pr-0"},[i("base-pagination",{ref:"basePagination",staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1),i("el-dialog",{attrs:{title:"Confirm action",visible:e.dialogVisible,width:"27%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("Are you sure you want to delete these items ?")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelDialog}},[e._v("Cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:e.hideMemLv}},[e._v("Confirm")])],1)])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-6"},[i("div",{staticClass:"row justify-content-start"},[i("strong",[e._v("Membership Levels")])])])}],a=(i("4160"),i("caad"),i("c975"),i("a434"),i("b0c0"),i("ac1f"),i("2532"),i("5319"),i("498a"),i("159b"),{name:"member-level-table",watch:{},data:function(){return{isEdit:!1,isAdd:!1,isPress:!1,loading:!0,pagination:{default:1},pageCount:1,isActive:!0,multiSelection:[],errorIndex:[],editIndex:[],createForm:{name:""},dialogVisible:!1,addRules:{name:[{validator:this.validateAddName,trigger:"change"}]}}},props:{},computed:{memberLevelList:function(){return this.setPageCount(),this.$store.state.member_level.memberLevelList}},methods:{validateAddName:function(e,t,i){t?(console.log("validateAddName :>> ",t),t.trim()?i():i(new Error("Name is required!"))):i(new Error("Name is required!"))},resetPage:function(){this.$refs["basePagination"].changePage(1)},getMemLv:function(){var e=this;this.$store.dispatch("member_level/getMemberLevel").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("MemberLevelTable.vue - getMemLv:>> "+t)}))},setPageCount:function(){var e=this.$store.state.member_level.PageSize;this.pageCount=Math.ceil(this.$store.state.member_level.counter/e)},indexMethod:function(e){var t=this.$store.state.member_level.PageSize,i=this.$store.state.member_level.PageIndex;return e+=1,i>1?e+(i-1)*t:e},changePage:function(e){this.$store.commit("member_level/setPageIndex",e),this.loading=!0,this.getMemLv()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.addMemLv()}))},handleChangeName:function(e,t){console.log("handleChangeName :>> ",t),t?t.trim()?this.errorIndex.includes(e)&&(console.log("gỡ lỗi ở handleChangeName khi mà có value"),this.errorIndex.splice(this.errorIndex.indexOf(e),1)):(this.$message({showClose:!0,center:!0,duration:2500,message:"Name is required!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeName khi mà !value.trim()"),this.errorIndex.push(e))):(this.$message({showClose:!0,center:!0,duration:2500,message:"Name is required!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeName khi mà ko có value"),this.errorIndex.push(e))),this.handleChange(e)},handleChange:function(e){console.log("handleChange trigger");var t=this.editIndex;t.includes(e)&&t.splice(t.indexOf(e),1),t.push(e)},addMemLv:function(){var e=this;this.loading=!0,this.$store.commit("member_level/setName",this.createForm.name.replace(/\s +/g," ").trim()),this.$store.dispatch("member_level/addMemLv").then((function(){e.$message({showClose:!0,center:!0,duration:3e3,message:"Add successful!",type:"success"}),e.loading=!1,e.isPress=!e.isPress,e.isAdd=!e.isAdd,e.createForm.name="",e.resetPage(),e.getMemLv()}),(function(t){e.$message({message:"Add failed.",type:"danger"}),console.log("MemberLevelTable.vue - addMemLv:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("ProductCateTable.vue - addMemLv:>> "+t)}))},handleSelectionChange:function(e){console.log("val :>> ",e),this.multiSelection=e},editMode:function(){this.isEdit=!this.isEdit,this.isPress=!this.isPress,this.isEdit||(this.editIndex=[],this.errorIndex=[],this.handleSelectionChange([]),this.getMemLv())},addMode:function(){this.isAdd=!this.isAdd,this.isPress=!this.isPress,this.isAdd||(this.createForm.cateId="",this.createForm.name="",this.handleSelectionChange([]),this.getMemLv())},cancelDialog:function(){this.dialogVisible=!this.dialogVisible,this.dialogVisible||(this.handleSelectionChange([]),this.getMemLv())},hideMemLv:function(){var e=this;this.loading=!this.loading;var t=this.multiSelection;this.$store.commit("member_level/setHideParams",t),this.$store.dispatch("member_level/hideMemLv").then((function(){e.$message({showClose:!0,center:!0,duration:3e3,message:"Delete successful.",type:"warning"}),e.dialogVisible=!e.dialogVisible,e.resetPage(),e.getMemLv()}),(function(t){console.log("Delete FAIL: member_level/hideMemLv"),console.log(t),e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("MemberLevelTable.vue - hideMemLv:>> "+t)}))},saveMemLv:function(){var e=this;if(this.errorIndex.length>0)this.$message({showClose:!0,center:!0,duration:3e3,message:"Products: Please check again the error field(s)!",type:"error"}),console.log("this.errorIndex :>> ",this.errorIndex);else if(this.loading=!0,null!=this.editIndex&&this.editIndex.length>0){var t=[];this.editIndex.forEach((function(i){var n={memberLevelId:e.memberLevelList[i].memberLevelId,name:e.memberLevelList[i].name.replace(/\s +/g," ").trim()};t.push(n)})),this.$store.commit("member_level/setUpdateParams",t),this.$store.dispatch("member_level/saveMemLv").then((function(){e.$message({showClose:!0,center:!0,duration:3e3,message:"Save successful!",type:"success"}),e.editIndex=[],e.errorIndex=[],e.isPress=!e.isPress,e.isEdit=!e.isEdit,e.resetPage(),e.getMemLv()}),(function(t){e.$message({message:"Save failed.",type:"danger"}),console.log("MemberLevelTable.vue - saveMemLv:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("MemberLevelTable.vue - saveMemLv:>> "+t)}))}else this.isPress=!this.isPress,this.isEdit=!this.isEdit,this.getMemLv()}},created:function(){this.getMemLv()},destroyed:function(){}}),r=a,s=(i("dc24"),i("2877")),l=Object(s["a"])(r,n,o,!1,null,null,null);t["a"]=l.exports},"5a34":function(e,t,i){var n=i("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5d54":function(e,t,i){"use strict";i("619d")},"5f27":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid mt--9"},[i("div",{staticClass:"card shadow"},[i("div",{staticClass:"card-header bg-transparent promotion"},[i("el-row",[i("el-col",{staticClass:"mt-2",attrs:{span:8}},[i("h2",{staticClass:"mb-0"},[e._v("Manage Voucher")])]),i("el-col",{staticClass:"float-right mt-1",attrs:{span:2}},[i("el-button",{attrs:{size:"medium",type:"success",icon:"el-icon-plus"},on:{click:e.addPromotion}},[e._v("New Voucher")])],1)],1)],1)]),i("el-row",{staticClass:"mt-3"},[i("voucher-group-table")],1)],1)],1)},o=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow pl-3 pr-3",attrs:{id:"voucher-group-table"}},[i("div",{staticClass:"card-header border-0 pt-3 pb-2 pr-2 mr-1"},[i("div",{staticClass:"row align-items-center"},[i("div",{staticClass:"col-12 pl-1 pr-1"},[i("el-input",{staticClass:"float-right",staticStyle:{width:"30vw"},attrs:{size:"medium",placeholder:"Search by name","prefix-icon":"fa fa-search "},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)])]),i("div",{staticClass:"table-responsive"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"filterTable",staticClass:"voucher-group-table",staticStyle:{width:"100%",color:"#525f7f"},attrs:{data:e.voucherGroupList.data,"header-cell-style":{color:"#696969","font-weight":"600","font-size":"1rem !important","background-color":"#f4f4f4","padding-bottom":"1vh","padding-top":"1.2vh"},"cell-style":{"padding-top":"1.3vh","padding-bottom":"1.3vh","padding-left":"0px","padding-right":"0px","font-size":"1.05rem !important",height:"5.5vh"}}},[i("el-table-column",{staticClass:"col",attrs:{label:"NO",type:"index",index:e.indexMethod,"min-width":40}}),i("el-table-column",{staticClass:"col",attrs:{prop:"voucherName",label:"NAME","column-key":"date","min-width":220},scopedSlots:e._u([{key:"default",fn:function(t){return[i("router-link",{staticClass:"text-body",staticStyle:{"word-break":"break-word"},attrs:{to:{name:"Voucher Group Detail",params:{id:t.row.voucherGroupId}}}},[e._v(" "+e._s(t.row.voucherName)+" ")])]}}])}),i("el-table-column",{attrs:{label:"ACTION NAME","min-width":200},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.action?i("span",{staticClass:"mb-0",staticStyle:{"word-break":"break-word"}},[e._v(" "+e._s(t.row.action.name)+" ")]):e._e(),t.row.gift?i("span",{staticClass:"mb-0",staticStyle:{"word-break":"break-word"}},[e._v(" "+e._s(t.row.gift.name)+" ")]):e._e()]}}])}),i("el-table-column",{attrs:{label:"TOTAL","min-width":100},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"mb-0",staticStyle:{"word-break":"break-word"}},[i("i",{staticClass:"fas fa-tags mr-1"}),e._v(" "+e._s(t.row.quantity)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"redempedQuantity",label:"REDEMPED","min-width":100},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"mb-0",staticStyle:{"word-break":"break-word"}},[i("i",{staticClass:"fas fa-tags mr-1"}),e._v(" "+e._s(t.row.redempedQuantity)+" / "+e._s(t.row.quantity)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"usedQuantity",label:"USED","min-width":100},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"mb-0",staticStyle:{"word-break":"break-word"}},[i("i",{staticClass:"fas fa-tags mr-1"}),e._v(" "+e._s(t.row.usedQuantity)+" / "+e._s(t.row.quantity)+" ")])]}}])}),e._v(" //# Actions "),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{align:"center","min-width":70},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"p-0 m-0 action-button bg-transparent",staticStyle:{outline:"none",border:"0px"},attrs:{disabled:null!=t.row.promotion,icon:"el-icon-delete-solid"},on:{click:function(i){return e.deleteVoucherGroup(t.row)}}})]}}])})],1)],1),i("div",{staticClass:"d-flex justify-content-end align-items-center mr-2 mb-2 mt-2",class:"dark"===e.type?"bg-transparent":""},[i("base-pagination",{staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1)])},r=[],s=(i("ac1f"),i("841c"),i("c1df")),l=i.n(s),c=i("b012"),u={name:"voucher-group-table",props:{type:{type:String},title:String},data:function(){return{voucherGroupParam:"",dialogVouchers:!1,radio:{default:3},pagination:{default:1},search:"",loading:!0,pageCount:1}},computed:{detailId:function(){return this.voucherGroupParam},voucherGroupList:function(){return this.setPageCount(),this.$store.state.voucher.voucherList}},beforeDestroy:function(){this.$store.commit("voucher/setVoucherList",[])},watch:{search:function(){null!==this.search?(this.$store.commit("voucher/setSearchContent",this.search),this.loading=!0,this.getSearch()):this.getVoucherGroupList()}},methods:{openDetail:function(e){var t=e.voucherGroupId,i=e.promotion;null!=i&&this.$store.commit("voucher/setDetailPromoCode",i.promotionCode),this.$store.commit("voucher/setVoucherGroupId",t),void 0!=this.$refs["voucherDetail"]&&this.$refs["voucherDetail"].getDetailVoucher(),this.dialogVouchers=!0},dialogVouchersClose:function(){this.$store.commit("voucher/setDetailPromoCode",""),this.$store.commit("voucher/setVoucherGroupId",""),this.dialogVouchers=!1},deleteVoucherGroup:function(e){var t=this,i=e.voucherGroupId;0==e.promotionTier.length?this.$confirm("Do you want to delete voucher ?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.loading=!0,t.$store.commit("voucher/setVoucherGroupId",i),t.$store.dispatch("voucher/deleteVoucherGroup").then((function(e){t.loading=!1,200==e.status?(t.getVoucherGroupList(),t.$notify({icon:"el-icon-circle-check",title:"Success",message:"Deleting vouchers, please wait",type:"success"})):t.$notify({icon:"el-icon-warning",title:"Error",message:e.data.message,type:"danger"})})).catch((function(e){t.loading=!1,t.$notify({icon:"el-icon-warning",title:"Error",message:e.message,type:"danger"})}))})):this.$confirm("Sorry, this voucher is being used by some promotions.","Warning",{confirmButtonText:"OK",type:"warning"})},changePage:function(e){""!==this.search?(this.$store.commit("voucher/setPageIndex",e),this.loading=!0,this.getSearch()):(this.$store.commit("voucher/setPageIndex",e),this.loading=!0,this.getVoucherGroupList())},setPageCount:function(){var e=this.$store.state.voucher.PageSize;this.pageCount=Math.ceil(this.$store.state.voucher.counter/e)},indexMethod:function(e){var t=this.$store.state.voucher.PageSize,i=this.$store.state.voucher.PageIndex;return e+=1,i>1?e+(i-1)*t:e},getSearch:Object(c["debounce"])((function(){var e=this;this.$store.dispatch("voucher/getVoucherList").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:t.message,type:"danger"})}))}),1e3),getVoucherGroupList:function(){var e=this;this.loading=!0,this.$store.commit("voucher/setActionType",0),this.$store.commit("voucher/setPostActionType",0),this.$store.dispatch("voucher/getVoucherList").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:t.message,type:"danger"})}))}},created:function(){this.getVoucherGroupList()},destroyed:function(){this.$store.commit("voucher/setPageIndex",1),this.$store.commit("voucher/setSearchContent",""),this.$store.commit("voucher/setVoucherType","")},filters:{nameFilter:function(e){return null==e.promotion?"":e.promotion.promotionName},type:function(e){switch(e){case"1":return"Bulk code";case"2":return"Standalone code"}},dateFormat:function(e){if(e)return l()(e).format("DD/MM/YYYY, HH:mm:ss")}}},d=u,m=(i("08ec"),i("2877")),p=Object(m["a"])(d,a,r,!1,null,"49f1c32c",null),h=p.exports,g={data:function(){return{}},created:function(){},components:{VoucherGroupTable:h},methods:{addPromotion:function(){this.$router.push("/campaign/voucher/wizard")}}},f=g,v=(i("f75f"),Object(m["a"])(f,n,o,!1,null,null,null));t["default"]=v.exports},6063:function(e,t,i){"use strict";i("413c")},"60c6":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid mt--9",attrs:{id:"store"}},[i("div",{staticClass:"row mb-3"},[i("div",{staticClass:"col"},[i("div",{staticClass:"card shadow"},[i("div",{staticClass:"card-header bg-transparent"},[i("el-collapse",{staticClass:"pb-0",on:{change:e.expanded}},[i("el-collapse-item",{staticClass:"justify-content-center pb-0",attrs:{name:"1"}},[i("span",{attrs:{slot:"title"},slot:"title"},[e.expand?e._e():i("el-button",{attrs:{icon:"el-icon-plus",type:"success",size:"medium"}},[e._v("Create store ")]),e.expand?i("el-button",{attrs:{icon:"el-icon-close",type:"danger",size:"small"}},[e._v("Cancel ")]):e._e()],1),i("div",{staticClass:"col-12"},[i("el-form",{ref:"createForm",staticClass:"row justify-content-center",attrs:{model:e.createForm,rules:e.addRules}},[i("el-form-item",{staticClass:"col-3 align-self-center",attrs:{prop:"storeCode"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Store Code")])]),i("el-input",{attrs:{type:"text",placeholder:"Input code here",size:"small",spellcheck:"false",maxlength:"20","show-word-limit":""},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.createForm.storeCode,callback:function(t){e.$set(e.createForm,"storeCode",t)},expression:"createForm.storeCode"}})],1),i("el-form-item",{staticClass:"col-3 align-self-center",attrs:{prop:"storeName"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Store Name")])]),i("el-input",{attrs:{type:"text",placeholder:"Input name here",size:"small",spellcheck:"false",maxlength:"50","show-word-limit":""},model:{value:e.createForm.storeName,callback:function(t){e.$set(e.createForm,"storeName",t)},expression:"createForm.storeName"}})],1),i("el-form-item",{staticClass:"col-2 align-self-center",attrs:{prop:"group"}},[i("p",{staticClass:"mb-0 pr-3"},[i("small",[e._v(" Group")])]),i("el-input-number",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"Input group here",size:"small",spellcheck:"false",min:0,max:10,"controls-position":"right"},model:{value:e.createForm.group,callback:function(t){e.$set(e.createForm,"group",t)},expression:"createForm.group"}})],1),i("el-form-item",{staticClass:"col-1 align-self-center pt-4 mt-1"},[e.expand?i("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"success"},on:{click:function(t){return e.submitForm("createForm")}}},[e._v("Add ")]):e._e()],1)],1)],1)])],1)],1)])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("stores-table",{ref:"table",attrs:{title:"Store list"}})],1)])])],1)},o=[],a=(i("ac1f"),i("5319"),i("498a"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow",class:"dark"===e.type?"bg-default":"",attrs:{id:"store-table"}},[i("div",{staticClass:"card-header border-0 pb-2"},[i("div",{staticClass:"row pl-2 pr-2"},[i("div",{staticClass:"col-6 flex-row"},[i("div",{staticClass:"row"},[i("strong",{staticClass:"h2 mb-0"},[e._v(" "+e._s(e.title)+" ")])])]),i("div",{staticClass:"col-6"},[i("div",{staticClass:"row d-flex justify-content-end"},[e.isEdit?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close",disabled:!e.storeList.length>0},on:{click:e.reloadTable}},[e._v(" Cancel ")]):e._e(),e.isEdit?e._e():i("el-button",{attrs:{size:"mini",icon:"el-icon-edit-outline",type:"success",disabled:!e.storeList.length>0},on:{click:function(t){return e.handleEditRow(!0)}}},[e._v(" Edit ")]),i("el-button",{attrs:{size:"mini",icon:"el-icon-document-checked",type:"success",disabled:!e.isEdit},on:{click:e.saveStore}},[e._v("Save")]),i("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger",disabled:!e.multipleSelection.length>0},on:{click:function(t){e.dialogVisible=!0}}},[e._v("Delete")])],1)])])]),i("div",{staticClass:"table-responsive"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"store-table",staticStyle:{width:"100%"},attrs:{data:e.storeList,"row-key":e.getRowKeys,"cell-style":{padding:"0px",height:"5.5vh"},stripe:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{type:"selection",align:"center",width:"50",fixed:""}}),i("el-table-column",{attrs:{prop:"index",label:"No.",width:"50"}}),i("el-table-column",{attrs:{prop:"storeCode",label:"Code",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edited?i("el-input",{attrs:{type:"text",size:"small",maxlength:"20",spellcheck:"false","show-word-limit":""},on:{input:function(i){return e.handleChangeCode(t.$index,t.row.storeCode)}},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:t.row.storeCode,callback:function(i){e.$set(t.row,"storeCode",i)},expression:"scope.row.storeCode"}}):e._e(),t.row.edited?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.storeCode))])]}}])}),i("el-table-column",{attrs:{prop:"storeName",label:"Name",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edited?i("el-input",{attrs:{type:"text",size:"small",maxlength:"50",spellcheck:"false","show-word-limit":""},on:{input:function(i){return e.handleChangeName(t.$index,t.row.storeName)}},model:{value:t.row.storeName,callback:function(i){e.$set(t.row,"storeName",i)},expression:"scope.row.storeName"}}):e._e(),t.row.edited?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.storeName))])]}}])}),i("el-table-column",{attrs:{prop:"group",label:"Group",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edited?i("el-input-number",{staticStyle:{width:"100%"},attrs:{type:"number",spellcheck:"false",size:"small",min:0,max:10,"controls-position":"right"},on:{change:function(i){return e.handleChange(t.$index)}},model:{value:t.row.group,callback:function(i){e.$set(t.row,"group",i)},expression:"scope.row.group"}}):e._e(),t.row.edited?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.group))])]}}])}),i("el-table-column",{attrs:{prop:"insDate",label:"Created date"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateFormat")(t.row.insDate)))]}}])}),i("el-table-column",{attrs:{prop:"updDate",label:"Updated date"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateFormat")(t.row.updDate)))]}}])})],1)],1),i("div",{staticClass:"d-flex justify-content-end pr-3 pt-1 pb-2"},[i("base-pagination",{ref:"basePagination",staticClass:"mb-0",attrs:{"page-count":e.pageCount,value:e.tableIndex},on:{input:e.changePage}})],1),i("el-dialog",{attrs:{title:"Please confirm action",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("Are you sure you want to delete these items ?")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:e.hideStore}},[e._v("Confrim")])],1)])],1)}),r=[],s=(i("4160"),i("caad"),i("c975"),i("a434"),i("d3b7"),i("25f0"),i("2532"),i("159b"),i("b85c")),l=i("c1df"),c=i.n(l),u={name:"stores-table",props:{type:{type:String},title:String},data:function(){return{getRowKeys:function(e){return e.id},pagination:{default:1},loading:!0,isEdit:!1,editIndex:[],errorIndex:[],multipleSelection:[],pageCount:10,dialogVisible:!1}},computed:{storeList:function(){return this.setPageCount(),this.$store.state.stores.storeList},tableIndex:function(){return this.$store.state.stores.PageIndex}},methods:{showMessage:function(e,t){this.$message({showClose:!0,center:!0,duration:2500,message:e,type:t})},pushError:function(e){this.errorIndex.includes(e)||this.errorIndex.push(e)},popError:function(e){this.errorIndex.includes(e)&&this.errorIndex.splice(this.errorIndex.indexOf(e),1)},handleChangeCode:function(e,t){var i=this;if(console.log("handleChangeCode :>> ",t),t){for(var n=!1,o=0;o<t.length;o++)t.charCodeAt(o)>127&&(n=!0);if(!n)return this.popError(e),this.$store.commit("stores/setStoreCode",t),this.$store.commit("stores/setStoreId",this.storeList[e].storeId),this.$store.dispatch("stores/checkDuplicate").then((function(t){!0===t.data&&(i.showMessage("Duplicate Code!","error"),i.pushError(e))}));this.showMessage("Accept no Unicode!","error")}else this.showMessage("Code is required!","error"),this.pushError(e);this.handleChange(e)},handleChangeName:function(e,t){t&&t.trim()?this.popError(e):(this.showMessage("Name is required!","error"),this.pushError(e)),this.handleChange(e)},handleChange:function(e){this.editIndex.includes(e)?this.editIndex.splice(this.editIndex.indexOf(e),1,e):this.editIndex.push(e)},changePage:function(e){var t=this;this.loading=!0,this.$store.commit("stores/setPageIndex",e),this.$store.dispatch("stores/getStoresList").then((function(){t.loading=!1,t.isEdit&&t.handleEditRow(!0)}),(function(e){t.loading=!1,t.message=e.response&&e.response.data||e.message||e.toString()})).catch((function(e){t.loading=!1,t.$message({message:e.message+", please try again.",type:"error"})}))},setPageCount:function(){var e=this.$store.state.stores.PageSize;this.pageCount=Math.ceil(this.$store.state.stores.counter/e)},handleEditRow:function(e){var t=this.storeList;null!=t&&t.length>0&&(t.forEach((function(t){t.edited=e})),this.isEdit=e)},saveStore:function(){var e=this;if(console.log(this.errorIndex),this.errorIndex.length>0)this.$message.error("Please fill all fields"),console.log("Save FAIL: stores/saveStore: Field is not validated");else if(this.loading=!0,null!=this.editIndex&&this.editIndex.length>0){var t=[];this.editIndex.forEach((function(i){var n={brandId:e.storeList[i].brandId,storeCode:e.storeList[i].storeCode,storeName:e.storeList[i].storeName.replace(/\s+/g," ").trim(),storeId:e.storeList[i].storeId,group:e.storeList[i].group};t.push(n)})),this.$store.commit("stores/setUpdateParams",t),this.$store.dispatch("stores/saveStore").then((function(){e.$message({message:"Save successful.",type:"success"}),console.log("Save SUCCESS: stores/saveStore"),e.reloadTable()}),(function(e){console.log("Save FAIL: stores/saveStore"),console.log(e)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))}else this.reloadTable()},hideStore:function(){var e=this;this.dialogVisible=!1,this.loading=!0;var t=this.multipleSelection;this.$store.commit("stores/setHideParams",t),this.$store.dispatch("stores/hideStore").then((function(){e.reloadTable()}),(function(t){console.log("Delete FAIL: stores/hideStore"),console.log(t),e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))},handleSelectionChange:function(e){this.multipleSelection=e},reloadTable:function(){var e=this;this.loading=!0,this.handleSelectionChange([]),this.handleEditRow(!1),this.$store.dispatch("stores/countStores").then((function(){e.$store.dispatch("stores/getStoresList").then((function(){console.log("StoresTable: Reload SUCCESS"),e.loading=!1}),(function(t){console.log("StoresTable: Reload FAIL: getStoresList"),console.log(t),e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))}),(function(t){console.log("StoresTable: Reload FAIL: countStores"),console.log(t),e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))}},created:function(){var e=this;this.$store.dispatch("stores/countStores").catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})})),this.$store.dispatch("stores/getStoresList").then((function(){e.loading=!1}),(function(t){e.loading=!1,e.message=t.response&&t.response.data||t.message||t.toString()})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))},filters:{dateFormat:function(e){if(e)return c()(e).format("HH:mm - DD/MM/YYYY")}},watch:{editIndex:function(){if(this.editIndex){var e,t=Object(s["a"])(this.editIndex);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=this.storeList[i];n.storeCode&&n.storeName.trim()||(!n.storeCode&&n.storeName.trim()||n.storeCode&&!n.storeName.trim())&&this.pushError(i)}}catch(o){t.e(o)}finally{t.f()}}}}},d=u,m=(i("1c7e2"),i("2877")),p=Object(m["a"])(d,a,r,!1,null,null,null),h=p.exports,g={created:function(){},computed:{},data:function(){return{expand:!1,isDuplicate:!1,createForm:{storeName:"",storeCode:"",group:0},addRules:{storeCode:[{validator:this.validateAddCode,trigger:"change"}],storeName:[{validator:this.validateAddName,trigger:"change"}],group:[{required:!0,message:"Group is required!"}]}}},components:{StoresTable:h},methods:{validateAddName:function(e,t,i){t?(console.log("validateAddName :>> ",t),t.trim()||(console.log("validateAddName: ở đây đc gọi khi !value.trim()"),i(new Error("Name is required!"))),console.log("validateAddName: ở đây đc gọi sau khi nhập value đúng"),i()):(console.log("validateAddName: ở đây đc gọi khi !value"),i(new Error("Name is required!")))},validateAddCode:function(e,t,i){return t?(this.$store.commit("stores/setStoreCode",t),this.$store.dispatch("stores/checkDuplicate").then((function(e){if(e.data)return console.log("validateAddCode: ở đây đc gọi khi có Duplicate: "+t),i(new Error("Duplicated code!"));for(var n=0;n<t.length;n++)if(t.charCodeAt(n)>127)return i(new Error("Accept no Unicode!"))}))):(console.log("validateAddCode: ở đây đc gọi khi !value"),i(new Error("Code is required!")))},expanded:function(){console.log("expanded đc gọi"),this.expand=!this.expand,this.expand||(console.log("!expand đc gọi"),this.$refs.createForm.resetFields(),this.createForm.group=0)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.addStore()}))},addStore:function(){var e=this;this.$refs.table.loading=!0,this.$store.commit("stores/setStoreCode",this.createForm.storeCode),this.$store.commit("stores/setStoreName",this.createForm.storeName.replace(/\s+/g," ").trim()),this.$store.commit("stores/setGroup",this.createForm.group),this.$store.dispatch("stores/addStore").then((function(){e.$refs.createForm.resetFields(),e.$refs.table.loading=!1}),(function(e){console.log(e)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))}}},f=g,v=(i("d1fe"),Object(m["a"])(f,n,o,!1,null,null,null));t["default"]=v.exports},"60f6":function(e,t,i){"use strict";i("7d9c")},"619d":function(e,t,i){},"61d0":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 mb-2 pt-1",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid pt-2 pb-2"},[i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-form",{ref:"gameConfigForm",attrs:{model:e.gameConfig,"label-position":"left",rules:e.gameConfigRules}},[i("h3",[e._v("Game Campaign")]),i("el-divider",{staticClass:"custom-divider"}),i("el-row",[i("el-col",{staticClass:"ml-2",attrs:{span:4}},[i("el-form-item",{attrs:{label:"Has Code? "}},[i("el-switch",{attrs:{"active-text":"Yes","inactive-text":"No"},model:{value:e.gameConfig.hasCode,callback:function(t){e.$set(e.gameConfig,"hasCode",t)},expression:"gameConfig.hasCode"}},[e._v("> ")])],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"name",label:"Name"}},[i("el-col",{attrs:{span:18}},[i("el-input",{attrs:{maxlength:50},model:{value:e.gameConfig.name,callback:function(t){e.$set(e.gameConfig,"name",t)},expression:"gameConfig.name"}})],1)],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"Time",prop:"startGame"}},[i("el-col",{attrs:{span:8}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{prop:"startGame",type:"date",placeholder:"Pick a start date","picker-options":e.pickerOptionsstartGame},on:{change:e.changeStartGame},model:{value:e.gameConfig.startGame,callback:function(t){e.$set(e.gameConfig,"startGame",t)},expression:"gameConfig.startGame"}})],1),i("el-col",{staticClass:"line",attrs:{offset:1,span:1}},[e._v("-")]),i("el-col",{attrs:{span:8}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",prop:"endGame",placeholder:"Pick a end date","picker-options":e.pickerOptionEndGame,disabled:!e.gameConfig.startGame||e.gameConfig.isUnlimited},model:{value:e.gameConfig.endGame,callback:function(t){e.$set(e.gameConfig,"endGame",t)},expression:"gameConfig.endGame"}})],1)],1)],1),e.gameConfig.hasCode?i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{prop:"expiredDuration",label:"Game code duration"}},[i("el-row",[i("el-col",{attrs:{span:9}},[i("el-input-number",{attrs:{min:1},model:{value:e.gameConfig.expiredDuration,callback:function(t){e.$set(e.gameConfig,"expiredDuration",t)},expression:"gameConfig.expiredDuration"}})],1),i("el-col",{attrs:{span:3}},[e._v(" minutes ")])],1)],1)],1):e._e()],1),i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"gameMasterId",label:"Game"}},[i("el-select",{staticStyle:{width:"15vw"},style:e.gameConfig.gameStyle,attrs:{filterable:!0,placeholder:"Select game"},on:{change:e.changeGameMaster},model:{value:e.gameConfig.gameMasterId,callback:function(t){e.$set(e.gameConfig,"gameMasterId",t)},expression:"gameConfig.gameMasterId"}},e._l(e.gameMasterList,(function(t,n){return i("el-option",{key:n,attrs:{label:e._f("nameFilter")(t.name),value:t.id}})})),1)],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"Promotion",prop:"promotionId"}},[i("el-select",{staticStyle:{width:"18vw"},style:e.gameConfig.style,attrs:{"default-first-option":!0,filterable:!0,placeholder:"Select promotion"},on:{change:e.changePromo},model:{value:e.gameConfig.promotionId,callback:function(t){e.$set(e.gameConfig,"promotionId",t)},expression:"gameConfig.promotionId"}},e._l(e.promotion,(function(t,n){return i("el-option",{key:n,attrs:{label:e._f("nameFilter")(t.promotionName),value:t.promotionId}})})),1)],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"storeIdList",label:"Store"}},[i("el-select",{attrs:{placeholder:"Select",multiple:"","collapse-tags":""},model:{value:e.gameConfig.storeIdList,callback:function(t){e.$set(e.gameConfig,"storeIdList",t)},expression:"gameConfig.storeIdList"}},e._l(e.stores,(function(e,t){return i("el-option",{key:t,attrs:{label:e.storeName,value:e.storeId}})})),1)],1)],1)],1),i("el-row",{staticClass:"ml-2"},[i("el-col",{staticClass:"mt-2",attrs:{span:4}},[i("label",[i("b",[e._v("Minimum item(s):")]),e._v(" "+e._s(e.minItem))])]),i("el-col",{staticClass:"mt-2",attrs:{span:4}},[i("label",[i("b",[e._v("Maximum item(s):")]),e._v(" "+e._s(e.maxItem))])])],1)],1),i("el-divider",{staticClass:"custom-divider"}),i("el-row",{attrs:{gutter:20}},[e._l(e.gameConfig.gameItems,(function(t,n){return i("el-col",{key:n,staticClass:"mb-3",attrs:{span:8}},[i("el-card",{style:t.style},[i("el-form",{ref:"gameItemForm-"+n,refInFor:!0,attrs:{rules:e.gameItemRules,model:t,"label-position":"left","label-width":"100"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("h4",[e._v("Game Item "+e._s(n+1))])]),i("el-col",{attrs:{span:12}},[i("el-button",{staticClass:"float-right text-dark",staticStyle:{outline:"none",border:"0px"},attrs:{size:"mini",icon:"el-icon-close",circle:"",type:"text",plain:""},on:{click:function(t){return e.removeItem(n)}}})],1)],1),i("el-row",[i("el-form-item",{attrs:{label:"Promotion Tier",prop:"promotionTierId"}},[e.isAction?i("el-select",{attrs:{"default-first-option":!0,filterable:!0,placeholder:"Select promotion tier"},model:{value:t.promotionTierId,callback:function(i){e.$set(t,"promotionTierId",i)},expression:"item.promotionTierId"}},e._l(e.tiers,(function(e,t){return i("el-option",{key:t,attrs:{label:e.action.name,value:e.promotionTierId}})})),1):e._e(),e.isAction?e._e():i("el-select",{attrs:{"default-first-option":!0,filterable:!0,placeholder:"Select promotion tier"},model:{value:t.promotionTierId,callback:function(i){e.$set(t,"promotionTierId",i)},expression:"item.promotionTierId"}},e._l(e.tiers,(function(e,t){return i("el-option",{key:t,attrs:{label:e.gift.name,value:e.promotionTierId}})})),1)],1)],1),i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"Display Text",prop:"displayText"}},[i("el-col",{attrs:{span:14}},[i("el-input",{attrs:{max:30},model:{value:t.displayText,callback:function(i){e.$set(t,"displayText",i)},expression:"item.displayText"}})],1)],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"textColor"}},[i("el-color-picker",{ref:"textColorPicker",refInFor:!0,attrs:{predefine:e.predefineColors},on:{"active-change":function(t){return e.activeChangeTextColor(n)}},model:{value:t.textColor,callback:function(i){e.$set(t,"textColor",i)},expression:"item.textColor"}})],1)],1)],1),i("el-row",[i("el-form-item",{attrs:{label:"Priority",prop:"priority"}},[i("el-col",{attrs:{span:20}},[i("el-slider",{attrs:{min:1,max:1e3,marks:e.marks},model:{value:t.priority,callback:function(i){e.$set(t,"priority",i)},expression:"item.priority"}})],1)],1)],1),i("el-row",{staticClass:"ml-2 mt-3"},[i("el-form-item",{attrs:{label:"Item Color",prop:"itemColor"}},[i("el-color-picker",{ref:"itemColorPicker",refInFor:!0,attrs:{predefine:e.predefineColors},on:{"active-change":function(t){return e.activeChangeItemColor(n)}},model:{value:t.itemColor,callback:function(i){e.$set(t,"itemColor",i)},expression:"item.itemColor"}})],1)],1)],1)],1)],1)})),i("el-col",{staticClass:"p-2",attrs:{span:8}},[i("center",[i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:e.addItem}},[e._v("New Item")])],1)],1)],2),i("el-divider",{staticClass:"custom-divider mt-4"}),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:24}},[i("el-button",{staticClass:"float-right",attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:e.updateConfig}},[e._v("Update Configuration")])],1)],1)],1)],1)],1)},o=[],a=(i("a4d3"),i("e01a"),i("4de4"),i("4160"),i("a434"),i("b0c0"),i("159b"),i("96cf"),i("1da1")),r=i("2b0e"),s=i("4eb5"),l=i.n(s);r["default"].use(l.a);var c=40,u={name:"update-game-campaign",components:{},data:function(){return{loading:!1,minItem:0,maxItem:100,tiers:[],emptyGuid:"00000000-0000-0000-0000-000000000000",gameConfigRules:{name:[{required:!0,trigger:["blur","change"],message:"Please input name"}],startGame:[{required:!0,trigger:["blur","change"],message:"Please choose start time"}],endGame:[{required:!0,trigger:["blur","change"],message:"Please choose end time"}],gameMasterId:[{required:!0,trigger:["blur","change"],message:"Please select Game"}],promotionId:[{required:!0,trigger:["blur","change"],message:"Please select Promotion"}],storeIdList:[{required:!0,trigger:["change"],message:"Store is required"}],expiredDuration:[{required:!0,trigger:["change"],message:"Store is required"}]},pickerOptionsstartGame:{disabledDate:function(e){return e.getTime()<=new Date((new Date).setDate((new Date).getDate()-1)).getTime()}},marks:{1:"Rarely",250:"Sometimes",500:"Often",750:"Usually",1e3:"Always"},predefineColors:["#000000","#ffffff","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"],colorIndex:2,pickerOptionEndGame:{disabledDate:this.handleDueDate},gameItemRules:{displayText:[{required:!0,trigger:["change"],message:"Please enter display text"}],promotionTierId:[{required:!0,trigger:["blur","change"],message:"Please select Promotion tier"}],priority:[{required:!0,trigger:["blur","change"],message:"Please select Priority"}]},isAction:!0,priorityLevel:[1,2,3,4,5]}},computed:{gameMasterList:function(){return this.$store.state.game_campaign.gameMaster},promotion:function(){return this.$store.state.game_campaign.gamePromo},gameConfigId:function(){return this.$router.currentRoute.params.id},gameConfig:function(){return console.log("info ",this.$store.state.game_campaign.gameConfigInfo),this.$store.state.game_campaign.gameConfigInfo},stores:function(){return this.$store.state.game_campaign.stores}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getGameMaster();case 2:return t.next=4,e.getPromoForGameCampaign();case 4:return e.getStoreForGameCampaign(),t.next=7,e.getGameCampaign();case 7:e.getTierList(),e.checkAction();case 9:case"end":return t.stop()}}),t)})))()},filters:{priorityFilter:function(e){switch(e){case 1:return"Rarely";case 2:return"Sometimes";case 3:return"Often";case 4:return"Usually";case 5:return"Always"}},nameFilter:function(e){return e.length>c?e.substring(0,c)+"...":e}},methods:{checkAction:function(){var e=this;this.tiers.forEach((function(t){t.action?e.isAction=!0:e.isAction=!1})),this.isAction?this.tiers.push({promotionTierId:this.emptyGuid,action:{name:"Good Luck"}}):this.tiers.push({promotionTierId:this.emptyGuid,gift:{name:"Good Luck"}})},getStoreForGameCampaign:function(){var e=this;this.loading=!0,this.$store.dispatch("game_campaign/getStoresList").then((function(t){return 200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Stores. Please try again",type:"danger"}),e.loading=!1,t.data})).catch((function(t){e.loading=!1,console.log(t.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Stores. Please try again",type:"danger"})}))},getTierList:function(){var e=this,t="";this.promotion.forEach((function(i){i.promotionId==e.gameConfig.promotionId&&(t=i.promotionTier)})),this.tiers=t},getGameCampaign:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("game_campaign/setGameCampaignId",e.gameConfigId),t.next=3,e.$store.dispatch("game_campaign/getGameCampaignInfo").then((function(t){if(200!=t.status)console.log(t.data.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting info. Please try again",type:"danger"});else{var i=e.gameConfig.gameMasterId,n=e.gameMasterList.filter((function(e){return e.id==i}));n.length>0?(e.maxItem=n[0].maxItem,e.minItem=n[0].minItem):e.$notify({icon:"el-icon-warning",title:"Error",message:"Game is not exist. Please select again",type:"warning"})}})).catch((function(t){console.log(t.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting info. Please try again",type:"danger"})}));case 3:case"end":return t.stop()}}),t)})))()},changeQuantity:function(e){if(this.gameConfig.gameItems.length>e){var t=e-1,i=this.gameConfig.gameItems.length-e;this.gameConfig.gameItems.splice(t,i)}},changeEndGame:function(e){console.log(e),null===e&&(console.log("hehe"),this.gameConfig.endGame=this.gameConfig.startGame)},changePromo:function(e){var t=this,i="";this.promotion.forEach((function(t){t.promotionId==e&&(i=t.promotionTier)})),this.gameConfig.style="",this.gameConfig.gameItems=[],this.tiers=[],i.length>0&&(this.tiers=i,i.forEach((function(e){var i=t.colorIndex,n="";e.action?(t.isAction=!0,n=e.action.name):(t.isAction=!1,n=e.gift.name);var o={promotionTierId:e.promotionTierId,priority:1,displayText:"",description:"",style:"",itemColor:t.predefineColors[i],textColor:"#FFFFFF",name:n,insDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"}),updDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"})};t.gameConfig.gameItems.push(o),i<t.predefineColors.length-1?t.colorIndex++:t.colorIndex=2})),this.isAction?this.tiers.push({promotionTierId:this.emptyGuid,action:{name:"Good Luck"}}):this.tiers.push({promotionTierId:this.emptyGuid,gift:{name:"Good Luck"}}))},checkExistPromotion:function(e){var t=!0,i=this.promotion.filter((function(t){return t.promotionId==e})).length>0;return i||(this.$notify({icon:"el-icon-warning",title:"Error",message:"Promotion is not exist",type:"warning"}),t=!1),t},updateConfig:function(){var e=this,t=this.gameConfig.gameItems,i=t.length;if(console.log("update >>>>>>",this.gameConfig),i<this.minItem||i<this.gameConfig.quantity)this.$notify({icon:"el-icon-warning",title:"Error",message:"Not enough Item for Game",type:"warning"});else{var n=!0;if(""===this.gameConfig.style)if(console.log(this.gameConfig.gameStyle),void 0===this.gameConfig.gameStyle){t.forEach((function(e){void 0!==e.style&&""!==e.style&&(n=!1)})),n||this.$notify({icon:"el-icon-warning",title:"Error",message:"Promotion is not exist",type:"warning"}),this.$refs["gameConfigForm"].validate((function(e){n&&(n=e)}));for(var o=0;o<this.gameConfig.gameItems.length;o++){var a="gameItemForm-"+o,r=this.$refs[a][0];r.validate((function(e){console.log("valid of form "+e),n&&(n=e)}))}n?(this.loading=!0,this.$store.commit("game_campaign/setUpdateGameCampaign",this.gameConfig),this.$store.dispatch("game_campaign/updateGameCampaign").then((function(t){e.loading=!1,200!=t.status?(console.log(t.data.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when Update. Please try again",type:"danger"})):(e.$notify({icon:"el-icon-circle-check",title:"Success",message:"Update successfully",type:"success"}),e.$router.push("/game-campaign").catch((function(){})))})).catch((function(t){e.loading=!1,console.log(t.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when Update. Please try again",type:"danger"})}))):window.scrollTo(0,0)}else this.$notify({icon:"el-icon-warning",title:"Error",message:"Game is not exist",type:"warning"});else this.$notify({icon:"el-icon-warning",title:"Error",message:"Promotion is not exist",type:"warning"})}},activeChangeTextColor:function(e){var t=this.$refs.textColorPicker[e].color.value;this.gameConfig.gameItems[e].textColor=t},activeChangeItemColor:function(e){var t=this.$refs.itemColorPicker[e].color.value;this.gameConfig.gameItems[e].itemColor=t},handleDueDate:function(e){var t=new Date(this.gameConfig.startGame);return!(e.getTime()>t.getTime())},changeStartGame:function(){""!=this.gameConfig.endGame?this.gameConfig.endGame<=this.gameConfig.startGame&&(this.gameConfig.endGame=new Date(this.gameConfig.startGame+864e5)):this.gameConfig.endGame=new Date(this.gameConfig.startGame.getTime()+864e5)},removeItem:function(e){this.gameConfig.gameItems.splice(e,1),this.colorIndex--},addItem:function(){if(this.gameConfig.gameItems.length<this.maxItem){var e={promotionId:"",priority:1,displayText:"",description:"",itemColor:this.predefineColors[this.colorIndex],textColor:"#FFFFFF",insDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"}),updDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"})};if(this.promotion.length>0){var t=this.promotion[0];e.promotionId=t.promotionId,e.description=t.description}this.gameConfig.gameItems.push(e),this.colorIndex<this.predefineColors.length-1?this.colorIndex++:this.colorIndex=2,this.$store.commit("game_campaign/setGameCampaignInfo",this.gameConfig)}else this.$notify({icon:"el-icon-warning",title:"Error",message:"Enough quantity of item",type:"warning"})},getPromoForGameCampaign:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("game_campaign/getPromoForGameCampaign").then((function(t){200!=t.status&&(console.log(t.data.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Promotion. Please try again",type:"danger"})),e.loading=!1})).catch((function(t){e.loading=!1,console.log(t.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Promotion. Please try again",type:"danger"})}));case 3:case"end":return t.stop()}}),t)})))()},changeGameMaster:function(e){this.gameConfig.gameStyle="";var t=this.gameMasterList.filter((function(t){return t.id==e}))[0];this.minItem=t.minItem,this.maxItem=t.maxItem,this.setupGameCampaignQuantity()},setupGameCampaignQuantity:function(){this.loading=!0,this.gameConfig.quantity<this.minItem?this.gameConfig.quantity=this.minItem:this.gameConfig.quantity>this.maxItem&&(this.gameConfig.quantity=this.maxItem),this.loading=!1},getGameMaster:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("game_campaign/getGameMasterList").then((function(t){200!=t.status&&(console.log(t.data.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Game Master. Please try again",type:"danger"})),e.loading=!1})).catch((function(t){e.loading=!1,console.log(t.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Game Master. Please try again",type:"danger"})}));case 3:case"end":return t.stop()}}),t)})))()}}},d=u,m=(i("01f2"),i("2877")),p=Object(m["a"])(d,n,o,!1,null,null,null);t["default"]=p.exports},6216:function(e,t,i){},6475:function(e,t,i){},"66b7":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row justify-content-center"},[i("div",{staticClass:"col-lg-12 col-md-7"},[i("div",{staticClass:"card bg-secondary shadow border-0"},[""!=e.promotionDetail.imgUrl?i("base-header",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingImage,expression:"loadingImage"}],class:e.headerClass,style:e.headerStyle},[i("span",{staticClass:"mask opacity-2"})]):e._e(),i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row justify-content-md-center"},[i("div",{staticClass:"col-xl-8 order-xl-1"},[i("el-form",{ref:"customerProfile",attrs:{model:e.customerProfile,rules:e.rules}},[i("card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{shadow:"",type:"secondary"}},[[i("h3",{staticClass:"heading-small mb-1"},[i("h1",[e._v(e._s(e.promotionDetail.promotionName))])]),i("h4",[e._v("Mô tả:")]),i("el-row",[i("el-col",{attrs:{span:24}},[i("pre",[e._v(e._s(e.promotionDetail.description))])])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmailSent,expression:"!isEmailSent"}]},[i("h6",[i("span",{staticStyle:{color:"red"}},[e._v("(*)")]),e._v(" bắt buộc")]),i("div",{staticClass:"pl-lg-4"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-10"},[i("el-form-item",{attrs:{label:"Họ và Tên",prop:"fullName"}},[i("el-input",{model:{value:e.customerProfile.fullName,callback:function(t){e.$set(e.customerProfile,"fullName",t)},expression:"customerProfile.fullName"}})],1)],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-10"},[i("el-form-item",{attrs:{label:"Giới tính",prop:"gender"}},[i("el-radio-group",{model:{value:e.customerProfile.gender,callback:function(t){e.$set(e.customerProfile,"gender",t)},expression:"customerProfile.gender"}},[i("el-radio",{attrs:{label:"Male"}},[e._v("Nam")]),e._v(" "),i("br"),i("el-radio",{attrs:{label:"Female"}},[e._v("Nữ")]),i("br")],1)],1)],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-10"},[i("el-form-item",{attrs:{label:"Số điện thoại",prop:"phoneNumber"}},[i("el-input",{attrs:{type:"text","input-classes":"form-control-alternative"},model:{value:e.customerProfile.phoneNumber,callback:function(t){e.$set(e.customerProfile,"phoneNumber",t)},expression:"customerProfile.phoneNumber"}})],1)],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-10"},[i("el-form-item",{attrs:{label:"Email",prop:"email"}},[i("el-input",{model:{value:e.customerProfile.email,callback:function(t){e.$set(e.customerProfile,"email",t)},expression:"customerProfile.email"}})],1)],1)])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmailSent,expression:"isEmailSent"}],staticClass:"mt-3 pl-lg-4"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isAllDistributed,expression:"!isAllDistributed"}]},[i("h3",[e._v(" Chúng tôi đã gửi voucher tới email của bạn "),i("a",{attrs:{href:"https://mail.google.com/",target:"_blank"}},[e._v(" "+e._s(e.customerProfile.email))]),e._v(". Hi vọng bạn sẽ tận hưởng chương trình này. ")]),i("h4",{staticClass:"float-right mr-4"},[e._v("Cảm ơn!")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isAllDistributed,expression:"isAllDistributed"}]},[i("h3",[e._v(" Xin lỗi, Voucher đã được phát hết. Xin bạn hãy đợi những sự kiện kế tiếp ")])])])]],2)],1),i("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.isEmailSent,expression:"!isEmailSent"}]},[i("el-col",{staticClass:"mt-3 mb-3",attrs:{span:3,offset:10}},[i("el-button",{attrs:{icon:"el-icon-message",type:"primary"},on:{click:function(t){return e.saveAndSendEmail("customerProfile")}}},[e._v("Nhận qua Email")])],1)],1)],1)])])],1)])])},o=[],a=(i("ac1f"),i("466d"),i("96cf"),i("1da1")),r={name:"customer-form",data:function(){var e=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,i,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i?i.match("^\\d{10}$")?n():n(new Error("This phone number is not valid")):n(new Error("Please input your Phone number"));case 1:case"end":return e.stop()}}),e)})));return function(t,i,n){return e.apply(this,arguments)}}();return{customerProfile:{},isEmailSent:!1,isOutSession:!1,loading:!0,isAllDistributed:!1,loadingImage:!0,headerClass:"header d-flex center img-fluid mt-3",rules:{email:[{required:!0,message:"Please input your email",trigger:["blur","change"]},{type:"email",message:"Please input correct email format",trigger:["blur"]}],fullName:[{required:!0,message:"Please input your full name",trigger:["blur","change"]}],gender:[{required:!0,message:"Please input gender",trigger:["blur","change"]}],phoneNumber:[{required:!0,message:"Please input phone number",trigger:["blur","change"]},{validator:e,trigger:["blur","change"]}]},headerStyle:""}},methods:{checkSessionTimeout:function(){this.$store.dispatch("customer/isExpiredUrl")},getPromotionDetail:function(){var e=this;this.$store.dispatch("promotion_detail/getPromotionInfo").then((function(){e.headerStyle="min-height: 40vh; width:65vw; background-size: cover; margin-right:0; background-position: center top; background-image: url("+e.promotionDetail.imgUrl+"); ",e.loadingImage=!1,e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))},saveAndSendEmail:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.$refs[e].validate((function(e){if(!e)return t.$message.error("Please input required fields"),!1;t.loading=!0,t.$store.commit("customer/setCustomerForm",t.customerProfile),t.$store.dispatch("customer/saveCustomer").then((function(e){200!=e&&(t.isAllDistributed=!t.isAllDistributed),t.loading=!1,t.isEmailSent=!t.isEmailSent}))}));case 1:case"end":return i.stop()}}),i)})))()}},created:function(){var e=this.$route.params.id,t=this.$route.params.channelCode,i=this.$route.query.tierId,n=this.$route.query.sst;n?(this.$store.commit("customer/setSst",n),this.checkSessionTimeout(),this.$store.commit("promotion_detail/setPromotionId",e),this.$store.commit("customer/setPromotionId",e),this.$store.commit("customer/setTierId",i),this.$store.commit("customer/setChannelCode",t),this.getPromotionDetail()):this.$router.push("/403")},computed:{promotionDetail:function(){return this.$store.state.promotion_detail.promotionDetail}}},s=r,l=(i("a0bd"),i("2877")),c=Object(l["a"])(s,n,o,!1,null,null,null);t["default"]=c.exports},"6ac3":function(e,t,i){"use strict";i("6216")},7233:function(e,t,i){"use strict";i("cbbc")},7277:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 pt-8",attrs:{type:"gradient-success"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xl-3 col-lg-6"},[i("a",{attrs:{href:"#"}},[i("stats-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb-4 mb-xl-0",attrs:{title:"Total promotion"}},[i("template",{staticClass:"mt-0 mb-0",slot:"footer"},[i("p",{staticClass:"mt-0 mb-0",staticStyle:{"font-size":"2.5vw",color:"black"}},[e._v(" "+e._s(e.promotionByStatus.totalPromotion)+" ")])])],2)],1)]),i("div",{staticClass:"col-xl-3 col-lg-6"},[i("a",{attrs:{href:"#"}},[i("stats-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb-4 mb-xl-0",staticStyle:{background:"rgb(192, 255, 184)"},attrs:{title:"Running promotion ",type:"gradient-red"}},[i("template",{staticClass:"mt-0 mb-0",slot:"footer"},[i("p",{staticClass:"mt-0 mb-0",staticStyle:{"font-size":"2.5vw",color:"black"}},[e._v(" "+e._s(e.promotionByStatus.publishPromotion)+" ")])])],2)],1)]),i("div",{staticClass:"col-xl-3 col-lg-6"},[i("a",{attrs:{href:"#"}},[i("stats-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb-4 mb-xl-0",staticStyle:{background:"rgb(255, 171, 171)"},attrs:{title:"Expired promotion",type:"gradient-green"}},[i("template",{staticClass:"mt-0 mb-0",slot:"footer"},[i("p",{staticClass:"mt-0 mb-0",staticStyle:{"font-size":"2.5vw",color:"black"}},[e._v(" "+e._s(e.promotionByStatus.expiredPromotion)+" ")])])],2)],1)]),i("div",{staticClass:"col-xl-3 col-lg-6"},[i("a",{attrs:{href:"#"}},[i("stats-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb-4 mb-xl-0",staticStyle:{background:"rgb(230, 225, 215)"},attrs:{title:"Draft promotion",type:"gradient-info"}},[i("template",{staticClass:"mt-0 mb-0",slot:"footer"},[i("p",{staticClass:"mt-0 mb-0",staticStyle:{"font-size":"2.5vw",color:"black"}},[e._v(" "+e._s(e.promotionByStatus.draftPromotion)+" ")])])],2)],1)])])])],1)},o=[],a={created:function(){var e=this.$session.get("user-info"),t=e.brandId;this.$store.commit("dashboard/setBrandId",t),this.countPromotion()},computed:{promotionByStatus:function(){return this.$store.state.dashboard.countByStatus}},data:function(){return{loading:!0}},methods:{countPromotion:function(){var e=this;this.$store.dispatch("dashboard/countByStatus").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))}}},r=a,s=i("2877"),l=Object(s["a"])(r,n,o,!1,null,null,null);t["default"]=l.exports},"73cf":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row justify-content-center"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"col-lg-7 col-md-7"},[i("div",{staticClass:"card bg-secondary shadow border-0"},[i("div",{staticClass:"px-lg-5 py-lg-2"},[i("div",{staticClass:"text-center text-muted mb-4"},[i("small",[e._v("Sign up your Brand")]),i("div",{staticClass:"mt-3 pt-3 pb-2 pr-0 pl-0"},[i("div",{staticClass:"bg-transparent"},[i("el-steps",{attrs:{active:e.formIndex,"finish-status":"success","align-center":""}},[i("el-step",{attrs:{title:"User Information"}}),i("el-step",{attrs:{title:"Brand Information"}}),i("el-step",{attrs:{title:"Finish"}})],1)],1)])]),i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xl-11 order-xl-1"},[[i("register-user",{directives:[{name:"show",rawName:"v-show",value:0==e.formIndex,expression:"formIndex == 0"}],ref:"userRegister",on:{"change-page":e.changeForm}}),i("register-brand",{directives:[{name:"show",rawName:"v-show",value:1==e.formIndex,expression:"formIndex == 1"}],ref:"brandRegister",on:{"change-page":e.changeForm,loading:e.load}}),i("div",{directives:[{name:"show",rawName:"v-show",value:3==e.formIndex,expression:"formIndex == 3"}],staticClass:"text-center"},[i("h2",[e._v("Congratulation!")]),e._m(0)])]],2)])])]),i("div",[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.formIndex<2,expression:"formIndex < 2"}],staticClass:"float-right mb-3 mr-7",staticStyle:{width:"25vw"},attrs:{type:"success"},on:{click:function(t){return e.next()}}},[e._v(" Next ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:2==e.formIndex,expression:"formIndex == 2"}],staticClass:"float-right mb-3 mr-7",staticStyle:{width:"25vw"},attrs:{type:"success"},on:{click:function(t){return e.register("userProfile")}}},[e._v(" Register ")])],1)]),i("div",{staticClass:"row mt-3"},[e._m(1),i("div",{staticClass:"col-6 text-right"},[i("router-link",{staticClass:"text-light",attrs:{to:"/login"}},[i("small",[e._v("Login into your account")])])],1)])])])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",[e._v("Your account has been sign up successfuly")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-6"},[i("a",{staticClass:"text-light",attrs:{href:"#"}},[i("small",[e._v("Forgot password?")])])])}],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"userRegister",staticClass:"demo-ruleForm",attrs:{"label-position":"top",model:e.userProfile,rules:e.rules,"label-width":"120px"}},[i("div",{staticClass:"pl-lg-4"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-12"},[i("el-form-item",{attrs:{label:"Username",prop:"username"}},[i("el-input",{model:{value:e.userProfile.username,callback:function(t){e.$set(e.userProfile,"username",t)},expression:"userProfile.username"}})],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadCheckUsername,expression:"loadCheckUsername"}]})],1),i("div",{staticClass:"col-lg-12"},[i("el-form-item",{attrs:{label:"Password",prop:"password"}},[i("el-input",{attrs:{type:"password"},model:{value:e.userProfile.password,callback:function(t){e.$set(e.userProfile,"password",t)},expression:"userProfile.password"}})],1),i("ul",{directives:[{name:"show",rawName:"v-show",value:""!=e.userProfile.password,expression:"userProfile.password != ''"}]},[i("li",[e._v(" Contain 8 - 16 characters "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.validPassword.isValidLength,expression:"validPassword.isValidLength"}],staticClass:"el-icon-check",staticStyle:{color:"green"}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!e.validPassword.isValidLength,expression:"!validPassword.isValidLength"}],staticClass:"el-icon-close",staticStyle:{color:"red"}})]),i("li",[e._v(" Contain at least 1 number "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.validPassword.isValidContainNumber,expression:"validPassword.isValidContainNumber"}],staticClass:"el-icon-check",staticStyle:{color:"green"}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!e.validPassword.isValidContainNumber,expression:"!validPassword.isValidContainNumber"}],staticClass:"el-icon-close",staticStyle:{color:"red"}})]),i("li",[e._v(" Contain at least 1 character "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.validPassword.isValidContainChar,expression:"validPassword.isValidContainChar"}],staticClass:"el-icon-check",staticStyle:{color:"green"}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!e.validPassword.isValidContainChar,expression:"!validPassword.isValidContainChar"}],staticClass:"el-icon-close",staticStyle:{color:"red"}})]),i("li",[e._v(" Contain at least 1 special character "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.validPassword.isValidContainSpecialChar,expression:"validPassword.isValidContainSpecialChar"}],staticClass:"el-icon-check",staticStyle:{color:"green"}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!e.validPassword.isValidContainSpecialChar,expression:"!validPassword.isValidContainSpecialChar"}],staticClass:"el-icon-close",staticStyle:{color:"red"}})])])],1),i("div",{staticClass:"col-lg-12"},[i("el-form-item",{attrs:{label:"Password Confirm",prop:"passwordConfirm"}},[i("el-input",{attrs:{type:"password"},model:{value:e.userProfile.passwordConfirm,callback:function(t){e.$set(e.userProfile,"passwordConfirm",t)},expression:"userProfile.passwordConfirm"}})],1)],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-4"},[i("el-form-item",{attrs:{label:"First Name",prop:"firstName"}},[i("el-input",{model:{value:e.userProfile.firstName,callback:function(t){e.$set(e.userProfile,"firstName",t)},expression:"userProfile.firstName"}})],1)],1),i("div",{staticClass:"col-lg-8"},[i("el-form-item",{attrs:{label:"Last Name",prop:"lastName"}},[i("el-input",{model:{value:e.userProfile.lastName,callback:function(t){e.$set(e.userProfile,"lastName",t)},expression:"userProfile.lastName"}})],1)],1),i("div",{staticClass:"col-lg-12"},[i("el-form-item",{attrs:{label:"Phone Number",prop:"phoneNumber"}},[i("el-input",{attrs:{type:"number",maxlength:"10"},model:{value:e.userProfile.phoneNumber,callback:function(t){e.$set(e.userProfile,"phoneNumber",t)},expression:"userProfile.phoneNumber"}})],1)],1),i("div",{staticClass:"col-lg-12"},[i("el-form-item",{attrs:{label:"Email",prop:"email"}},[i("el-input",{model:{value:e.userProfile.email,callback:function(t){e.$set(e.userProfile,"email",t)},expression:"userProfile.email"}})],1)],1)])])])],1)},r=[],s=(i("ac1f"),i("466d"),i("96cf"),i("1da1")),l={data:function(){var e=this,t=function(t,i,n){i?(e.handleChangePassword(i),i.match("^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,16}$")?n():n(new Error("Password contain 8-16 characters, at least 1 character, at least 1 number and at least 1 special character"))):n(new Error("Please input your Password"))},i=function(t,i,n){i?i!==e.userProfile.password?n(new Error("Password is not match")):n():n(new Error("Please input your Password"))},n=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(i,n,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=4;break}o(new Error("Please input your email")),t.next=10;break;case 4:if(n.match("^[\\w-\\.]+@([\\w-]{3,}\\.)+[\\w-]{2,4}$")){t.next=8;break}o(new Error("Please enter valid email")),t.next=10;break;case 8:return t.next=10,e.checkEmailExisiting(n).then((function(){e.isEmailExist?o(new Error("This Email is existing")):o()}));case 10:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}(),o=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(i,n,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=4;break}o(new Error("Please input your Username")),t.next=7;break;case 4:return n.match("^[a-z0-9_-]{6,25}$")||o(new Error("The username is from 6-25 characters and do not contain special characters")),t.next=7,e.checkUsernameExisting(n).then((function(){e.isUserNameExist?o(new Error("This Username is existing")):o()}));case 7:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}(),a=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(i,n,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=4;break}o(new Error("Please input your Phone number")),t.next=10;break;case 4:if(n.match("^\\d{10}$")){t.next=8;break}o(new Error("This phone number is not valid")),t.next=10;break;case 8:return t.next=10,e.checkPhoneExisiting(n).then((function(){e.isPhoneExist?o(new Error("This Phone number is existing")):o()}));case 10:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}();return{userProfile:{username:"",firstName:"",password:"",passwordConfirm:"",lastName:"",phoneNumber:"",email:""},rules:{email:[{validator:n,trigger:["blur","change"]},{required:!0,message:"Please input Email",trigger:"blur"}],username:[{required:!0,message:"Please input Username",trigger:"blur"},{validator:o,trigger:["blur"]}],phoneNo:[{required:!0,message:"Please input Phone number",trigger:"blur"},{validator:a,trigger:["blur"]}],password:[{validator:t,trigger:"change"},{required:!0,message:"Please input password",trigger:"blur"}],passwordConfirm:[{validator:i,trigger:"change"},{required:!0,message:"Please input password",trigger:"blur"}],firstName:[{required:!0,message:"Please input First name",trigger:["blur","change"]}],lastName:[{required:!0,message:"Please input Last name",trigger:["blur","change"]}]},loadCheckUsername:!1,validPassword:{isValidLength:!1,isValidContainNumber:!1,isValidContainChar:!1,isValidContainSpecialChar:!1}}},computed:{isUserNameExist:function(){return this.$store.state.account.isUserNameExist},isEmailExist:function(){return this.$store.state.account.isEmailExist},isPhoneExist:function(){return this.$store.state.account.isPhoneExist}},methods:{handleChangePassword:function(e){e&&(e.length>=8&&e.length<=16?this.validPassword.isValidLength=!0:this.validPassword.isValidLength=!1,e.match("(?=.*?[0-9])")?this.validPassword.isValidContainNumber=!0:this.validPassword.isValidContainNumber=!1,e.match("(?=.*?[a-zA-Z])")?this.validPassword.isValidContainChar=!0:this.validPassword.isValidContainChar=!1,e.match("(?=.*?[#?!@$%^&*-])")?this.validPassword.isValidContainSpecialChar=!0:this.validPassword.isValidContainSpecialChar=!1)},checkUsernameExisting:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=4;break}return t.$store.commit("account/setProfile",t.userProfile),i.next=4,t.$store.dispatch("account/checkUsernameExisiting");case 4:case"end":return i.stop()}}),i)})))()},checkEmailExisiting:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=4;break}return t.$store.commit("account/setProfile",t.userProfile),i.next=4,t.$store.dispatch("account/checkEmailExisiting");case 4:case"end":return i.stop()}}),i)})))()},checkPhoneExisiting:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=4;break}return t.$store.commit("account/setProfile",t.userProfile),i.next=4,t.$store.dispatch("account/checkPhoneExisiting");case 4:case"end":return i.stop()}}),i)})))()},nextToBrand:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("Please input required fields"),!1;console.log("valid"),t.$store.commit("account/setProfile",t.userProfile),t.$emit("change-page",1)}))}}},c=l,u=i("2877"),d=Object(u["a"])(c,a,r,!1,null,null,null),m=d.exports,p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-form",{ref:"brandRegister",staticClass:"demo-ruleForm",attrs:{"label-position":"top",model:e.brandProfile,rules:e.rules,"label-width":"120px"}},[i("div",{staticClass:"pl-lg-4"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-12"},[i("el-form-item",{attrs:{label:"Brand name",prop:"brandName"}},[i("el-input",{attrs:{"input-classes":"form-control-alternative"},model:{value:e.brandProfile.brandName,callback:function(t){e.$set(e.brandProfile,"brandName",t)},expression:"brandProfile.brandName"}})],1)],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("el-form-item",{attrs:{label:"Address",prop:"address"}},[i("el-input",{model:{value:e.brandProfile.address,callback:function(t){e.$set(e.brandProfile,"address",t)},expression:"brandProfile.address"}})],1)],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-4"},[i("el-form-item",{attrs:{label:"Brand Code",prop:"brandCode"}},[i("el-input",{model:{value:e.brandProfile.brandCode,callback:function(t){e.$set(e.brandProfile,"brandCode",t)},expression:"brandProfile.brandCode"}})],1)],1),i("div",{staticClass:"col-lg-8"},[i("el-form-item",{attrs:{label:"Hotline",prop:"phoneNumber"}},[i("el-input",{attrs:{type:"number"},model:{value:e.brandProfile.phoneNumber,callback:function(t){e.$set(e.brandProfile,"phoneNumber",t)},expression:"brandProfile.phoneNumber"}})],1)],1),i("div",{staticClass:"col-lg-12"},[i("el-form-item",{attrs:{label:"Company Name",prop:"companyName"}},[i("el-input",{model:{value:e.brandProfile.companyName,callback:function(t){e.$set(e.brandProfile,"companyName",t)},expression:"brandProfile.companyName"}})],1)],1)])])])],1)},h=[],g={methods:{nextToFinish:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("Please input required fields"),!1;console.log("valid"),t.$store.commit("account/setBrandProfile",t.brandProfile),console.log(t.$store.state.account.userProfile),t.loading=!0,t.$store.dispatch("account/registerAccount").then((function(){t.loading=!1,t.$emit("change-page",3)}))}))}},data:function(){return{loading:!1,brandProfile:{brandCode:"",phoneNumber:"",brandName:"",companyName:"",address:""},rules:{brandCode:[{required:!0,message:"Please input Brand Code",trigger:["blur","change"]}],brandName:[{required:!0,message:"Please input Brand Name",trigger:["blur","change"]}],companyName:[{required:!0,message:"Please input Company Name",trigger:["blur","change"]}],address:[{required:!0,message:"Please input Address",trigger:["blur","change"]}],hotline:[{required:!0,message:"Please input Hotline",trigger:["blur","change"]}]}}}},f=g,v=Object(u["a"])(f,p,h,!1,null,null,null),b=v.exports,y={name:"register",components:{RegisterUser:m,RegisterBrand:b},data:function(){return{loading:!1,formIndex:0}},methods:{load:function(e){this.loading=e},changeForm:function(e){this.formIndex=e},next:function(){switch(this.formIndex){case 0:this.$refs.userRegister.nextToBrand("userRegister");break;case 1:this.$refs.brandRegister.nextToFinish("brandRegister");break}}}},C=y,w=Object(u["a"])(C,n,o,!1,null,null,null);t["default"]=w.exports},"74a4":function(e,t,i){},"778a":function(e,t,i){"use strict";i("ce97")},"78a2":function(e,t,i){},"79cc":function(e,t,i){"use strict";i("467e")},"7a83":function(e,t,i){},"7d9c":function(e,t,i){},"7e34":function(e,t,i){},"7e34e":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"condition"}},[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid mt--9"},[i("div",{staticClass:"card shadow"},[i("div",{staticClass:"card-header bg-transparent promotion"},[i("el-col",{staticClass:"mt-2",attrs:{span:22}},[i("h2",{staticClass:"mb-0"},[e._v("Manage Condition")])]),i("el-col",{staticClass:"float-right mt-1",attrs:{span:2}},[i("el-button",{attrs:{size:"medium",type:"success",icon:"el-icon-plus"},on:{click:e.createCondition}},[e._v("New Condition")])],1)],1)]),i("el-row",{staticClass:"mt-3"},[i("condition-table")],1)],1)],1)},o=[],a=i("2b0e"),r=i("4eb5"),s=i.n(r),l=i("5f5b"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card p-3"},[i("div",{staticClass:"mt-2 table-responsive"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"filterTable",staticClass:"condition-table",staticStyle:{width:"100%",color:"#525f7f"},attrs:{data:e.conditionList.data,"header-cell-style":{color:"#696969","font-weight":"600","font-size":"1rem !important","background-color":"#f4f4f4","padding-bottom":"1vh","padding-top":"1.2vh"},"cell-style":{"padding-top":"1.3vh","padding-bottom":"1.3vh","padding-left":"0px","padding-right":"0px","font-size":"1.05rem !important",height:"5.5vh"}}},[i("el-table-column",{attrs:{type:"index",align:"left",index:e.indexMethod,label:"NO","min-width":40}}),i("el-table-column",{attrs:{prop:"ruleName",label:"NAME","column-key":"date",align:"left","min-width":250},scopedSlots:e._u([{key:"default",fn:function(t){return[i("router-link",{staticClass:"text-body",staticStyle:{"word-break":"break-word"},attrs:{to:{name:"Condition Detail",params:{id:t.row.conditionRuleId}}}},[e._v(" "+e._s(t.row.ruleName)+" ")])]}}])}),i("el-table-column",{attrs:{label:"DESCRIPTION"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"mb-0",staticStyle:{"word-break":"break-word"}},[e._v(" "+e._s(t.row.description)+" ")])]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{prop:"insDate",label:"Updated date"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-time mr-1"}),e._v(" "+e._s(e._f("dateFormat")(t.row.updDate)))]}}])}),i("el-table-column",{attrs:{width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{border:"0px",outline:"none"},attrs:{icon:"el-icon-delete-solid",type:"text text-dark"},on:{click:function(i){return e.deleteRule(t.row.conditionRuleId)}}})]}}])})],1)],1),i("div",{staticClass:"d-flex justify-content-end align-items-center mr-2 mb-2 mt-2",class:"dark"===e.type?"bg-transparent":""},[i("base-pagination",{staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1)])},u=[],d=(i("ac1f"),i("841c"),i("c1df")),m=i.n(d),p=i("b012"),h={name:"condition-table",props:{type:{type:String},title:String},data:function(){return{pagination:{default:1},search:"",loading:!0,pageCount:1}},computed:{conditionList:function(){return this.setPageCount(),this.$store.state.condition.conditionList}},watch:{search:function(){""!==this.search?(this.$store.commit("voucher/setSearchContent",this.search),this.loading=!0,this.getSearch()):this.getConditionList()}},methods:{deleteRule:function(e){var t=this;this.$confirm("This will permanently delete the file. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.loading=!0,t.$store.commit("condition/setDeleteId",e),t.$store.dispatch("condition/deleteRule").then((function(e){t.loading=!1,200==e.status?(t.$notify({title:"Success",message:"Delete successful",type:"success"}),t.getConditionList()):t.$notify({icon:"el-icon-warning",title:"Error",message:"Delete error, please try again",type:"danger"})})).catch((function(){t.$notify({icon:"el-icon-warning",title:"Error",message:"Delete error, please try again",type:"danger"}),t.loading=!1}))}))},changePage:function(e){this.$store.commit("condition/setPageIndex",e),this.loading=!0,this.getConditionList()},setPageCount:function(){var e=this.$store.state.condition.PageSize;this.pageCount=Math.ceil(this.$store.state.condition.counter/e)},indexMethod:function(e){var t=this.$store.state.condition.PageSize,i=this.$store.state.condition.PageIndex;return e+=1,i>1?e+(i-1)*t:e},getSearch:Object(p["debounce"])((function(){var e=this;this.$store.dispatch("voucher/searchVoucher").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))}),1e3),getConditionList:function(){var e=this;this.loading=!0,this.$store.dispatch("condition/getConditionList").then((function(t){e.loading=!1,200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Error when getting conditions, please try again",type:"danger"})})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Error when getting conditions, please try again",type:"danger"})}))}},created:function(){this.getConditionList()},filters:{type:function(e){switch(e){case"1":return"Discount";case"2":return"Promotion";case"3":return"Gift";case"4":return"Bonus Point"}},dateFormat:function(e){if(e)return m()(e).format("DD/MM/YYYY, HH:mm")}}},g=h,f=(i("b4d2"),i("2877")),v=Object(f["a"])(g,c,u,!1,null,null,null),b=v.exports;a["default"].use(s.a);var y={components:{ConditionTable:b},directives:{"b-tooltip":l["b"]},data:function(){return{}},created:function(){},methods:{createCondition:function(){this.$router.push("/campaign/condition/wizard")},onCopy:function(){this.$notify({type:"success",title:"Copied to clipboard"})}}},C=y,w=(i("56b8"),Object(f["a"])(C,n,o,!1,null,null,null));t["default"]=w.exports},"7e37":function(e,t,i){},"7ff0":function(e,t,i){},"841c":function(e,t,i){"use strict";var n=i("d784"),o=i("825a"),a=i("1d80"),r=i("129f"),s=i("14c3");n("search",1,(function(e,t,i){return[function(t){var i=a(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,i):new RegExp(t)[e](String(i))},function(e){var n=i(t,e,this);if(n.done)return n.value;var a=o(e),l=String(this),c=a.lastIndex;r(c,0)||(a.lastIndex=0);var u=s(a,l);return r(a.lastIndex,c)||(a.lastIndex=c),null===u?-1:u.index}]}))},"844a":function(e,t,i){},8652:function(e,t,i){"use strict";i("2dab")},8748:function(e,t,i){"use strict";i("2d23")},8802:function(e,t,i){},"89ff":function(e,t,i){"use strict";i("b1f8")},"8bce":function(e,t,i){},"8c19":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-7",attrs:{type:"gradient-success"}}),i("div",{staticClass:"ml-4 mr-4 mb-4 p-4 mt--7"},[i("device-table"),i("product-cate-table"),i("product-table"),i("member-level-table")],1)],1)},o=[],a=i("eca8"),r=i("59ed"),s=i("21a3"),l=i("11b4"),c={components:{ProductCateTable:a["a"],MemberLevelTable:r["a"],ProductTable:s["a"],DeviceTable:l["a"]},watch:{},data:function(){return{}},methods:{},props:{},created:function(){var e=this.$session.get("user-info");if(void 0!=e){var t=e.brandId;void 0!=t?(this.$store.commit("device/setBrandId",t),this.$store.commit("product/setBrandId",t),this.$store.commit("product_cate/setBrandId",t),this.$store.commit("member_level/setBrandId",t)):this.$router.push("/login").catch((function(){}))}else this.$router.push("/login").catch((function(){}))}},u=c,d=i("2877"),m=Object(d["a"])(u,n,o,!1,null,null,null);t["default"]=m.exports},"8e0a":function(e,t,i){},"91d3":function(e,t,i){"use strict";i("58eb")},"92d6":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid mt--9",attrs:{id:"channel"}},[i("div",{staticClass:"row mb-3"},[i("div",{staticClass:"col"},[i("div",{staticClass:"card shadow"},[i("div",{staticClass:"card-header bg-transparent"},[i("el-collapse",{staticClass:"pb-0",on:{change:e.expanded}},[i("el-collapse-item",{staticClass:"justify-content-center pb-0",attrs:{name:"1"}},[i("span",{staticClass:"collapse-title",attrs:{slot:"title"},slot:"title"},[e.expand?e._e():i("el-button",{attrs:{icon:"el-icon-plus",type:"success",size:"medium"}},[e._v("Create channel ")]),e.expand?i("el-button",{attrs:{icon:"el-icon-close",type:"danger",size:"small"}},[e._v("Cancel ")]):e._e()],1),i("div",{staticClass:"col-12"},[i("el-form",{ref:"createForm",staticClass:"row justify-content-center",attrs:{model:e.createForm,rules:e.addRules}},[i("el-form-item",{staticClass:"col-3 align-self-center",attrs:{prop:"channelCode"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Channel Code")])]),i("el-input",{attrs:{type:"text",placeholder:"Input code",size:"small",spellcheck:"false",maxlength:"20","show-word-limit":""},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.createForm.channelCode,callback:function(t){e.$set(e.createForm,"channelCode",t)},expression:"createForm.channelCode"}})],1),i("el-form-item",{staticClass:"col-3 align-self-center",attrs:{prop:"channelName"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Channel Name")])]),i("el-input",{attrs:{type:"text",placeholder:"Input name here",size:"small",spellcheck:"false",maxlength:"50","show-word-limit":""},model:{value:e.createForm.channelName,callback:function(t){e.$set(e.createForm,"channelName",t)},expression:"createForm.channelName"}})],1),i("el-form-item",{staticClass:"col-3 align-self-center",attrs:{prop:"channelType"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Channel type")])]),i("el-select",{attrs:{placeholder:"Select type",size:"small"},model:{value:e.createForm.channelType,callback:function(t){e.$set(e.createForm,"channelType",t)},expression:"createForm.channelType"}},e._l(e.channelType,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{staticClass:"col-2 align-self-center",attrs:{prop:"group"}},[i("p",{staticClass:"mb-0 pr-3"},[i("small",[e._v(" Group")])]),i("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"Input group here",size:"small",spellcheck:"false",min:0,max:10,"controls-position":"right"},model:{value:e.createForm.group,callback:function(t){e.$set(e.createForm,"group",t)},expression:"createForm.group"}})],1),i("el-form-item",{staticClass:"col-1 align-self-center pt-4 mt-1"},[e.expand?i("el-button",{staticClass:"custom-add",attrs:{size:"mini",icon:"el-icon-plus",type:"success"},on:{click:function(t){return e.submitForm("createForm")}}},[e._v("Add ")]):e._e()],1)],1)],1)])],1)],1)])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("channel-table",{ref:"table",attrs:{title:"Channel list"}})],1)])])],1)},o=[],a=(i("ac1f"),i("5319"),i("498a"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow",class:"dark"===e.type?"bg-default":"",attrs:{id:"channel-table"}},[i("div",{staticClass:"card-header border-0 pb-2"},[i("div",{staticClass:"row pl-2 pr-2"},[i("div",{staticClass:"col-6 flex-row"},[i("div",{staticClass:"row"},[i("strong",{staticClass:"h2 mb-0"},[e._v(" "+e._s(e.title)+" ")])])]),i("div",{staticClass:"col-6"},[i("div",{staticClass:"row d-flex justify-content-end"},[e.isEdit?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close",disabled:!e.channelList.length>0},on:{click:e.reloadTable}},[e._v("Cancel")]):e._e(),e.isEdit?e._e():i("el-button",{attrs:{size:"mini",icon:"el-icon-edit-outline",type:"success",disabled:!e.channelList.length>0},on:{click:function(t){return e.handleEditRow(!0)}}},[e._v("Edit")]),i("el-button",{attrs:{size:"mini",icon:"el-icon-document-checked",type:"success",disabled:!e.isEdit},on:{click:e.saveChannel}},[e._v("Save")]),i("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger",disabled:!e.multipleSelection.length>0},on:{click:function(t){e.dialogVisible=!0}}},[e._v("Delete")])],1)])])]),i("div",{staticClass:"table-responsive"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"channel-table",staticStyle:{width:"100%"},attrs:{data:e.channelList,"row-key":e.getRowKeys,"cell-style":{padding:"0px",height:"5.5vh"},stripe:""},on:{"row-click":e.rowClicked,"selection-change":e.handleSelectionChange}},[i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{type:"selection",align:"center",width:"50"}}),i("el-table-column",{attrs:{prop:"index",label:"No",width:"50"}}),i("el-table-column",{attrs:{prop:"channelCode",label:"Code"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edited?i("el-input",{attrs:{type:"text",size:"small",maxlength:"20",spellcheck:"false","show-word-limit":""},on:{input:function(i){return e.handleChangeCode(t.$index,t.row.channelCode)}},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:t.row.channelCode,callback:function(i){e.$set(t.row,"channelCode",i)},expression:"scope.row.channelCode"}}):e._e(),t.row.edited?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.channelCode))])]}}])}),i("el-table-column",{attrs:{prop:"channelName",label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edited?i("el-input",{attrs:{type:"text",size:"small",maxlength:"50",spellcheck:"false","show-word-limit":""},on:{input:function(i){return e.handleChangeName(t.$index,t.row.channelName)}},model:{value:t.row.channelName,callback:function(i){e.$set(t.row,"channelName",i)},expression:"scope.row.channelName"}}):e._e(),t.row.edited?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.channelName))])]}}])}),i("el-table-column",{attrs:{prop:"channelType",label:"Type"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edited?i("el-select",{attrs:{placeholder:"Select type"},on:{change:function(i){return e.handleChangeType(t.$index,t.row.channelType)}},model:{value:t.row.channelType,callback:function(i){e.$set(t.row,"channelType",i)},expression:"scope.row.channelType"}},e._l(e.channelType,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t.row.edited?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(e._f("channelType")(t.row.channelType)))])]}}])}),i("el-table-column",{attrs:{prop:"group",label:"Group"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edited?i("el-input-number",{staticStyle:{width:"100%"},attrs:{type:"number",spellcheck:"false",size:"small",min:0,max:10,"controls-position":"right"},on:{change:function(i){return e.handleChange(t.$index)}},model:{value:t.row.group,callback:function(i){e.$set(t.row,"group",i)},expression:"scope.row.group"}}):e._e(),t.row.edited?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.group))])]}}])}),i("el-table-column",{attrs:{label:"Api Key"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:t.row.apiKey}},[e._v(e._s(t.row.apiKey))]),i("el-button",{attrs:{icon:"el-icon-copy-document"},on:{click:function(i){return e.copyToClipboard(t.row.apiKey)}}},[e._v("Copy")])]}}])}),i("el-table-column",{attrs:{label:"Public Key"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:t.row.publicKey}},[e._v(e._s(t.row.publicKey))]),3==t.row.channelType?i("el-button",{attrs:{icon:"el-icon-copy-document"},on:{click:function(i){return e.copyToClipboard(t.row.publicKey)}}},[e._v("Copy")]):e._e()]}}])})],1)],1),i("div",{staticClass:"d-flex justify-content-end pr-3 pt-1 pb-2"},[i("base-pagination",{ref:"basePagination",staticClass:"mb-0",attrs:{"page-count":e.pageCount,value:e.tableIndex},on:{input:e.changePage}})],1),i("el-dialog",{attrs:{title:"Please confirm action",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("Are you sure you want to delete these items ?")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:e.hideChannel}},[e._v("Confrim")])],1)])],1)}),r=[],s=(i("4160"),i("caad"),i("c975"),i("a434"),i("d3b7"),i("25f0"),i("2532"),i("159b"),i("b85c")),l=i("2b0e"),c=i("4eb5"),u=i.n(c),d=i("c1df"),m=i.n(d),p=i("b311"),h=i.n(p);l["default"].use(u.a),u.a.config.autoSetContainer=!0;var g=new h.a(".copyBtn");g.on("success",(function(e){console.info("Action:",e.action),console.info("Text:",e.text),console.info("Trigger:",e.trigger),e.clearSelection(),console.log("success")})),g.on("error",(function(e){console.log("error",e)}));var f={name:"channel-table",props:{type:{type:String},title:String},data:function(){return{getRowKeys:function(e){return e.id},pagination:{default:1},loading:!0,isEdit:!1,editIndex:[],errorIndex:[],multipleSelection:[],pageCount:10,dialogVisible:!1,channelType:[{value:1,label:"In-Store"},{value:2,label:"Online"},{value:3,label:"Other App"}]}},computed:{channelList:function(){return this.setPageCount(),this.$store.state.channel.channelList},tableIndex:function(){return this.$store.state.channel.PageIndex}},methods:{copyToClipboard:function(e){var t=document.getElementById(e),i=document.createElement("textarea");i.style.position="fixed",i.style.top=0,i.style.left=0,i.style.width="2em",i.style.height="2em",i.style.padding=0,i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.value=t.innerHTML,document.body.appendChild(i),i.focus(),i.select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),document.body.removeChild(i),alert("Data copied")},onCopy:function(){this.$message({message:"Copy successful",type:"success"})},rowClicked:function(e){this.$refs.multipleTable.toggleRowExpansion(e)},showMessage:function(e,t){this.$message({showClose:!0,center:!0,duration:2500,message:e,type:t})},pushError:function(e){this.errorIndex.includes(e)||this.errorIndex.push(e)},popError:function(e){this.errorIndex.includes(e)&&this.errorIndex.splice(this.errorIndex.indexOf(e),1)},handleChangeCode:function(e,t){var i=this;if(console.log("handleChangeCode :>> ",t),t){for(var n=!1,o=0;o<t.length;o++)t.charCodeAt(o)>127&&(n=!0);if(!n)return this.popError(e),this.$store.commit("channel/setChannelCode",t),this.$store.commit("channel/setChannelId",this.channelList[e].channelId),this.$store.dispatch("channel/checkDuplicate").then((function(t){t.data&&(i.showMessage("Duplicate Code!","error"),i.pushError(e))}));this.showMessage("Accept no Unicode!","error")}else this.showMessage("Code is required!","error"),this.pushError(e);this.handleChange(e)},handleChangeName:function(e,t){t&&t.trim()?this.popError(e):(this.showMessage("Name is required!","error"),this.pushError(e)),this.handleChange(e)},handleChangeType:function(e,t){t?this.popError(e):(this.showMessage("Type is required!","error"),this.pushError(e)),this.handleChange(e)},handleChange:function(e){this.editIndex.includes(e)?this.editIndex.splice(this.editIndex.indexOf(e),1,e):this.editIndex.push(e)},changePage:function(e){var t=this;this.loading=!0,this.$store.commit("channel/setPageIndex",e),this.$store.dispatch("channel/getChannelList").then((function(){t.loading=!1,t.isEdit&&t.handleEditRow(!0)}),(function(e){t.loading=!1,t.message=e.response&&e.response.data||e.message||e.toString()})).catch((function(e){t.loading=!1,t.$message({message:e.message+", please try again.",type:"error"})}))},setPageCount:function(){var e=this.$store.state.channel.PageSize;this.pageCount=Math.ceil(this.$store.state.channel.counter/e)},handleEditRow:function(e){var t=this.channelList;null!=t&&t.length>0&&(t.forEach((function(t){t.edited=e})),this.isEdit=e)},saveChannel:function(){var e=this;if(this.errorIndex.length>0)this.$message.error("Please fill all fields"),console.log("Save FAIL: channel/saveChannel: Field is not validated");else if(this.loading=!0,console.log(this.editIndex+" - "+this.editIndex.length),null!=this.editIndex&&this.editIndex.length>0){var t=[];this.editIndex.forEach((function(i){var n={brandId:e.channelList[i].brandId,channelCode:e.channelList[i].channelCode,channelName:e.channelList[i].channelName.replace(/\s+/g," ").trim(),channelType:e.channelList[i].channelType,channelId:e.channelList[i].channelId,group:e.channelList[i].group};t.push(n),console.log("loop: ",n)})),console.log("updateParams ",t),this.$store.commit("channel/setUpdateParams",t),this.$store.dispatch("channel/saveChannel").then((function(){e.$notify({title:"Success",message:"Update successful"}),e.reloadTable()})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))}else this.reloadTable()},hideChannel:function(){var e=this;this.dialogVisible=!1,this.loading=!0;var t=this.multipleSelection;this.$store.commit("channel/setHideParams",t),this.$store.dispatch("channel/hideChannel").then((function(){e.reloadTable()}),(function(t){console.log("Delete FAIL: channel/hideChannel"),console.log(t),e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))},handleSelectionChange:function(e){this.multipleSelection=e},reloadTable:function(){var e=this;this.loading=!0,this.handleSelectionChange([]),this.handleEditRow(!1),this.$store.dispatch("channel/countChannel").then((function(){e.$store.dispatch("channel/getChannelList").then((function(){console.log("channelTable: Reload SUCCESS"),e.loading=!1}),(function(t){console.log("channelTable: Reload FAIL: getChannelList"),console.log(t),e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))}),(function(t){console.log("channelTable: Reload FAIL: countChannel"),console.log(t),e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))}},created:function(){var e=this;this.$store.dispatch("channel/countChannel").catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})})),this.$store.dispatch("channel/getChannelList").then((function(){e.loading=!1}),(function(t){e.loading=!1,e.message=t.response&&t.response.data||t.message||t.toString()})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))},filters:{dateFormat:function(e){if(e)return m()(e).format("HH:mm - DD/MM/YYYY")},channelType:function(e){if(e)switch(e){case 1:return"In-Store";case 2:return"Online";case 3:return"Other App"}}},watch:{editIndex:function(){if(this.editIndex){var e,t=Object(s["a"])(this.editIndex);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=this.channelList[i];n.channelCode&&n.channelName.trim()||(!n.channelCode&&n.channelName.trim()||n.channelCode&&!n.channelName.trim())&&this.pushError(i)}}catch(o){t.e(o)}finally{t.f()}}}}},v=f,b=(i("2430"),i("2877")),y=Object(b["a"])(v,a,r,!1,null,null,null),C=y.exports,w={data:function(){return{expand:!1,isDuplicate:!1,channelType:[{value:1,label:"In-Store"},{value:2,label:"Online"},{value:3,label:"Other App"}],createForm:{channelName:"",channelCode:"",channelType:"",group:0},addRules:{channelCode:[{validator:this.validateAddCode,trigger:"change"}],channelName:[{validator:this.validateAddName,trigger:"change"}],group:[{required:!0,message:"Group is required!",trigger:"change"}],channelType:{required:!0,message:"Please choose type!",trigger:["blur","change"]}}}},created:function(){},components:{channelTable:C},methods:{validateAddName:function(e,t,i){t?(console.log("validateAddName :>> ",t),t.trim()||(console.log("validateAddName: ở đây đc gọi khi !value.trim()"),i(new Error("Name is required!"))),console.log("validateAddName: ở đây đc gọi sau khi nhập value đúng"),i()):(console.log("validateAddName: ở đây đc gọi khi !value"),i(new Error("Name is required!")))},validateAddCode:function(e,t,i){return t?(console.log("validateAddCode :>> ",t),this.$store.commit("channel/setChannelCode",t),this.$store.dispatch("channel/checkDuplicate").then((function(e){if(e.data)return console.log("validateAddCode: ở đây đc gọi khi có Duplicate: "+t),i(new Error("Duplicated code!"));for(var n=0;n<t.length;n++)if(t.charCodeAt(n)>127)return i(new Error("Accept no Unicode!"))}))):(console.log("validateAddCode: ở đây đc gọi khi !value"),i(new Error("Code is required!")))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.addChannel()}))},expanded:function(){console.log("expanded đc gọi"),this.expand=!this.expand,this.expand||(console.log("!expand đc gọi"),this.$refs.createForm.resetFields("channelCode"),this.createForm.group=0)},addChannel:function(){var e=this;this.$refs.table.loading=!0,console.log(this.$store.state.channel.brandId),this.$store.commit("channel/setChannelCode",this.createForm.channelCode),this.$store.commit("channel/setChannelName",this.createForm.channelName.replace(/\s+/g," ").trim()),this.$store.commit("channel/setGroup",this.createForm.group),this.$store.commit("channel/setChannelType",this.createForm.channelType),this.$store.dispatch("channel/addChannel").then((function(){e.$refs.createForm.resetFields(),e.$refs.table.loading=!1}),(function(e){console.log(e)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))}}},x=w,_=(i("8748"),Object(b["a"])(x,n,o,!1,null,null,null));t["default"]=_.exports},9490:function(e,t,i){},"98f6":function(e,t,i){},9991:function(e,t,i){"use strict";i("07b4")},"9a33":function(e,t,i){},"9f6e":function(e,t,i){},a098:function(e,t,i){"use strict";i("c8fd")},a0bd:function(e,t,i){"use strict";i("2741")},a41c:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid mt--7"},[i("el-row",[i("div",{staticClass:"card shadow"},[i("div",{staticClass:"card-header bg-transparent promotion"},[i("el-col",{staticClass:"mt-2",attrs:{span:12}},[i("h2",{staticClass:"mb-0"},[e._v("Game Campaign")])]),i("el-col",{attrs:{span:12,type:"primary"}},[i("el-button",{staticClass:"float-right",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.createGameCampaign}},[e._v("New Game Campaign")])],1)],1)])]),i("el-row",{staticClass:"mt-5"},[i("game-campaign-table",{ref:"gameConfigTable"})],1)],1)],1)},o=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"card shadow",attrs:{id:"gameConfig"}},[i("div",[i("el-table",{ref:"gameConfig",staticStyle:{width:"100%"},attrs:{data:e.gameConfigList,"cell-class-name":"modifyCell",stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"#",width:"100"}}),i("el-table-column",{attrs:{width:"300",label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("router-link",{staticStyle:{"word-break":"break-word"},attrs:{type:"primary",to:{name:"Update Game Configuration",params:{id:t.row.id}}}},[e._v(" "+e._s(t.row.name)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"updDate",label:"Quantity of item"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.quantity)+" ")]}}])}),i("el-table-column",{attrs:{fixed:"right",label:"",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"p-0",staticStyle:{outline:"none",border:"0px"},attrs:{icon:"el-icon-delete-solid",type:"text text-dark"},on:{click:function(i){return e.deleteConfig(t.row.id)}}})]}}])})],1)],1),i("div",{staticClass:"card-footer d-flex justify-content-end",class:"dark"===e.type?"bg-transparent":""},[i("base-pagination",{attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1)])},r=[],s={name:"game-campaign-table",props:{type:{type:String},title:String},data:function(){return{pagination:{default:1},search:"",loading:!1,pageCount:1}},computed:{gameConfigList:function(){return this.setPageCount(),this.$store.state.game_campaign.gameConfigs}},watch:{},methods:{deleteConfig:function(e){var t=this;this.$confirm("Do you want to delete ?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.loading=!0,t.$store.commit("game_campaign/setDeleteId",e),t.$store.dispatch("game_campaign/deleteConfig").then((function(e){t.loading=!1,200==e.status?(t.$notify({icon:"el-icon-circle-check",title:"Success",message:"Delete successfully",type:"success"}),t.getGameCampaignList()):t.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when deleting. Please try again",type:"danger"})})).catch((function(e){t.loading=!1,console.log(e.message),t.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when deleting. Please try again",type:"danger"})}))}))},changePage:function(e){this.$store.commit("game_campaign/setPageIndex",e),this.loading=!0,this.getGameCampaignList()},setPageCount:function(){var e=this.$store.state.game_campaign.pageSize;this.pageCount=Math.ceil(this.$store.state.game_campaign.counter/e)},getGameCampaignList:function(){var e=this;this.loading=!0,this.$store.dispatch("game_campaign/getGameCampaignList").then((function(t){e.loading=!1,200!=t.status?(console.log(t.data.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Game Configuration. Please try again",type:"danger"})):0==e.gameConfigList.length&&e.pagination.default>1&&(e.pagination.default--,e.changePage(e.pagination.default))})).catch((function(t){e.loading=!1,console.log(t.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Game Configuration. Please try again",type:"danger"})}))}},created:function(){this.getGameCampaignList()}},l=s,c=(i("55ba"),i("2877")),u=Object(c["a"])(l,a,r,!1,null,null,null),d=u.exports,m={created:function(){},data:function(){return{loading:!1}},components:{GameCampaignTable:d},methods:{createGameCampaign:function(){this.$router.push("/game-campaign/create")}}},p=m,h=Object(c["a"])(p,n,o,!1,null,null,null);t["default"]=h.exports},a55b:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row justify-content-center"},[i("div",{staticClass:"col-lg-5 col-md-7"},[i("div",{staticClass:"card bg-secondary shadow border-0"},[i("div",{staticClass:"card-body px-lg-5 py-lg-5"},[e._m(0),i("form",{attrs:{role:"form"}},[i("base-input",{staticClass:"input-group-alternative mb-3",attrs:{placeholder:"Username","addon-left-icon":"ni ni-email-83"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}}),i("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Password",type:"password","addon-left-icon":"ni ni-lock-circle-open"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),i("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],attrs:{title:e.error,type:"error"}}),i("div",{staticClass:"text-center"},[i("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:e.login}},[e._v("Sign in")])],1)],1)])]),i("div",{staticClass:"row mt-3"},[e._m(1),i("div",{staticClass:"col-6 text-right"},[i("router-link",{staticClass:"text-light",attrs:{to:"/register"}},[i("small",[e._v("Create new account")])])],1)])])])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"text-center text-muted mb-4"},[i("small",[e._v("Sign in with credentials")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-6"},[i("a",{staticClass:"text-light",attrs:{href:"#"}},[i("small",[e._v("Forgot password?")])])])}],a={computed:{error:function(){return this.$store.state.account.error}},beforeCreate:function(){if(this.$session.exists()){var e=JSON.parse(sessionStorage.getItem("vue-session-key")),t=e["user-info"];null!=t&&void 0!=t.roleName?t.roleName==this.$ENV.ROLE.ADMIN?this.$router.push("/admin").catch((function(){})):this.$router.push("/"):this.$router.push("/login").catch((function(){}))}},methods:{login:function(){var e=this;this.$store.commit("account/setLoginForm",this.loginForm),console.log("1"),this.$store.dispatch("account/login").then((function(){var t=e.$store.state.account.userInfo;console.log("2: ",t),null!=t&&void 0!=t&&(e.$session.start(),e.$session.set("user-info",t),e.$store.commit("profile/setUsername",e.loginForm.username),e.$router.push("/").catch((function(){})))})).catch((function(){e.$router.push("/login").catch((function(){}))}))}},name:"login",data:function(){return{loginForm:{username:"",password:""}}}},r=a,s=i("2877"),l=Object(s["a"])(r,n,o,!1,null,null,null);t["default"]=l.exports},a667:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-7",attrs:{type:"gradient-success"}}),i("div",{staticClass:"ml-4 mr-4 mb-4 p-4 mt--7"},[i("member-level-table")],1)],1)},o=[],a=i("59ed"),r={components:{MemberLevelTable:a["a"]},created:function(){var e=this.$session.get("user-info");if(void 0!=e){var t=e.brandId;void 0!=t?this.$store.commit("member_level/setBrandId",t):this.$router.push("/login").catch((function(){}))}else this.$router.push("/login").catch((function(){}))},methods:{},props:{},watch:{},data:function(){return{}}},s=r,l=i("2877"),c=Object(l["a"])(s,n,o,!1,null,null,null);t["default"]=c.exports},a896:function(e,t,i){},aa47:function(e,t,i){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},a.apply(this,arguments)}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){o(e,t,i[t])}))}return e}function s(e,t){if(null==e)return{};var i,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}function l(e,t){if(null==e)return{};var i,n,o=s(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function c(e){return u(e)||d(e)||m()}function u(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function d(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}i.r(t),i.d(t,"MultiDrag",(function(){return Gt})),i.d(t,"Sortable",(function(){return Ze})),i.d(t,"Swap",(function(){return It}));var p="1.10.2";function h(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var g=h(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),f=h(/Edge/i),v=h(/firefox/i),b=h(/safari/i)&&!h(/chrome/i)&&!h(/android/i),y=h(/iP(ad|od|hone)/i),C=h(/chrome/i)&&h(/android/i),w={capture:!1,passive:!1};function x(e,t,i){e.addEventListener(t,i,!g&&w)}function _(e,t,i){e.removeEventListener(t,i,!g&&w)}function P(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(i){return!1}return!1}}function T(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function I(e,t,i,n){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&P(e,t):P(e,t))||n&&e===i)return e;if(e===i)break}while(e=T(e))}return null}var E,k=/\s+/g;function $(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(k," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(k," ")}}function S(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=i+("string"===typeof i?"":"px")}}function D(e,t){var i="";if("string"===typeof e)i=e;else do{var n=S(e,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(i)}function N(e,t,i){if(e){var n=e.getElementsByTagName(t),o=0,a=n.length;if(i)for(;o<a;o++)i(n[o],o);return n}return[]}function O(){var e=document.scrollingElement;return e||document.documentElement}function A(e,t,i,n,o){if(e.getBoundingClientRect||e===window){var a,r,s,l,c,u,d;if(e!==window&&e!==O()?(a=e.getBoundingClientRect(),r=a.top,s=a.left,l=a.bottom,c=a.right,u=a.height,d=a.width):(r=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||i)&&e!==window&&(o=o||e.parentNode,!g))do{if(o&&o.getBoundingClientRect&&("none"!==S(o,"transform")||i&&"static"!==S(o,"position"))){var m=o.getBoundingClientRect();r-=m.top+parseInt(S(o,"border-top-width")),s-=m.left+parseInt(S(o,"border-left-width")),l=r+a.height,c=s+a.width;break}}while(o=o.parentNode);if(n&&e!==window){var p=D(o||e),h=p&&p.a,f=p&&p.d;p&&(r/=f,s/=h,d/=h,u/=f,l=r+u,c=s+d)}return{top:r,left:s,bottom:l,right:c,width:d,height:u}}}function F(e,t,i){var n=U(e,!0),o=A(e)[t];while(n){var a=A(n)[i],r=void 0;if(r="top"===i||"left"===i?o>=a:o<=a,!r)return n;if(n===O())break;n=U(n,!1)}return!1}function L(e,t,i){var n=0,o=0,a=e.children;while(o<a.length){if("none"!==a[o].style.display&&a[o]!==Ze.ghost&&a[o]!==Ze.dragged&&I(a[o],i.draggable,e,!1)){if(n===t)return a[o];n++}o++}return null}function M(e,t){var i=e.lastElementChild;while(i&&(i===Ze.ghost||"none"===S(i,"display")||t&&!P(i,t)))i=i.previousElementSibling;return i||null}function G(e,t){var i=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ze.clone||t&&!P(e,t)||i++;return i}function R(e){var t=0,i=0,n=O();if(e)do{var o=D(e),a=o.a,r=o.d;t+=e.scrollLeft*a,i+=e.scrollTop*r}while(e!==n&&(e=e.parentNode));return[t,i]}function V(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[i][n])return Number(i);return-1}function U(e,t){if(!e||!e.getBoundingClientRect)return O();var i=e,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var o=S(i);if(i.clientWidth<i.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!i.getBoundingClientRect||i===document.body)return O();if(n||t)return i;n=!0}}}while(i=i.parentNode);return O()}function j(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function z(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function q(e,t){return function(){if(!E){var i=arguments,n=this;1===i.length?e.call(n,i[0]):e.apply(n,i),E=setTimeout((function(){E=void 0}),t)}}}function Y(){clearTimeout(E),E=void 0}function B(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function H(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function Q(e,t){S(e,"position","absolute"),S(e,"top",t.top),S(e,"left",t.left),S(e,"width",t.width),S(e,"height",t.height)}function X(e){S(e,"position",""),S(e,"top",""),S(e,"left",""),S(e,"width",""),S(e,"height","")}var W="Sortable"+(new Date).getTime();function K(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==S(e,"display")&&e!==Ze.ghost){t.push({target:e,rect:A(e)});var i=r({},t[t.length-1].rect);if(e.thisAnimationDuration){var n=D(e,!0);n&&(i.top-=n.f,i.left-=n.e)}e.fromRect=i}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(V(t,{target:e}),1)},animateAll:function(i){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof i&&i());var o=!1,a=0;t.forEach((function(e){var t=0,i=e.target,r=i.fromRect,s=A(i),l=i.prevFromRect,c=i.prevToRect,u=e.rect,d=D(i,!0);d&&(s.top-=d.f,s.left-=d.e),i.toRect=s,i.thisAnimationDuration&&z(l,s)&&!z(r,s)&&(u.top-s.top)/(u.left-s.left)===(r.top-s.top)/(r.left-s.left)&&(t=J(u,l,c,n.options)),z(s,r)||(i.prevFromRect=r,i.prevToRect=s,t||(t=n.options.animation),n.animate(i,u,s,t)),t&&(o=!0,a=Math.max(a,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),t),i.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"===typeof i&&i()}),a):"function"===typeof i&&i(),t=[]},animate:function(e,t,i,n){if(n){S(e,"transition",""),S(e,"transform","");var o=D(this.el),a=o&&o.a,r=o&&o.d,s=(t.left-i.left)/(a||1),l=(t.top-i.top)/(r||1);e.animatingX=!!s,e.animatingY=!!l,S(e,"transform","translate3d("+s+"px,"+l+"px,0)"),Z(e),S(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),S(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){S(e,"transition",""),S(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),n)}}}}function Z(e){return e.offsetWidth}function J(e,t,i,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*n.animation}var ee=[],te={initializeByDefault:!0},ie={mount:function(e){for(var t in te)te.hasOwnProperty(t)&&!(t in e)&&(e[t]=te[t]);ee.push(e)},pluginEvent:function(e,t,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var o=e+"Global";ee.forEach((function(n){t[n.pluginName]&&(t[n.pluginName][o]&&t[n.pluginName][o](r({sortable:t},i)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](r({sortable:t},i)))}))},initializePlugins:function(e,t,i,n){for(var o in ee.forEach((function(n){var o=n.pluginName;if(e.options[o]||n.initializeByDefault){var r=new n(e,t,e.options);r.sortable=e,r.options=e.options,e[o]=r,a(i,r.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var r=this.modifyOption(e,o,e.options[o]);"undefined"!==typeof r&&(e.options[o]=r)}},getEventProperties:function(e,t){var i={};return ee.forEach((function(n){"function"===typeof n.eventProperties&&a(i,n.eventProperties.call(t[n.pluginName],e))})),i},modifyOption:function(e,t,i){var n;return ee.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"===typeof o.optionListeners[t]&&(n=o.optionListeners[t].call(e[o.pluginName],i))})),n}};function ne(e){var t=e.sortable,i=e.rootEl,n=e.name,o=e.targetEl,a=e.cloneEl,s=e.toEl,l=e.fromEl,c=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,m=e.newDraggableIndex,p=e.originalEvent,h=e.putSortable,v=e.extraEventProperties;if(t=t||i&&i[W],t){var b,y=t.options,C="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||g||f?(b=document.createEvent("Event"),b.initEvent(n,!0,!0)):b=new CustomEvent(n,{bubbles:!0,cancelable:!0}),b.to=s||i,b.from=l||i,b.item=o||i,b.clone=a,b.oldIndex=c,b.newIndex=u,b.oldDraggableIndex=d,b.newDraggableIndex=m,b.originalEvent=p,b.pullMode=h?h.lastPutMode:void 0;var w=r({},v,ie.getEventProperties(n,t));for(var x in w)b[x]=w[x];i&&i.dispatchEvent(b),y[C]&&y[C].call(t,b)}}var oe=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,o=l(i,["evt"]);ie.pluginEvent.bind(Ze)(e,t,r({dragEl:re,parentEl:se,ghostEl:le,rootEl:ce,nextEl:ue,lastDownEl:de,cloneEl:me,cloneHidden:pe,dragStarted:Ie,putSortable:ye,activeSortable:Ze.active,originalEvent:n,oldIndex:he,oldDraggableIndex:fe,newIndex:ge,newDraggableIndex:ve,hideGhostForTarget:Qe,unhideGhostForTarget:Xe,cloneNowHidden:function(){pe=!0},cloneNowShown:function(){pe=!1},dispatchSortableEvent:function(e){ae({sortable:t,name:e,originalEvent:n})}},o))};function ae(e){ne(r({putSortable:ye,cloneEl:me,targetEl:re,rootEl:ce,oldIndex:he,oldDraggableIndex:fe,newIndex:ge,newDraggableIndex:ve},e))}var re,se,le,ce,ue,de,me,pe,he,ge,fe,ve,be,ye,Ce,we,xe,_e,Pe,Te,Ie,Ee,ke,$e,Se,De=!1,Ne=!1,Oe=[],Ae=!1,Fe=!1,Le=[],Me=!1,Ge=[],Re="undefined"!==typeof document,Ve=y,Ue=f||g?"cssFloat":"float",je=Re&&!C&&!y&&"draggable"in document.createElement("div"),ze=function(){if(Re){if(g)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),qe=function(e,t){var i=S(e),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=L(e,0,t),a=L(e,1,t),r=o&&S(o),s=a&&S(a),l=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+A(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+A(a).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&r["float"]&&"none"!==r["float"]){var u="left"===r["float"]?"left":"right";return!a||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return o&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||l>=n&&"none"===i[Ue]||a&&"none"===i[Ue]&&l+c>n)?"vertical":"horizontal"},Ye=function(e,t,i){var n=i?e.left:e.top,o=i?e.right:e.bottom,a=i?e.width:e.height,r=i?t.left:t.top,s=i?t.right:t.bottom,l=i?t.width:t.height;return n===r||o===s||n+a/2===r+l/2},Be=function(e,t){var i;return Oe.some((function(n){if(!M(n)){var o=A(n),a=n[W].options.emptyInsertThreshold,r=e>=o.left-a&&e<=o.right+a,s=t>=o.top-a&&t<=o.bottom+a;return a&&r&&s?i=n:void 0}})),i},He=function(e){function t(e,i){return function(n,o,a,r){var s=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==e&&(i||s))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"===typeof e)return t(e(n,o,a,r),i)(n,o,a,r);var l=(i?n:o).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var i={},o=e.group;o&&"object"==n(o)||(o={name:o}),i.name=o.name,i.checkPull=t(o.pull,!0),i.checkPut=t(o.put),i.revertClone=o.revertClone,e.group=i},Qe=function(){!ze&&le&&S(le,"display","none")},Xe=function(){!ze&&le&&S(le,"display","")};Re&&document.addEventListener("click",(function(e){if(Ne)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ne=!1,!1}),!0);var We=function(e){if(re){e=e.touches?e.touches[0]:e;var t=Be(e.clientX,e.clientY);if(t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[W]._onDragOver(i)}}},Ke=function(e){re&&re.parentNode[W]._isOutsideThisEl(e.target)};function Ze(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=a({},t),e[W]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return qe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ze.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var n in ie.initializePlugins(this,e,i),i)!(n in t)&&(t[n]=i[n]);for(var o in He(t),this)"_"===o.charAt(0)&&"function"===typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&je,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?x(e,"pointerdown",this._onTapStart):(x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),Oe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),a(this,K())}function Je(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function et(e,t,i,n,o,a,r,s){var l,c,u=e[W],d=u.options.onMove;return!window.CustomEvent||g||f?(l=document.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=o||t,l.relatedRect=a||A(t),l.willInsertAfter=s,l.originalEvent=r,e.dispatchEvent(l),d&&(c=d.call(u,l,r)),c}function tt(e){e.draggable=!1}function it(){Me=!1}function nt(e,t,i){var n=A(M(i.el,i.options.draggable)),o=10;return t?e.clientX>n.right+o||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+o}function ot(e,t,i,n,o,a,r,s){var l=n?e.clientY:e.clientX,c=n?i.height:i.width,u=n?i.top:i.left,d=n?i.bottom:i.right,m=!1;if(!r)if(s&&$e<c*o){if(!Ae&&(1===ke?l>u+c*a/2:l<d-c*a/2)&&(Ae=!0),Ae)m=!0;else if(1===ke?l<u+$e:l>d-$e)return-ke}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return at(t);return m=m||r,m&&(l<u+c*a/2||l>d-c*a/2)?l>u+c/2?1:-1:0}function at(e){return G(re)<G(e)?1:-1}function rt(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;while(i--)n+=t.charCodeAt(i);return n.toString(36)}function st(e){Ge.length=0;var t=e.getElementsByTagName("input"),i=t.length;while(i--){var n=t[i];n.checked&&Ge.push(n)}}function lt(e){return setTimeout(e,0)}function ct(e){return clearTimeout(e)}Ze.prototype={constructor:Ze,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Ee=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,re):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,n=this.options,o=n.preventOnFilter,a=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(r||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=n.filter;if(st(i),!re&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||n.disabled)&&!l.isContentEditable&&(s=I(s,n.draggable,i,!1),(!s||!s.animated)&&de!==s)){if(he=G(s),fe=G(s,n.draggable),"function"===typeof c){if(c.call(this,e,s,this))return ae({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),oe("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(n){if(n=I(l,n.trim(),i,!1),n)return ae({sortable:t,rootEl:n,name:"filter",targetEl:s,fromEl:i,toEl:i}),oe("filter",t,{evt:e}),!0})),c))return void(o&&e.cancelable&&e.preventDefault());n.handle&&!I(l,n.handle,i,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,t,i){var n,o=this,a=o.el,r=o.options,s=a.ownerDocument;if(i&&!re&&i.parentNode===a){var l=A(i);if(ce=a,re=i,se=re.parentNode,ue=re.nextSibling,de=i,be=r.group,Ze.dragged=re,Ce={target:re,clientX:(t||e).clientX,clientY:(t||e).clientY},Pe=Ce.clientX-l.left,Te=Ce.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,re.style["will-change"]="all",n=function(){oe("delayEnded",o,{evt:e}),Ze.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!v&&o.nativeDraggable&&(re.draggable=!0),o._triggerDragStart(e,t),ae({sortable:o,name:"choose",originalEvent:e}),$(re,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){N(re,e.trim(),tt)})),x(s,"dragover",We),x(s,"mousemove",We),x(s,"touchmove",We),x(s,"mouseup",o._onDrop),x(s,"touchend",o._onDrop),x(s,"touchcancel",o._onDrop),v&&this.nativeDraggable&&(this.options.touchStartThreshold=4,re.draggable=!0),oe("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(f||g))n();else{if(Ze.eventCanceled)return void this._onDrop();x(s,"mouseup",o._disableDelayedDrag),x(s,"touchend",o._disableDelayedDrag),x(s,"touchcancel",o._disableDelayedDrag),x(s,"mousemove",o._delayedDragTouchMoveHandler),x(s,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&x(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(n,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){re&&tt(re),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;_(e,"mouseup",this._disableDelayedDrag),_(e,"touchend",this._disableDelayedDrag),_(e,"touchcancel",this._disableDelayedDrag),_(e,"mousemove",this._delayedDragTouchMoveHandler),_(e,"touchmove",this._delayedDragTouchMoveHandler),_(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?x(document,"pointermove",this._onTouchMove):x(document,t?"touchmove":"mousemove",this._onTouchMove):(x(re,"dragend",this),x(ce,"dragstart",this._onDragStart));try{document.selection?lt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(i){}},_dragStarted:function(e,t){if(De=!1,ce&&re){oe("dragStarted",this,{evt:t}),this.nativeDraggable&&x(document,"dragover",Ke);var i=this.options;!e&&$(re,i.dragClass,!1),$(re,i.ghostClass,!0),Ze.active=this,e&&this._appendGhost(),ae({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(we){this._lastX=we.clientX,this._lastY=we.clientY,Qe();var e=document.elementFromPoint(we.clientX,we.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(we.clientX,we.clientY),e===t)break;t=e}if(re.parentNode[W]._isOutsideThisEl(e),t)do{if(t[W]){var i=void 0;if(i=t[W]._onDragOver({clientX:we.clientX,clientY:we.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Xe()}},_onTouchMove:function(e){if(Ce){var t=this.options,i=t.fallbackTolerance,n=t.fallbackOffset,o=e.touches?e.touches[0]:e,a=le&&D(le,!0),r=le&&a&&a.a,s=le&&a&&a.d,l=Ve&&Se&&R(Se),c=(o.clientX-Ce.clientX+n.x)/(r||1)+(l?l[0]-Le[0]:0)/(r||1),u=(o.clientY-Ce.clientY+n.y)/(s||1)+(l?l[1]-Le[1]:0)/(s||1);if(!Ze.active&&!De){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(le){a?(a.e+=c-(xe||0),a.f+=u-(_e||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");S(le,"webkitTransform",d),S(le,"mozTransform",d),S(le,"msTransform",d),S(le,"transform",d),xe=c,_e=u,we=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!le){var e=this.options.fallbackOnBody?document.body:ce,t=A(re,!0,Ve,!0,e),i=this.options;if(Ve){Se=e;while("static"===S(Se,"position")&&"none"===S(Se,"transform")&&Se!==document)Se=Se.parentNode;Se!==document.body&&Se!==document.documentElement?(Se===document&&(Se=O()),t.top+=Se.scrollTop,t.left+=Se.scrollLeft):Se=O(),Le=R(Se)}le=re.cloneNode(!0),$(le,i.ghostClass,!1),$(le,i.fallbackClass,!0),$(le,i.dragClass,!0),S(le,"transition",""),S(le,"transform",""),S(le,"box-sizing","border-box"),S(le,"margin",0),S(le,"top",t.top),S(le,"left",t.left),S(le,"width",t.width),S(le,"height",t.height),S(le,"opacity","0.8"),S(le,"position",Ve?"absolute":"fixed"),S(le,"zIndex","100000"),S(le,"pointerEvents","none"),Ze.ghost=le,e.appendChild(le),S(le,"transform-origin",Pe/parseInt(le.style.width)*100+"% "+Te/parseInt(le.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,o=i.options;oe("dragStart",this,{evt:e}),Ze.eventCanceled?this._onDrop():(oe("setupClone",this),Ze.eventCanceled||(me=H(re),me.draggable=!1,me.style["will-change"]="",this._hideClone(),$(me,this.options.chosenClass,!1),Ze.clone=me),i.cloneId=lt((function(){oe("clone",i),Ze.eventCanceled||(i.options.removeCloneOnHide||ce.insertBefore(me,re),i._hideClone(),ae({sortable:i,name:"clone"}))})),!t&&$(re,o.dragClass,!0),t?(Ne=!0,i._loopId=setInterval(i._emulateDragOver,50)):(_(document,"mouseup",i._onDrop),_(document,"touchend",i._onDrop),_(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(i,n,re)),x(document,"drop",i),S(re,"transform","translateZ(0)")),De=!0,i._dragStartId=lt(i._dragStarted.bind(i,t,e)),x(document,"selectstart",i),Ie=!0,b&&S(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,n,o,a=this.el,s=e.target,l=this.options,c=l.group,u=Ze.active,d=be===c,m=l.sort,p=ye||u,h=this,g=!1;if(!Me){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=I(s,l.draggable,a,!0),N("dragOver"),Ze.eventCanceled)return g;if(re.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||h._ignoreWhileAnimating===s)return L(!1);if(Ne=!1,u&&!l.disabled&&(d?m||(n=!ce.contains(re)):ye===this||(this.lastPutMode=be.checkPull(this,u,re,e))&&c.checkPut(this,u,re,e))){if(o="vertical"===this._getDirection(e,s),t=A(re),N("dragOverValid"),Ze.eventCanceled)return g;if(n)return se=ce,O(),this._hideClone(),N("revert"),Ze.eventCanceled||(ue?ce.insertBefore(re,ue):ce.appendChild(re)),L(!0);var f=M(a,l.draggable);if(!f||nt(e,o,this)&&!f.animated){if(f===re)return L(!1);if(f&&a===e.target&&(s=f),s&&(i=A(s)),!1!==et(ce,a,re,t,s,i,e,!!s))return O(),a.appendChild(re),se=a,R(),L(!0)}else if(s.parentNode===a){i=A(s);var v,b,y=0,C=re.parentNode!==a,w=!Ye(re.animated&&re.toRect||t,s.animated&&s.toRect||i,o),x=o?"top":"left",_=F(s,"top","top")||F(re,"top","top"),P=_?_.scrollTop:void 0;if(Ee!==s&&(v=i[x],Ae=!1,Fe=!w&&l.invertSwap||C),y=ot(e,s,i,o,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Fe,Ee===s),0!==y){var T=G(re);do{T-=y,b=se.children[T]}while(b&&("none"===S(b,"display")||b===le))}if(0===y||b===s)return L(!1);Ee=s,ke=y;var E=s.nextElementSibling,k=!1;k=1===y;var D=et(ce,a,re,t,s,i,e,k);if(!1!==D)return 1!==D&&-1!==D||(k=1===D),Me=!0,setTimeout(it,30),O(),k&&!E?a.appendChild(re):s.parentNode.insertBefore(re,k?E:s),_&&B(_,0,P-_.scrollTop),se=re.parentNode,void 0===v||Fe||($e=Math.abs(v-A(s)[x])),R(),L(!0)}if(a.contains(re))return L(!1)}return!1}function N(l,c){oe(l,h,r({evt:e,isOwner:d,axis:o?"vertical":"horizontal",revert:n,dragRect:t,targetRect:i,canSort:m,fromSortable:p,target:s,completed:L,onMove:function(i,n){return et(ce,a,re,t,i,A(i),e,n)},changed:R},c))}function O(){N("dragOverAnimationCapture"),h.captureAnimationState(),h!==p&&p.captureAnimationState()}function L(t){return N("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(h),h!==p&&($(re,ye?ye.options.ghostClass:u.options.ghostClass,!1),$(re,l.ghostClass,!0)),ye!==h&&h!==Ze.active?ye=h:h===Ze.active&&ye&&(ye=null),p===h&&(h._ignoreWhileAnimating=s),h.animateAll((function(){N("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(s===re&&!re.animated||s===a&&!s.animated)&&(Ee=null),l.dragoverBubble||e.rootEl||s===document||(re.parentNode[W]._isOutsideThisEl(e.target),!t&&We(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function R(){ge=G(re),ve=G(re,l.draggable),ae({sortable:h,name:"change",toEl:a,newIndex:ge,newDraggableIndex:ve,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){_(document,"mousemove",this._onTouchMove),_(document,"touchmove",this._onTouchMove),_(document,"pointermove",this._onTouchMove),_(document,"dragover",We),_(document,"mousemove",We),_(document,"touchmove",We)},_offUpEvents:function(){var e=this.el.ownerDocument;_(e,"mouseup",this._onDrop),_(e,"touchend",this._onDrop),_(e,"pointerup",this._onDrop),_(e,"touchcancel",this._onDrop),_(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;ge=G(re),ve=G(re,i.draggable),oe("drop",this,{evt:e}),se=re&&re.parentNode,ge=G(re),ve=G(re,i.draggable),Ze.eventCanceled||(De=!1,Fe=!1,Ae=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ct(this.cloneId),ct(this._dragStartId),this.nativeDraggable&&(_(document,"drop",this),_(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),b&&S(document.body,"user-select",""),S(re,"transform",""),e&&(Ie&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),le&&le.parentNode&&le.parentNode.removeChild(le),(ce===se||ye&&"clone"!==ye.lastPutMode)&&me&&me.parentNode&&me.parentNode.removeChild(me),re&&(this.nativeDraggable&&_(re,"dragend",this),tt(re),re.style["will-change"]="",Ie&&!De&&$(re,ye?ye.options.ghostClass:this.options.ghostClass,!1),$(re,this.options.chosenClass,!1),ae({sortable:this,name:"unchoose",toEl:se,newIndex:null,newDraggableIndex:null,originalEvent:e}),ce!==se?(ge>=0&&(ae({rootEl:se,name:"add",toEl:se,fromEl:ce,originalEvent:e}),ae({sortable:this,name:"remove",toEl:se,originalEvent:e}),ae({rootEl:se,name:"sort",toEl:se,fromEl:ce,originalEvent:e}),ae({sortable:this,name:"sort",toEl:se,originalEvent:e})),ye&&ye.save()):ge!==he&&ge>=0&&(ae({sortable:this,name:"update",toEl:se,originalEvent:e}),ae({sortable:this,name:"sort",toEl:se,originalEvent:e})),Ze.active&&(null!=ge&&-1!==ge||(ge=he,ve=fe),ae({sortable:this,name:"end",toEl:se,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){oe("nulling",this),ce=re=se=le=ue=me=de=pe=Ce=we=Ie=ge=ve=he=fe=Ee=ke=ye=be=Ze.dragged=Ze.ghost=Ze.clone=Ze.active=null,Ge.forEach((function(e){e.checked=!0})),Ge.length=xe=_e=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":re&&(this._onDragOver(e),Je(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,o=i.length,a=this.options;n<o;n++)e=i[n],I(e,a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||rt(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach((function(e,n){var o=i.children[n];I(o,this.options.draggable,i,!1)&&(t[e]=o)}),this),e.forEach((function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return I(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var n=ie.modifyOption(this,e,t);i[e]="undefined"!==typeof n?n:t,"group"===e&&He(i)},destroy:function(){oe("destroy",this);var e=this.el;e[W]=null,_(e,"mousedown",this._onTapStart),_(e,"touchstart",this._onTapStart),_(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(_(e,"dragover",this),_(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Oe.splice(Oe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!pe){if(oe("hideClone",this),Ze.eventCanceled)return;S(me,"display","none"),this.options.removeCloneOnHide&&me.parentNode&&me.parentNode.removeChild(me),pe=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(pe){if(oe("showClone",this),Ze.eventCanceled)return;ce.contains(re)&&!this.options.group.revertClone?ce.insertBefore(me,re):ue?ce.insertBefore(me,ue):ce.appendChild(me),this.options.group.revertClone&&this.animate(re,me),S(me,"display",""),pe=!1}}else this._hideClone()}},Re&&x(document,"touchmove",(function(e){(Ze.active||De)&&e.cancelable&&e.preventDefault()})),Ze.utils={on:x,off:_,css:S,find:N,is:function(e,t){return!!I(e,t,e,!1)},extend:j,throttle:q,closest:I,toggleClass:$,clone:H,index:G,nextTick:lt,cancelNextTick:ct,detectDirection:qe,getChild:L},Ze.get=function(e){return e[W]},Ze.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ze.utils=r({},Ze.utils,e.utils)),ie.mount(e)}))},Ze.create=function(e,t){return new Ze(e,t)},Ze.version=p;var ut,dt,mt,pt,ht,gt,ft=[],vt=!1;function bt(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):this.options.supportPointer?x(document,"pointermove",this._handleFallbackAutoScroll):t.touches?x(document,"touchmove",this._handleFallbackAutoScroll):x(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):(_(document,"pointermove",this._handleFallbackAutoScroll),_(document,"touchmove",this._handleFallbackAutoScroll),_(document,"mousemove",this._handleFallbackAutoScroll)),Ct(),yt(),Y()},nulling:function(){ht=dt=ut=vt=gt=mt=pt=null,ft.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,n=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(n,o);if(ht=e,t||f||g||b){xt(e,this.options,a,t);var r=U(a,!0);!vt||gt&&n===mt&&o===pt||(gt&&Ct(),gt=setInterval((function(){var a=U(document.elementFromPoint(n,o),!0);a!==r&&(r=a,yt()),xt(e,i.options,a,t)}),10),mt=n,pt=o)}else{if(!this.options.bubbleScroll||U(a,!0)===O())return void yt();xt(e,this.options,U(a,!1),!1)}}},a(e,{pluginName:"scroll",initializeByDefault:!0})}function yt(){ft.forEach((function(e){clearInterval(e.pid)})),ft=[]}function Ct(){clearInterval(gt)}var wt,xt=q((function(e,t,i,n){if(t.scroll){var o,a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=O(),u=!1;dt!==i&&(dt=i,yt(),ut=t.scroll,o=t.scrollFn,!0===ut&&(ut=U(i,!0)));var d=0,m=ut;do{var p=m,h=A(p),g=h.top,f=h.bottom,v=h.left,b=h.right,y=h.width,C=h.height,w=void 0,x=void 0,_=p.scrollWidth,P=p.scrollHeight,T=S(p),I=p.scrollLeft,E=p.scrollTop;p===c?(w=y<_&&("auto"===T.overflowX||"scroll"===T.overflowX||"visible"===T.overflowX),x=C<P&&("auto"===T.overflowY||"scroll"===T.overflowY||"visible"===T.overflowY)):(w=y<_&&("auto"===T.overflowX||"scroll"===T.overflowX),x=C<P&&("auto"===T.overflowY||"scroll"===T.overflowY));var k=w&&(Math.abs(b-a)<=s&&I+y<_)-(Math.abs(v-a)<=s&&!!I),$=x&&(Math.abs(f-r)<=s&&E+C<P)-(Math.abs(g-r)<=s&&!!E);if(!ft[d])for(var D=0;D<=d;D++)ft[D]||(ft[D]={});ft[d].vx==k&&ft[d].vy==$&&ft[d].el===p||(ft[d].el=p,ft[d].vx=k,ft[d].vy=$,clearInterval(ft[d].pid),0==k&&0==$||(u=!0,ft[d].pid=setInterval(function(){n&&0===this.layer&&Ze.active._onTouchMove(ht);var t=ft[this.layer].vy?ft[this.layer].vy*l:0,i=ft[this.layer].vx?ft[this.layer].vx*l:0;"function"===typeof o&&"continue"!==o.call(Ze.dragged.parentNode[W],i,t,e,ht,ft[this.layer].el)||B(ft[this.layer].el,i,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&m!==c&&(m=U(m,!1)));vt=u}}),30),_t=function(e){var t=e.originalEvent,i=e.putSortable,n=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,r=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=i||o;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(a("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function Pt(){}function Tt(){}function It(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;wt=t},dragOverValid:function(e){var t=e.completed,i=e.target,n=e.onMove,o=e.activeSortable,a=e.changed,r=e.cancel;if(o.options.swap){var s=this.sortable.el,l=this.options;if(i&&i!==s){var c=wt;!1!==n(i)?($(i,l.swapClass,!0),wt=i):wt=null,c&&c!==wt&&$(c,l.swapClass,!1)}a(),t(!0),r()}},drop:function(e){var t=e.activeSortable,i=e.putSortable,n=e.dragEl,o=i||this.sortable,a=this.options;wt&&$(wt,a.swapClass,!1),wt&&(a.swap||i&&i.options.swap)&&n!==wt&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),Et(n,wt),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){wt=null}},a(e,{pluginName:"swap",eventProperties:function(){return{swapItem:wt}}})}function Et(e,t){var i,n,o=e.parentNode,a=t.parentNode;o&&a&&!o.isEqualNode(t)&&!a.isEqualNode(e)&&(i=G(e),n=G(t),o.isEqualNode(a)&&i<n&&n++,o.insertBefore(t,o.children[i]),a.insertBefore(e,a.children[n]))}Pt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=L(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:_t},a(Pt,{pluginName:"revertOnSpill"}),Tt.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,n=i||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:_t},a(Tt,{pluginName:"removeOnSpill"});var kt,$t,St,Dt,Nt,Ot=[],At=[],Ft=!1,Lt=!1,Mt=!1;function Gt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"===typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?x(document,"pointerup",this._deselectMultiDrag):(x(document,"mouseup",this._deselectMultiDrag),x(document,"touchend",this._deselectMultiDrag)),x(document,"keydown",this._checkKeyDown),x(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,i){var n="";Ot.length&&$t===e?Ot.forEach((function(e,t){n+=(t?", ":"")+e.textContent})):n=i.textContent,t.setData("Text",n)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;St=t},delayEnded:function(){this.isMultiDrag=~Ot.indexOf(St)},setupClone:function(e){var t=e.sortable,i=e.cancel;if(this.isMultiDrag){for(var n=0;n<Ot.length;n++)At.push(H(Ot[n])),At[n].sortableIndex=Ot[n].sortableIndex,At[n].draggable=!1,At[n].style["will-change"]="",$(At[n],this.options.selectedClass,!1),Ot[n]===St&&$(At[n],this.options.chosenClass,!1);t._hideClone(),i()}},clone:function(e){var t=e.sortable,i=e.rootEl,n=e.dispatchSortableEvent,o=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ot.length&&$t===t&&(Vt(!0,i),n("clone"),o()))},showClone:function(e){var t=e.cloneNowShown,i=e.rootEl,n=e.cancel;this.isMultiDrag&&(Vt(!1,i),At.forEach((function(e){S(e,"display","")})),t(),Nt=!1,n())},hideClone:function(e){var t=this,i=(e.sortable,e.cloneNowHidden),n=e.cancel;this.isMultiDrag&&(At.forEach((function(e){S(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),i(),Nt=!0,n())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&$t&&$t.multiDrag._deselectMultiDrag(),Ot.forEach((function(e){e.sortableIndex=G(e)})),Ot=Ot.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),Mt=!0},dragStarted:function(e){var t=this,i=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Ot.forEach((function(e){e!==St&&S(e,"position","absolute")}));var n=A(St,!1,!0,!0);Ot.forEach((function(e){e!==St&&Q(e,n)})),Lt=!0,Ft=!0}i.animateAll((function(){Lt=!1,Ft=!1,t.options.animation&&Ot.forEach((function(e){X(e)})),t.options.sort&&Ut()}))}},dragOver:function(e){var t=e.target,i=e.completed,n=e.cancel;Lt&&~Ot.indexOf(t)&&(i(!1),n())},revert:function(e){var t=e.fromSortable,i=e.rootEl,n=e.sortable,o=e.dragRect;Ot.length>1&&(Ot.forEach((function(e){n.addAnimationState({target:e,rect:Lt?A(e):o}),X(e),e.fromRect=o,t.removeAnimationState(e)})),Lt=!1,Rt(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(e){var t=e.sortable,i=e.isOwner,n=e.insertion,o=e.activeSortable,a=e.parentEl,r=e.putSortable,s=this.options;if(n){if(i&&o._hideClone(),Ft=!1,s.animation&&Ot.length>1&&(Lt||!i&&!o.options.sort&&!r)){var l=A(St,!1,!0,!0);Ot.forEach((function(e){e!==St&&(Q(e,l),a.appendChild(e))})),Lt=!0}if(!i)if(Lt||Ut(),Ot.length>1){var c=Nt;o._showClone(t),o.options.animation&&!Nt&&c&&At.forEach((function(e){o.addAnimationState({target:e,rect:Dt}),e.fromRect=Dt,e.thisAnimationDuration=null}))}else o._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,i=e.isOwner,n=e.activeSortable;if(Ot.forEach((function(e){e.thisAnimationDuration=null})),n.options.animation&&!i&&n.multiDrag.isMultiDrag){Dt=a({},t);var o=D(St,!0);Dt.top-=o.f,Dt.left-=o.e}},dragOverAnimationComplete:function(){Lt&&(Lt=!1,Ut())},drop:function(e){var t=e.originalEvent,i=e.rootEl,n=e.parentEl,o=e.sortable,a=e.dispatchSortableEvent,r=e.oldIndex,s=e.putSortable,l=s||this.sortable;if(t){var c=this.options,u=n.children;if(!Mt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),$(St,c.selectedClass,!~Ot.indexOf(St)),~Ot.indexOf(St))Ot.splice(Ot.indexOf(St),1),kt=null,ne({sortable:o,rootEl:i,name:"deselect",targetEl:St,originalEvt:t});else{if(Ot.push(St),ne({sortable:o,rootEl:i,name:"select",targetEl:St,originalEvt:t}),t.shiftKey&&kt&&o.el.contains(kt)){var d,m,p=G(kt),h=G(St);if(~p&&~h&&p!==h)for(h>p?(m=p,d=h):(m=h,d=p+1);m<d;m++)~Ot.indexOf(u[m])||($(u[m],c.selectedClass,!0),Ot.push(u[m]),ne({sortable:o,rootEl:i,name:"select",targetEl:u[m],originalEvt:t}))}else kt=St;$t=l}if(Mt&&this.isMultiDrag){if((n[W].options.sort||n!==i)&&Ot.length>1){var g=A(St),f=G(St,":not(."+this.options.selectedClass+")");if(!Ft&&c.animation&&(St.thisAnimationDuration=null),l.captureAnimationState(),!Ft&&(c.animation&&(St.fromRect=g,Ot.forEach((function(e){if(e.thisAnimationDuration=null,e!==St){var t=Lt?A(e):g;e.fromRect=t,l.addAnimationState({target:e,rect:t})}}))),Ut(),Ot.forEach((function(e){u[f]?n.insertBefore(e,u[f]):n.appendChild(e),f++})),r===G(St))){var v=!1;Ot.forEach((function(e){e.sortableIndex===G(e)||(v=!0)})),v&&a("update")}Ot.forEach((function(e){X(e)})),l.animateAll()}$t=l}(i===n||s&&"clone"!==s.lastPutMode)&&At.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=Mt=!1,At.length=0},destroyGlobal:function(){this._deselectMultiDrag(),_(document,"pointerup",this._deselectMultiDrag),_(document,"mouseup",this._deselectMultiDrag),_(document,"touchend",this._deselectMultiDrag),_(document,"keydown",this._checkKeyDown),_(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(("undefined"===typeof Mt||!Mt)&&$t===this.sortable&&(!e||!I(e.target,this.options.draggable,this.sortable.el,!1))&&(!e||0===e.button))while(Ot.length){var t=Ot[0];$(t,this.options.selectedClass,!1),Ot.shift(),ne({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},a(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[W];t&&t.options.multiDrag&&!~Ot.indexOf(e)&&($t&&$t!==t&&($t.multiDrag._deselectMultiDrag(),$t=t),$(e,t.options.selectedClass,!0),Ot.push(e))},deselect:function(e){var t=e.parentNode[W],i=Ot.indexOf(e);t&&t.options.multiDrag&&~i&&($(e,t.options.selectedClass,!1),Ot.splice(i,1))}},eventProperties:function(){var e=this,t=[],i=[];return Ot.forEach((function(n){var o;t.push({multiDragElement:n,index:n.sortableIndex}),o=Lt&&n!==St?-1:Lt?G(n,":not(."+e.options.selectedClass+")"):G(n),i.push({multiDragElement:n,index:o})})),{items:c(Ot),clones:[].concat(At),oldIndicies:t,newIndicies:i}},optionListeners:{multiDragKey:function(e){return e=e.toLowerCase(),"ctrl"===e?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function Rt(e,t){Ot.forEach((function(i,n){var o=t.children[i.sortableIndex+(e?Number(n):0)];o?t.insertBefore(i,o):t.appendChild(i)}))}function Vt(e,t){At.forEach((function(i,n){var o=t.children[i.sortableIndex+(e?Number(n):0)];o?t.insertBefore(i,o):t.appendChild(i)}))}function Ut(){Ot.forEach((function(e){e!==St&&e.parentNode&&e.parentNode.removeChild(e)}))}Ze.mount(new bt),Ze.mount(Tt,Pt),t["default"]=Ze},ab13:function(e,t,i){var n=i("b622"),o=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[o]=!1,"/./"[e](t)}catch(n){}}return!1}},afef:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"action"}},[i("base-header",{staticClass:"pb-6 mb-3 pt-1",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid"},[i("el-card",[i("h2",[e._v("UPDATE CONDITION")]),i("el-divider",{staticClass:"mt-3 mb-3"}),i("el-col",{staticClass:"mb-3",attrs:{span:24}},[i("el-tag",{staticClass:"custom-tag-content",attrs:{type:"warning"}},[i("i",{staticClass:"el-icon-warning-outline mr-2"}),i("label",[e._v(e._s(e.$ENV.TEXT_EXPLAIN.Condition))])])],1),i("el-form",{attrs:{"label-width":"200",model:e.conditionRuleObj,"label-position":"left"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{prop:"ruleName",label:"Name"}},[i("el-input",{model:{value:e.conditionRuleObj.ruleName,callback:function(t){e.$set(e.conditionRuleObj,"ruleName",t)},expression:"conditionRuleObj.ruleName"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"Description",prop:"description"}},[i("el-input",{model:{value:e.conditionRuleObj.description,callback:function(t){e.$set(e.conditionRuleObj,"description",t)},expression:"conditionRuleObj.description"}})],1)],1)],1)],1),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:6}},[i("el-card",[i("drag-item-section",{ref:"dragSection",attrs:{conditionItem:e.conditionItem}})],1)],1),i("el-col",{attrs:{span:18}},[i("el-card",[i("drop-section",{ref:"dropSection",attrs:{conditionItemParam:e.conditionItem}})],1)],1)],1),i("el-row",[i("el-button",{staticClass:"mt-3 float-right",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.updateCondition}},[e._v("Update Rule")])],1)],1)],1)],1)},o=[],a=(i("a4d3"),i("e01a"),i("7db0"),i("4160"),i("b0c0"),i("498a"),i("159b"),i("53ca")),r=(i("96cf"),i("1da1")),s=i("2b0e"),l=i("4eb5"),c=i.n(l),u=i("bfce"),d=i("2f68");s["default"].use(c.a);var m={components:{DropSection:u["a"],DragItemSection:d["a"]},name:"condition-detail",data:function(){return{loading:!1,CONSTANT:this.$ENV,conditionItem:[],conditionRuleObj:{ruleName:"",description:""},updateParam:{conditionRule:{conditionRuleId:"",brandId:"",ruleName:"",description:"",insDate:"",updDate:""},conditionGroups:[]}}},computed:{conditionDetail:function(){return this.$store.state.condition.conditionDetail}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getProducts();case 2:return t.next=4,e.getConditionDetail();case 4:e.setupUpdateData();case 5:case"end":return t.stop()}}),t)})))()},methods:{getProducts:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("condition/getBrandProduct").then((function(t){e.loading=!1,200!=t.status&&e.$notify({title:"Warning",message:"Cannot get Products",type:"warning"})})).catch((function(){e.loading=!1,e.$notify({title:"Warning",message:"Cannot get Products",type:"warning"})}));case 3:case"end":return t.stop()}}),t)})))()},updateCondition:function(){var e=this;this.loading=!0;var t=this.conditionItem,i=this.handleCondition(t);void 0!=i?(this.updateParam.conditionGroups=i,this.updateParam.conditionRule.conditionRuleId=this.conditionDetail.conditionRuleId,this.updateParam.conditionRule.brandId=this.conditionDetail.brandId,this.updateParam.conditionRule.ruleName=this.conditionRuleObj.ruleName,this.updateParam.conditionRule.insDate=this.conditionDetail.insDate,this.updateParam.conditionRule.updDate=(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"}),this.updateParam.conditionRule.description=this.conditionRuleObj.description,this.$store.commit("condition/setUpdateId",this.conditionDetail.conditionRuleId),this.$store.commit("condition/setUpdateParam",this.updateParam),this.$store.dispatch("condition/updateCondition").then((function(t){200==t.status?(e.loading=!1,e.$notify({title:"Success",message:"Update Success",type:"success"})):e.$notify({title:"Warning",message:"Update Error",type:"warning"})})).catch((function(){e.loading=!1,e.$notify({title:"Warning",message:"Update Error",type:"warning"})}))):this.loading=!1},handleCondition:function(e){var t=this,i=this.CONSTANT.CONTAIN_CODE,n=this.CONSTANT.OPERATOR;if(0!=e.length){for(var o=[],r=function(a){var r=e[a];if(void 0!=r.condType){var s=r.condType,l={groupNo:a,nextOperator:r.nextOperator,orderCondition:[],productCondition:[]};switch(s){case"PRODUCT":if(void 0!=r.productList&&r.productList.length>0){var c={productConditionType:void 0!=r.productConditionType?r.productConditionType:i.INCLUDE,productQuantity:void 0!=r.productQuantity?r.productQuantity:0,quantityOperator:void 0!=r.quantityOperator?n.find((function(e){return e.id==r.quantityOperator})).name:n.find((function(e){return 1==e.id})).name,nextOperator:r.nextOperator,indexGroup:0,productConditionMapping:[]};r.productList.forEach((function(e){var t={productId:e.productId,insDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"}),updDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"})};c.productConditionMapping.push(t)})),l.productCondition.push(c);break}return t.$notify({title:"Warning",message:"Please select product for condition",type:"warning"}),{v:void 0};case"ORDER":var u={quantity:void 0!=r.quantity?r.quantity:0,quantityOperator:void 0!=r.quantityOperator?n.find((function(e){return e.id==r.quantityOperator})).name:n.find((function(e){return 1==e.id})).name,amount:void 0!=r.amount?r.amount:0,amountOperator:void 0!=r.amountOperator?n.find((function(e){return e.id==r.amountOperator})).name:n.find((function(e){return 1==e.id})).name,nextOperator:r.nextOperator,indexGroup:0};l.orderCondition.push(u);break}o.push(l)}else{var d={groupNo:a,nextOperator:r.nextOperator,orderCondition:[],productCondition:[]};if(0==r.tasks.length)return t.$notify({title:"Warning",message:"Please select condition for group",type:"warning"}),{v:void 0};for(var m=function(e){var t=r.tasks[e],o=t.condType;switch(o){case"PRODUCT":var a={productConditionType:void 0!=t.productConditionType?t.productConditionType:i.INCLUDE,productQuantity:void 0!=t.productQuantity?t.productQuantity:0,quantityOperator:void 0!=t.quantityOperator?n.find((function(e){return e.id==t.quantityOperator})).name:n.find((function(e){return 1==e.id})).name,nextOperator:t.nextOperator,indexGroup:e,productConditionMapping:[]};t.productList.forEach((function(e){var t={productId:e.productId,insDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"}),updDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"})};a.productConditionMapping.push(t)})),d.productCondition.push(a);break;case"ORDER":var s={quantity:void 0!=t.quantity?t.quantity:0,quantityOperator:void 0!=t.quantityOperator?n.find((function(e){return e.id==t.quantityOperator})).name:n.find((function(e){return 1==e.id})).name,amount:void 0!=t.amount?t.amount:0,amountOperator:void 0!=t.amountOperator?n.find((function(e){return e.id==t.amountOperator})).name:n.find((function(e){return 1==e.id})).name,nextOperator:t.nextOperator,indexGroup:e};d.orderCondition.push(s);break}},p=0;p<r.tasks.length;p++)m(p);o.push(d)}},s=0;s<e.length;s++){var l=r(s);if("object"===Object(a["a"])(l))return l.v}return o}this.$notify({title:"Warning",message:"Please select condition",type:"warning"})},setupUpdateData:function(){if(this.conditionItem=[],this.conditionDetail){this.conditionRuleObj.ruleName=this.conditionDetail.ruleName,this.conditionRuleObj.description=this.conditionDetail.description;var e=this.conditionDetail.conditionGroups;this.setupConditions(e)}console.log(this.conditionItem)},setupConditions:function(e){var t=this,i=this.CONSTANT.OPERATOR;e&&e.forEach((function(e){var n=e.conditions;if(1==n.length){var o=n[0],a=void 0!=o.productConditionId?"PRODUCT":"ORDER";switch(a){case"PRODUCT":if(o.productQuantity>0){var r={condType:"PRODUCT",itemType:"QUANTITY",name:"Quantity",productQuantity:o.productQuantity,quantityOperator:i.find((function(e){return e.name==o.quantityOperator.trim()})).id,nextOperator:o.nextOperator,productList:o.listProduct};t.conditionItem.push(r)}else{var s={condType:"PRODUCT",itemType:"CODE",name:"Product code",productConditionType:o.productConditionType,nextOperator:o.nextOperator,productList:o.listProduct};t.conditionItem.push(s)}break;case"ORDER":if(o.quantity>0){var l={condType:"ORDER",itemType:"QUANTITY",name:"Quantity",quantityOperator:i.find((function(e){return e.name==o.quantityOperator.trim()})).id,quantity:o.quantity,nextOperator:o.nextOperator};t.conditionItem.push(l)}else{var c={condType:"ORDER",itemType:"AMOUNT",name:"Amount",amountOperator:i.find((function(e){return e.name==o.amountOperator.trim()})).id,amount:o.amount,nextOperator:o.nextOperator};t.conditionItem.push(c)}break}}if(n.length>1){var u={groupNo:e.groupNo,tasks:[],nextOperator:e.nextOperator};n.forEach((function(e){var t=void 0!=e.productConditionId?"PRODUCT":"ORDER";switch(t){case"PRODUCT":if(e.productQuantity>0){var n={condType:"PRODUCT",itemType:"QUANTITY",name:"Quantity",productQuantity:e.productQuantity,quantityOperator:i.find((function(t){return t.name==e.quantityOperator.trim()})).id,nextOperator:e.nextOperator,productList:e.listProduct};u.tasks.push(n)}else{var o={condType:"PRODUCT",itemType:"CODE",name:"Product code",productConditionType:e.productConditionType,nextOperator:e.nextOperator,productList:e.listProduct};u.tasks.push(o)}break;case"ORDER":if(e.quantity>0){var a={condType:"ORDER",itemType:"QUANTITY",name:"Quantity",quantityOperator:i.find((function(t){return t.name==e.quantityOperator.trim()})).id,quantity:e.quantity,nextOperator:e.nextOperator};u.tasks.push(a)}else{var r={condType:"ORDER",itemType:"AMOUNT",name:"Amount",amountOperator:i.find((function(t){return t.name==e.amountOperator.trim()})).id,amount:e.amount,nextOperator:e.nextOperator};u.tasks.push(r)}break}})),t.conditionItem.push(u)}}))},getConditionDetail:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.$route.params.id,e.$store.commit("condition/setDetailId",i),t.next=4,e.$store.dispatch("condition/getConditionDetail").then((function(t){200!=t.status&&e.$notify({title:"Error",message:"Error when get condition detail",type:"danger"})})).catch((function(){e.$notify({title:"Error",message:"Error when get condition detail",type:"danger"})}));case 4:case"end":return t.stop()}}),t)})))()}}},p=m,h=(i("9991"),i("2877")),g=Object(h["a"])(p,n,o,!1,null,"2abb000d",null);t["default"]=g.exports},b012:function(e,t){function i(e,t,i){var n,o,a,r,s;function l(){var c=Date.now()-r;c<t&&c>=0?n=setTimeout(l,t-c):(n=null,i||(s=e.apply(a,o),a=o=null))}null==t&&(t=100);var c=function(){a=this,o=arguments,r=Date.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(s=e.apply(a,o),a=o=null),s};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(s=e.apply(a,o),a=o=null,clearTimeout(n),n=null)},c}i.debounce=i,e.exports=i},b1f8:function(e,t,i){},b311:function(e,t,i){
/*!
 * clipboard.js v2.0.6
 * https://clipboardjs.com/
 * 
 * Licensed MIT © Zeno Rocha
 */
(function(t,i){e.exports=i()})(0,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6)}([function(e,t){function i(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var i=e.hasAttribute("readonly");i||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),i||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),o=document.createRange();o.selectNodeContents(e),n.removeAllRanges(),n.addRange(o),t=n.toString()}return t}e.exports=i},function(e,t){function i(){}i.prototype={on:function(e,t,i){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:i}),this},once:function(e,t,i){var n=this;function o(){n.off(e,o),t.apply(i,arguments)}return o._=t,this.on(e,o,i)},emit:function(e){var t=[].slice.call(arguments,1),i=((this.e||(this.e={}))[e]||[]).slice(),n=0,o=i.length;for(n;n<o;n++)i[n].fn.apply(i[n].ctx,t);return this},off:function(e,t){var i=this.e||(this.e={}),n=i[e],o=[];if(n&&t)for(var a=0,r=n.length;a<r;a++)n[a].fn!==t&&n[a].fn._!==t&&o.push(n[a]);return o.length?i[e]=o:delete i[e],this}},e.exports=i,e.exports.TinyEmitter=i},function(e,t,i){var n=i(3),o=i(4);function a(e,t,i){if(!e&&!t&&!i)throw new Error("Missing required arguments");if(!n.string(t))throw new TypeError("Second argument must be a String");if(!n.fn(i))throw new TypeError("Third argument must be a Function");if(n.node(e))return r(e,t,i);if(n.nodeList(e))return s(e,t,i);if(n.string(e))return l(e,t,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(e,t,i){return e.addEventListener(t,i),{destroy:function(){e.removeEventListener(t,i)}}}function s(e,t,i){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,i)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,i)}))}}}function l(e,t,i){return o(document.body,e,t,i)}e.exports=a},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var i=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===i||"[object HTMLCollection]"===i)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"===typeof e||e instanceof String},t.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},function(e,t,i){var n=i(5);function o(e,t,i,n,o){var a=r.apply(this,arguments);return e.addEventListener(i,a,o),{destroy:function(){e.removeEventListener(i,a,o)}}}function a(e,t,i,n,a){return"function"===typeof e.addEventListener?o.apply(null,arguments):"function"===typeof i?o.bind(null,document).apply(null,arguments):("string"===typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return o(e,t,i,n,a)})))}function r(e,t,i,o){return function(i){i.delegateTarget=n(i.target,t),i.delegateTarget&&o.call(e,i)}}e.exports=a},function(e,t){var i=9;if("undefined"!==typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}function o(e,t){while(e&&e.nodeType!==i){if("function"===typeof e.matches&&e.matches(t))return e;e=e.parentNode}}e.exports=o},function(e,t,i){"use strict";i.r(t);var n=i(0),o=i.n(n),a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(t){s(this,e),this.resolveOptions(t),this.initSelection()}return r(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=o()(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=o()(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==("undefined"===typeof e?"undefined":a(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}(),c=l,u=i(1),d=i.n(u),m=i(2),p=i.n(m),h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(e,i){f(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.resolveOptions(i),n.listenClick(e),n}return b(t,e),g(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof e.action?e.action:this.defaultAction,this.target="function"===typeof e.target?e.target:this.defaultTarget,this.text="function"===typeof e.text?e.text:this.defaultText,this.container="object"===h(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=p()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return C("action",e)}},{key:"defaultTarget",value:function(e){var t=C("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return C("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"===typeof e?[e]:e,i=!!document.queryCommandSupported;return t.forEach((function(e){i=i&&!!document.queryCommandSupported(e)})),i}}]),t}(d.a);function C(e,t){var i="data-clipboard-"+e;if(t.hasAttribute(i))return t.getAttribute(i)}t["default"]=y}])["default"]}))},b4d2:function(e,t,i){"use strict";i("78a2")},b5f6:function(e,t,i){"use strict";i("8802")},b76a:function(e,t,i){(function(t,n){e.exports=n(i("aa47"))})("undefined"!==typeof self&&self,(function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="fb15")}({"01f9":function(e,t,i){"use strict";var n=i("2d00"),o=i("5ca1"),a=i("2aba"),r=i("32e9"),s=i("84f2"),l=i("41a0"),c=i("7f20"),u=i("38fd"),d=i("2b4c")("iterator"),m=!([].keys&&"next"in[].keys()),p="@@iterator",h="keys",g="values",f=function(){return this};e.exports=function(e,t,i,v,b,y,C){l(i,t,v);var w,x,_,P=function(e){if(!m&&e in k)return k[e];switch(e){case h:return function(){return new i(this,e)};case g:return function(){return new i(this,e)}}return function(){return new i(this,e)}},T=t+" Iterator",I=b==g,E=!1,k=e.prototype,$=k[d]||k[p]||b&&k[b],S=$||P(b),D=b?I?P("entries"):S:void 0,N="Array"==t&&k.entries||$;if(N&&(_=u(N.call(new e)),_!==Object.prototype&&_.next&&(c(_,T,!0),n||"function"==typeof _[d]||r(_,d,f))),I&&$&&$.name!==g&&(E=!0,S=function(){return $.call(this)}),n&&!C||!m&&!E&&k[d]||r(k,d,S),s[t]=S,s[T]=f,b)if(w={values:I?S:P(g),keys:y?S:P(h),entries:D},C)for(x in w)x in k||a(k,x,w[x]);else o(o.P+o.F*(m||E),t,w);return w}},"02f4":function(e,t,i){var n=i("4588"),o=i("be13");e.exports=function(e){return function(t,i){var a,r,s=String(o(t)),l=n(i),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===c||(r=s.charCodeAt(l+1))<56320||r>57343?e?s.charAt(l):a:e?s.slice(l,l+2):r-56320+(a-55296<<10)+65536)}}},"0390":function(e,t,i){"use strict";var n=i("02f4")(!0);e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},"0bfb":function(e,t,i){"use strict";var n=i("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0d58":function(e,t,i){var n=i("ce10"),o=i("e11e");e.exports=Object.keys||function(e){return n(e,o)}},1495:function(e,t,i){var n=i("86cc"),o=i("cb7c"),a=i("0d58");e.exports=i("9e1e")?Object.defineProperties:function(e,t){o(e);var i,r=a(t),s=r.length,l=0;while(s>l)n.f(e,i=r[l++],t[i]);return e}},"214f":function(e,t,i){"use strict";i("b0c5");var n=i("2aba"),o=i("32e9"),a=i("79e5"),r=i("be13"),s=i("2b4c"),l=i("520a"),c=s("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();e.exports=function(e,t,i){var m=s(e),p=!a((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),h=p?!a((function(){var t=!1,i=/a/;return i.exec=function(){return t=!0,null},"split"===e&&(i.constructor={},i.constructor[c]=function(){return i}),i[m](""),!t})):void 0;if(!p||!h||"replace"===e&&!u||"split"===e&&!d){var g=/./[m],f=i(r,m,""[e],(function(e,t,i,n,o){return t.exec===l?p&&!o?{done:!0,value:g.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}})),v=f[0],b=f[1];n(String.prototype,e,v),o(RegExp.prototype,m,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"230e":function(e,t,i){var n=i("d3f4"),o=i("7726").document,a=n(o)&&n(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},"23c6":function(e,t,i){var n=i("2d95"),o=i("2b4c")("toStringTag"),a="Arguments"==n(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(i){}};e.exports=function(e){var t,i,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=r(t=Object(e),o))?i:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"2aba":function(e,t,i){var n=i("7726"),o=i("32e9"),a=i("69a8"),r=i("ca5a")("src"),s=i("fa5b"),l="toString",c=(""+s).split(l);i("8378").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,i,s){var l="function"==typeof i;l&&(a(i,"name")||o(i,"name",t)),e[t]!==i&&(l&&(a(i,r)||o(i,r,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=i:s?e[t]?e[t]=i:o(e,t,i):(delete e[t],o(e,t,i)))})(Function.prototype,l,(function(){return"function"==typeof this&&this[r]||s.call(this)}))},"2aeb":function(e,t,i){var n=i("cb7c"),o=i("1495"),a=i("e11e"),r=i("613b")("IE_PROTO"),s=function(){},l="prototype",c=function(){var e,t=i("230e")("iframe"),n=a.length,o="<",r=">";t.style.display="none",i("fab2").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+r+"document.F=Object"+o+"/script"+r),e.close(),c=e.F;while(n--)delete c[l][a[n]];return c()};e.exports=Object.create||function(e,t){var i;return null!==e?(s[l]=n(e),i=new s,s[l]=null,i[r]=e):i=c(),void 0===t?i:o(i,t)}},"2b4c":function(e,t,i){var n=i("5537")("wks"),o=i("ca5a"),a=i("7726").Symbol,r="function"==typeof a,s=e.exports=function(e){return n[e]||(n[e]=r&&a[e]||(r?a:o)("Symbol."+e))};s.store=n},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},"2fdb":function(e,t,i){"use strict";var n=i("5ca1"),o=i("d2c8"),a="includes";n(n.P+n.F*i("5147")(a),"String",{includes:function(e){return!!~o(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(e,t,i){var n=i("86cc"),o=i("4630");e.exports=i("9e1e")?function(e,t,i){return n.f(e,t,o(1,i))}:function(e,t,i){return e[t]=i,e}},"38fd":function(e,t,i){var n=i("69a8"),o=i("4bf8"),a=i("613b")("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},"41a0":function(e,t,i){"use strict";var n=i("2aeb"),o=i("4630"),a=i("7f20"),r={};i("32e9")(r,i("2b4c")("iterator"),(function(){return this})),e.exports=function(e,t,i){e.prototype=n(r,{next:o(1,i)}),a(e,t+" Iterator")}},"456d":function(e,t,i){var n=i("4bf8"),o=i("0d58");i("5eda")("keys",(function(){return function(e){return o(n(e))}}))},4588:function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"4bf8":function(e,t,i){var n=i("be13");e.exports=function(e){return Object(n(e))}},5147:function(e,t,i){var n=i("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[n]=!1,!"/./"[e](t)}catch(o){}}return!0}},"520a":function(e,t,i){"use strict";var n=i("0bfb"),o=RegExp.prototype.exec,a=String.prototype.replace,r=o,s="lastIndex",l=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[s]||0!==t[s]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(r=function(e){var t,i,r,u,d=this;return c&&(i=new RegExp("^"+d.source+"$(?!\\s)",n.call(d))),l&&(t=d[s]),r=o.call(d,e),l&&r&&(d[s]=d.global?r.index+r[0].length:t),c&&r&&r.length>1&&a.call(r[0],i,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(r[u]=void 0)})),r}),e.exports=r},"52a7":function(e,t){t.f={}.propertyIsEnumerable},5537:function(e,t,i){var n=i("8378"),o=i("7726"),a="__core-js_shared__",r=o[a]||(o[a]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(e,t,i){var n=i("7726"),o=i("8378"),a=i("32e9"),r=i("2aba"),s=i("9b43"),l="prototype",c=function(e,t,i){var u,d,m,p,h=e&c.F,g=e&c.G,f=e&c.S,v=e&c.P,b=e&c.B,y=g?n:f?n[t]||(n[t]={}):(n[t]||{})[l],C=g?o:o[t]||(o[t]={}),w=C[l]||(C[l]={});for(u in g&&(i=t),i)d=!h&&y&&void 0!==y[u],m=(d?y:i)[u],p=b&&d?s(m,n):v&&"function"==typeof m?s(Function.call,m):m,y&&r(y,u,m,e&c.U),C[u]!=m&&a(C,u,p),v&&w[u]!=m&&(w[u]=m)};n.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},"5eda":function(e,t,i){var n=i("5ca1"),o=i("8378"),a=i("79e5");e.exports=function(e,t){var i=(o.Object||{})[e]||Object[e],r={};r[e]=t(i),n(n.S+n.F*a((function(){i(1)})),"Object",r)}},"5f1b":function(e,t,i){"use strict";var n=i("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var i=e.exec;if("function"===typeof i){var a=i.call(e,t);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"613b":function(e,t,i){var n=i("5537")("keys"),o=i("ca5a");e.exports=function(e){return n[e]||(n[e]=o(e))}},"626a":function(e,t,i){var n=i("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},6762:function(e,t,i){"use strict";var n=i("5ca1"),o=i("c366")(!0);n(n.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},6821:function(e,t,i){var n=i("626a"),o=i("be13");e.exports=function(e){return n(o(e))}},"69a8":function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},"6a99":function(e,t,i){var n=i("d3f4");e.exports=function(e,t){if(!n(e))return e;var i,o;if(t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;if("function"==typeof(i=e.valueOf)&&!n(o=i.call(e)))return o;if(!t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},7333:function(e,t,i){"use strict";var n=i("0d58"),o=i("2621"),a=i("52a7"),r=i("4bf8"),s=i("626a"),l=Object.assign;e.exports=!l||i("79e5")((function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach((function(e){t[e]=e})),7!=l({},e)[i]||Object.keys(l({},t)).join("")!=n}))?function(e,t){var i=r(e),l=arguments.length,c=1,u=o.f,d=a.f;while(l>c){var m,p=s(arguments[c++]),h=u?n(p).concat(u(p)):n(p),g=h.length,f=0;while(g>f)d.call(p,m=h[f++])&&(i[m]=p[m])}return i}:l},7726:function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},"77f1":function(e,t,i){var n=i("4588"),o=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):a(e,t)}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"7f20":function(e,t,i){var n=i("86cc").f,o=i("69a8"),a=i("2b4c")("toStringTag");e.exports=function(e,t,i){e&&!o(e=i?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},8378:function(e,t){var i=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=i)},"84f2":function(e,t){e.exports={}},"86cc":function(e,t,i){var n=i("cb7c"),o=i("c69a"),a=i("6a99"),r=Object.defineProperty;t.f=i("9e1e")?Object.defineProperty:function(e,t,i){if(n(e),t=a(t,!0),n(i),o)try{return r(e,t,i)}catch(s){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},"9b43":function(e,t,i){var n=i("d8e8");e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,i){var n=i("2b4c")("unscopables"),o=Array.prototype;void 0==o[n]&&i("32e9")(o,n,{}),e.exports=function(e){o[n][e]=!0}},"9def":function(e,t,i){var n=i("4588"),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},"9e1e":function(e,t,i){e.exports=!i("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a352:function(t,i){t.exports=e},a481:function(e,t,i){"use strict";var n=i("cb7c"),o=i("4bf8"),a=i("9def"),r=i("4588"),s=i("0390"),l=i("5f1b"),c=Math.max,u=Math.min,d=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};i("214f")("replace",2,(function(e,t,i,g){return[function(n,o){var a=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,a,o):i.call(String(a),n,o)},function(e,t){var o=g(i,e,this,t);if(o.done)return o.value;var d=n(e),m=String(this),p="function"===typeof t;p||(t=String(t));var v=d.global;if(v){var b=d.unicode;d.lastIndex=0}var y=[];while(1){var C=l(d,m);if(null===C)break;if(y.push(C),!v)break;var w=String(C[0]);""===w&&(d.lastIndex=s(m,a(d.lastIndex),b))}for(var x="",_=0,P=0;P<y.length;P++){C=y[P];for(var T=String(C[0]),I=c(u(r(C.index),m.length),0),E=[],k=1;k<C.length;k++)E.push(h(C[k]));var $=C.groups;if(p){var S=[T].concat(E,I,m);void 0!==$&&S.push($);var D=String(t.apply(void 0,S))}else D=f(T,m,I,E,$,t);I>=_&&(x+=m.slice(_,I)+D,_=I+T.length)}return x+m.slice(_)}];function f(e,t,n,a,r,s){var l=n+e.length,c=a.length,u=p;return void 0!==r&&(r=o(r),u=m),i.call(s,u,(function(i,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(l);case"<":s=r[o.slice(1,-1)];break;default:var u=+o;if(0===u)return i;if(u>c){var m=d(u/10);return 0===m?i:m<=c?void 0===a[m-1]?o.charAt(1):a[m-1]+o.charAt(1):i}s=a[u-1]}return void 0===s?"":s}))}}))},aae3:function(e,t,i){var n=i("d3f4"),o=i("2d95"),a=i("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},ac6a:function(e,t,i){for(var n=i("cadf"),o=i("0d58"),a=i("2aba"),r=i("7726"),s=i("32e9"),l=i("84f2"),c=i("2b4c"),u=c("iterator"),d=c("toStringTag"),m=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(p),g=0;g<h.length;g++){var f,v=h[g],b=p[v],y=r[v],C=y&&y.prototype;if(C&&(C[u]||s(C,u,m),C[d]||s(C,d,v),l[v]=m,b))for(f in n)C[f]||a(C,f,n[f],!0)}},b0c5:function(e,t,i){"use strict";var n=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},c366:function(e,t,i){var n=i("6821"),o=i("9def"),a=i("77f1");e.exports=function(e){return function(t,i,r){var s,l=n(t),c=o(l.length),u=a(r,c);if(e&&i!=i){while(c>u)if(s=l[u++],s!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===i)return e||u||0;return!e&&-1}}},c649:function(e,t,i){"use strict";(function(e){i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return l}));i("a481");function n(){return"undefined"!==typeof window?window.console:e.console}var o=n();function a(e){var t=Object.create(null);return function(i){var n=t[i];return n||(t[i]=e(i))}}var r=/-(\w)/g,s=a((function(e){return e.replace(r,(function(e,t){return t?t.toUpperCase():""}))}));function l(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function c(e,t,i){var n=0===i?e.children[0]:e.children[i-1].nextSibling;e.insertBefore(t,n)}}).call(this,i("c8ba"))},c69a:function(e,t,i){e.exports=!i("9e1e")&&!i("79e5")((function(){return 7!=Object.defineProperty(i("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}e.exports=i},ca5a:function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},cadf:function(e,t,i){"use strict";var n=i("9c6c"),o=i("d53b"),a=i("84f2"),r=i("6821");e.exports=i("01f9")(Array,"Array",(function(e,t){this._t=r(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},cb7c:function(e,t,i){var n=i("d3f4");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},ce10:function(e,t,i){var n=i("69a8"),o=i("6821"),a=i("c366")(!1),r=i("613b")("IE_PROTO");e.exports=function(e,t){var i,s=o(e),l=0,c=[];for(i in s)i!=r&&n(s,i)&&c.push(i);while(t.length>l)n(s,i=t[l++])&&(~a(c,i)||c.push(i));return c}},d2c8:function(e,t,i){var n=i("aae3"),o=i("be13");e.exports=function(e,t,i){if(n(t))throw TypeError("String#"+i+" doesn't accept regex!");return String(o(e))}},d3f4:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(e,t,i){"use strict";var n=i("5ca1"),o=i("9def"),a=i("d2c8"),r="startsWith",s=""[r];n(n.P+n.F*i("5147")(r),"String",{startsWith:function(e){var t=a(this,e,r),i=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return s?s.call(t,n,i):t.slice(i,i+n.length)===n}})},f6fd:function(e,t){(function(e){var t="currentScript",i=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(n){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(e in i)if(i[e].src==t||"interactive"==i[e].readyState)return i[e];return null}}})})(document)},f751:function(e,t,i){var n=i("5ca1");n(n.S+n.F,"Object",{assign:i("7333")})},fa5b:function(e,t,i){e.exports=i("5537")("native-function-to-string",Function.toString)},fab2:function(e,t,i){var n=i("7726").document;e.exports=n&&n.documentElement},fb15:function(e,t,i){"use strict";var n;(i.r(t),"undefined"!==typeof window)&&(i("f6fd"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(i.p=n[1]));i("f751"),i("f559"),i("ac6a"),i("cadf"),i("456d");function o(e){if(Array.isArray(e))return e}function a(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(i.push(r.value),t&&i.length===t)break}catch(l){o=!0,a=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(o)throw a}}return i}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function s(e,t){if(e){if("string"===typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return o(e)||a(e,t)||s(e,t)||l()}i("6762"),i("2fdb");function u(e){if(Array.isArray(e))return r(e)}function d(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return u(e)||d(e)||s(e)||m()}var h=i("a352"),g=i.n(h),f=i("c649");function v(e,t,i){return void 0===i||(e=e||{},e[t]=i),e}function b(e,t){return e.map((function(e){return e.elm})).indexOf(t)}function y(e,t,i,n){if(!e)return[];var o=e.map((function(e){return e.elm})),a=t.length-n,r=p(t).map((function(e,t){return t>=a?o.length:o.indexOf(e)}));return i?r.filter((function(e){return-1!==e})):r}function C(e,t){var i=this;this.$nextTick((function(){return i.$emit(e.toLowerCase(),t)}))}function w(e){var t=this;return function(i){null!==t.realList&&t["onDrag"+e](i),C.call(t,e,i)}}function x(e){return["transition-group","TransitionGroup"].includes(e)}function _(e){if(!e||1!==e.length)return!1;var t=c(e,1),i=t[0].componentOptions;return!!i&&x(i.tag)}function P(e,t,i){return e[i]||(t[i]?t[i]():void 0)}function T(e,t,i){var n=0,o=0,a=P(t,i,"header");a&&(n=a.length,e=e?[].concat(p(a),p(e)):p(a));var r=P(t,i,"footer");return r&&(o=r.length,e=e?[].concat(p(e),p(r)):p(r)),{children:e,headerOffset:n,footerOffset:o}}function I(e,t){var i=null,n=function(e,t){i=v(i,e,t)},o=Object.keys(e).filter((function(e){return"id"===e||e.startsWith("data-")})).reduce((function(t,i){return t[i]=e[i],t}),{});if(n("attrs",o),!t)return i;var a=t.on,r=t.props,s=t.attrs;return n("on",a),n("props",r),Object.assign(i.attrs,s),i}var E=["Start","Add","Remove","Update","End"],k=["Choose","Unchoose","Sort","Filter","Clone"],$=["Move"].concat(E,k).map((function(e){return"on"+e})),S=null,D={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},N={name:"draggable",inheritAttrs:!1,props:D,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(e){var t=this.$slots.default;this.transitionMode=_(t);var i=T(t,this.$slots,this.$scopedSlots),n=i.children,o=i.headerOffset,a=i.footerOffset;this.headerOffset=o,this.footerOffset=a;var r=I(this.$attrs,this.componentData);return e(this.getTag(),r,n)},created:function(){null!==this.list&&null!==this.value&&f["b"].error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&f["b"].warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&f["b"].warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var t={};E.forEach((function(i){t["on"+i]=w.call(e,i)})),k.forEach((function(i){t["on"+i]=C.bind(e,i)}));var i=Object.keys(this.$attrs).reduce((function(t,i){return t[Object(f["a"])(i)]=e.$attrs[i],t}),{}),n=Object.assign({},this.options,i,t,{onMove:function(t,i){return e.onDragMove(t,i)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new g.a(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){this.updateOptions(e)},deep:!0},$attrs:{handler:function(e){this.updateOptions(e)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var e=this._vnode.fnOptions;return e&&e.functional},getTag:function(){return this.tag||this.element},updateOptions:function(e){for(var t in e){var i=Object(f["a"])(t);-1===$.indexOf(i)&&this._sortable.option(i,e[t])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick((function(){e.visibleIndexes=y(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode,e.footerOffset)}))},getUnderlyingVm:function(e){var t=b(this.getChildrenNodes()||[],e);if(-1===t)return null;var i=this.realList[t];return{index:t,element:i}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&x(t.$options._componentTag)?t.$parent:!("realList"in t)&&1===t.$children.length&&"realList"in t.$children[0]?t.$children[0]:t},emitChanges:function(e){var t=this;this.$nextTick((function(){t.$emit("change",e)}))},alterList:function(e){if(this.list)e(this.list);else{var t=p(this.value);e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,p(e))};this.alterList(t)},updatePosition:function(e,t){var i=function(i){return i.splice(t,0,i.splice(e,1)[0])};this.alterList(i)},getRelatedContextFromMoveEvent:function(e){var t=e.to,i=e.related,n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};var o=n.realList,a={list:o,component:n};if(t!==i&&o&&n.getUnderlyingVm){var r=n.getUnderlyingVm(i);if(r)return Object.assign(r,a)}return a},getVmIndex:function(e){var t=this.visibleIndexes,i=t.length;return e>i-1?i:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){var t=this.getChildrenNodes();t[e].data=null;var i=this.getComponent();i.children=[],i.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),S=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){Object(f["d"])(e.item);var i=this.getVmIndex(e.newIndex);this.spliceList(i,0,t),this.computeIndexes();var n={element:t,newIndex:i};this.emitChanges({added:n})}},onDragRemove:function(e){if(Object(f["c"])(this.rootContainer,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context.index;this.spliceList(t,1);var i={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:i})}else Object(f["d"])(e.clone)},onDragUpdate:function(e){Object(f["d"])(e.item),Object(f["c"])(e.from,e.item,e.oldIndex);var t=this.context.index,i=this.getVmIndex(e.newIndex);this.updatePosition(t,i);var n={element:this.context.element,oldIndex:t,newIndex:i};this.emitChanges({moved:n})},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var i=p(t.to.children).filter((function(e){return"none"!==e.style["display"]})),n=i.indexOf(t.related),o=e.component.getVmIndex(n),a=-1!==i.indexOf(S);return a||!t.willInsertAfter?o:o+1},onDragMove:function(e,t){var i=this.move;if(!i||!this.realList)return!0;var n=this.getRelatedContextFromMoveEvent(e),o=this.context,a=this.computeFutureIndex(n,e);Object.assign(o,{futureIndex:a});var r=Object.assign({},e,{relatedContext:n,draggedContext:o});return i(r,t)},onDragEnd:function(){this.computeIndexes(),S=null}}};"undefined"!==typeof window&&"Vue"in window&&window.Vue.component("draggable",N);var O=N;t["default"]=O}})["default"]}))},b825:function(e,t,i){"use strict";i("18bd")},b8dc:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-7",attrs:{type:"gradient-success"}}),i("div",{staticClass:"ml-4 mr-4 mb-4 p-4 mt--7"},[i("device-table")],1)],1)},o=[],a=i("11b4"),r={components:{DeviceTable:a["a"]},created:function(){var e=this.$session.get("user-info");if(void 0!=e){var t=e.brandId;void 0!=t?this.$store.commit("device/setBrandId",t):this.$router.push("/login").catch((function(){}))}else this.$router.push("/login").catch((function(){}))},methods:{},props:{},watch:{},data:function(){return{}}},s=r,l=i("2877"),c=Object(l["a"])(s,n,o,!1,null,null,null);t["default"]=c.exports},bc7c:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"promotion"}},[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid mt--9"},[i("div",{staticClass:"card shadow"},[i("div",{staticClass:"card-header bg-transparent promotion"},[i("el-row",{attrs:{type:"flex",justify:"space-between"}},[i("el-col",{staticClass:"mt-2",attrs:{span:22}},[i("h2",{staticClass:"mb-0"},[e._v("Manage Promotion")])]),i("el-col",{staticClass:"float-right mt-1",attrs:{span:2}},[i("el-button",{attrs:{size:"medium",type:"success",icon:"el-icon-plus"},on:{click:e.addPromotion}},[e._v("New Promotion")])],1)],1)],1)]),i("el-row",{staticClass:"mt-3"},[i("promotions-table")],1)],1)],1)},o=[],a=i("2b0e"),r=i("4eb5"),s=i.n(r),l=i("5f5b"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow pl-3 pr-3",attrs:{id:"promotion-table"}},[i("div",{staticClass:"card-header border-0 pt-3 pb-2 pr-2 mr-1"},[i("div",{staticClass:"row align-items-center"},[i("div",{staticClass:"col-12 pl-1 pr-1"},[i("div",{staticClass:"float-right"},[i("el-input",{staticStyle:{width:"30vw"},attrs:{size:"medium",placeholder:"Search by name","prefix-icon":"fa fa-search "},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),i("el-select",{staticClass:"text-dark ml-3",staticStyle:{width:"10vw",padding:"0px"},attrs:{slot:"append",size:"medium",placeholder:"Select"},on:{change:e.filterPromotion},slot:"append",model:{value:e.selectedStatus,callback:function(t){e.selectedStatus=t},expression:"selectedStatus"}},[i("el-option",{attrs:{label:"ALL",value:0}}),i("el-option",{attrs:{label:"DRAFT",value:e.$ENV.PROMOTION_STATUS.DRAFT}}),i("el-option",{attrs:{label:"PUBLISH",value:e.$ENV.PROMOTION_STATUS.PUBLISH}}),i("el-option",{attrs:{label:"UNPUBLISH",value:e.$ENV.PROMOTION_STATUS.UNPUBLISH}}),i("el-option",{attrs:{label:"EXPIRED",value:e.$ENV.PROMOTION_STATUS.EXPIRED}})],1)],1)])])]),i("div",{staticClass:"table-responsive"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"filterTable",staticClass:"promotion-table",staticStyle:{width:"100%",color:"#525f7f"},attrs:{data:e.promotionList,"header-cell-style":{color:"#696969","font-weight":"600","font-size":"1rem !important","background-color":"#f4f4f4","padding-bottom":"1vh","padding-top":"1.2vh"},"cell-style":{"padding-top":"1.3vh","padding-bottom":"1.3vh","padding-left":"0px","padding-right":"0px","font-size":"1.05rem !important",height:"5.5vh"}}},[i("el-table-column",{attrs:{label:"NO",type:"index",align:"left",index:e.indexMethod,"min-width":40}}),i("el-table-column",{attrs:{prop:"promotionName",label:"NAME",sortable:"","column-key":"date",align:"left","min-width":250},scopedSlots:e._u([{key:"default",fn:function(t){return[i("router-link",{staticClass:"text-body",staticStyle:{"word-break":"break-word"},attrs:{to:{name:"Promotion detail",params:{id:t.row.promotionId}}}},[e._v(" "+e._s(t.row.promotionName)+" ")])]}}])}),i("el-table-column",{attrs:{label:"TYPE",align:"left","min-width":150},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasVoucher?i("div",[i("el-tag",{attrs:{type:"success",effect:"dark"}},[i("span",{staticClass:"mb-0 promo-type text-uppercase",staticStyle:{"word-break":"break-word"}},[e._v(" "+e._s(e._f("voucherFilter")(t.row.hasVoucher))+" ")])])],1):e._e(),t.row.isAuto?i("div",[i("el-tag",{attrs:{type:"warning",effect:"dark"}},[i("span",{staticClass:"mb-0 promo-type text-uppercase",staticStyle:{"word-break":"break-word"}},[e._v(" "+e._s(e._f("autoFilter")(t.row.isAuto))+" ")])])],1):e._e(),t.row.hasVoucher||t.row.isAuto?e._e():i("div",[i("el-tag",{attrs:{type:"primary",effect:"dark"}},[i("span",{staticClass:"mb-0 promo-type text-uppercase",staticStyle:{"word-break":"break-word"}},[e._v(" "+e._s(e._f("voucherFilter")(t.row.hasVoucher))+" ")])])],1)]}}])}),i("el-table-column",{attrs:{label:"ACTION",align:"left","min-width":130},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.actionType>e.$ENV.ACTION_TYPE.EMPTY?i("div",[i("span",{staticClass:"mb-0",staticStyle:{"word-break":"break-word"}},[e._v(" "+e._s(e._f("actionTypeFilter")(t.row.actionType))+" ")])]):e._e(),t.row.postActionType>e.$ENV.POST_ACTION_TYPE.EMPTY?i("div",[i("span",{staticClass:"mb-0",staticStyle:{"word-break":"break-word"}},[e._v(" "+e._s(e._f("postActionTypeFilter")(t.row.postActionType))+" ")])]):e._e()]}}])}),i("el-table-column",{staticClass:"text-body",attrs:{prop:"startDate",label:"START",align:"left","min-width":110,sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-time mr-1"}),e._v(" "+e._s(e._f("dateFormat")(t.row.startDate))+" ")]}}])}),i("el-table-column",{attrs:{prop:"status",label:"STATUS","min-width":80,align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{directives:[{name:"show",rawName:"v-show",value:t.row.status==e.$ENV.PROMOTION_STATUS.DRAFT,expression:"scope.row.status == $ENV.PROMOTION_STATUS.DRAFT"}],staticStyle:{"font-size":"0.95rem","font-weight":"600","word-break":"break-word"}},[i("i",{staticClass:"fa fa-circle align-middle mb-0",staticStyle:{"font-size":"0.35rem"}}),e._v(" "+e._s(e._f("status")(t.row.status))+" ")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.row.status==e.$ENV.PROMOTION_STATUS.PUBLISH,expression:"scope.row.status == $ENV.PROMOTION_STATUS.PUBLISH"}],staticClass:"text-success",staticStyle:{"font-size":"0.95rem","font-weight":"600","word-break":"break-word"}},[i("i",{staticClass:"fa fa-circle align-middle mb-0",staticStyle:{"font-size":"0.35rem"}}),e._v(" "+e._s(e._f("status")(t.row.status))+" ")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.row.status==e.$ENV.PROMOTION_STATUS.UNPUBLISH,expression:"scope.row.status == $ENV.PROMOTION_STATUS.UNPUBLISH"}],staticClass:"text-primary",staticStyle:{"font-size":"0.95rem","font-weight":"600","word-break":"break-word"}},[i("i",{staticClass:"fa fa-circle align-middle mb-0",staticStyle:{"font-size":"0.35rem"}}),e._v(" "+e._s(e._f("status")(t.row.status))+" ")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.row.status==e.$ENV.PROMOTION_STATUS.EXPIRED,expression:"scope.row.status == $ENV.PROMOTION_STATUS.EXPIRED"}],staticClass:"text-danger",staticStyle:{"font-size":"0.95rem","font-weight":"600","word-break":"break-word"}},[i("i",{staticClass:"fa fa-circle align-middle mb-0",staticStyle:{"font-size":"0.35rem"}}),e._v(" "+e._s(e._f("status")(t.row.status))+" ")])]}}])}),i("el-table-column",{staticClass:"pt-0 pb-0",attrs:{align:"center","min-width":70},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"p-0 m-0 action-button bg-transparent",staticStyle:{outline:"none",border:"0px"},attrs:{icon:"el-icon-delete-solid"},on:{click:function(i){return e.deletePromotion(t.row)}}})]}}])})],1)],1),i("div",{staticClass:"d-flex justify-content-end align-items-center mr-2 mb-2 mt-2",class:"dark"===e.type?"bg-transparent":""},[i("base-pagination",{staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1)])},u=[],d=(i("ac1f"),i("841c"),i("c1df")),m=i.n(d),p=i("b012"),h={name:"promotion-table",props:{type:{type:String},title:String},data:function(){return{pagination:{default:1},search:"",loading:!0,pageCount:1,selectedStatus:0}},computed:{promotionList:function(){return this.setPageCount(),this.$store.state.dashboard.promotionList}},watch:{search:function(){""!==this.search?(this.$store.commit("dashboard/setSearchContent",this.search),this.loading=!0,this.getSearch()):this.getPromotionList()}},methods:{deletePromotion:function(e){var t=this;this.$confirm("Do you want to delete Promotion ?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.loading=!0;var i=e.promotionId;t.$store.commit("promotion/setDeleteId",i),t.$store.dispatch("promotion/DeletePromotion").then((function(e){200==e.status?(t.$notify({title:"Success",message:"Delete successfully",type:"success"}),t.changePage(1)):(t.loading=!1,t.$message({message:"Something went wrong, please try again.",type:"error"}))})).catch((function(e){t.loading=!1,t.$message({message:e.message+", please try again.",type:"error"})}))}))},changePage:function(e){""!=this.search?(this.$store.commit("dashboard/setPageIndex",e),this.loading=!0,this.getSearch()):(this.$store.commit("dashboard/setPageIndex",e),this.loading=!0,this.getPromotionList())},setPageCount:function(){var e=this.$store.state.dashboard.PageSize;this.pageCount=Math.ceil(this.$store.state.dashboard.counter/e)},filterPromotion:function(){var e=this;this.loading=!0,this.$store.commit("dashboard/setSearchStatus",this.selectedStatus),this.$store.dispatch("dashboard/searchPromotion").then((function(t){e.loading=!1,200!=t.status&&e.$notify({icon:"el-icon-circle-check",title:"Error",message:"Search promotion error, please try again",type:"warning"})})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-circle-check",title:"Error",message:"Search promotion error, please try again",type:"warning"})}))},getSearch:Object(p["debounce"])((function(){var e=this;this.loading=!0,this.$store.commit("dashboard/setSearchStatus",this.selectedStatus),this.$store.dispatch("dashboard/searchPromotion").then((function(t){e.loading=!1,200!=t.status&&e.$notify({icon:"el-icon-circle-check",title:"Error",message:"Search promotion error, please try again",type:"warning"})})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-circle-check",title:"Error",message:"Search promotion error, please try again",type:"warning"})}))}),1e3),getPromotionList:function(){var e=this;this.$store.dispatch("dashboard/countPromotion").catch((function(t){e.loading=!1,e.$message.error(t)})),this.$store.dispatch("dashboard/getPromotionList").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))},filterStatus:function(e,t){return t.status===e},indexMethod:function(e){var t=this.$store.state.dashboard.PageSize,i=this.$store.state.dashboard.PageIndex;return e+=1,i>1?e+(i-1)*t:e}},created:function(){this.getPromotionList()},filters:{autoFilter:function(e){switch(e){case!0:return"Automatic"}},voucherFilter:function(e){switch(e){case!0:return"Using voucher";case!1:return"Using promotion code"}},actionTypeFilter:function(e){switch(e){case 1:return"Discount amount of order";case 2:return"Discount percent of order";case 3:return"Discount shipping fee of order";case 4:return"Discount amount of item";case 5:return"Discount percent of item";case 6:return"Discount unit of item";case 7:return"Fixed price of item";case 8:return"Ladder price of item";case 9:return"Bundle price of item"}},postActionTypeFilter:function(e){switch(e){case 1:return"Gift products";case 2:return"Gift vouchers";case 3:return"Gift points";case 4:return"Gift game code"}},status:function(e){switch(e){case 1:return"draft";case 2:return"published";case 3:return"unpublished";case 4:return"expired"}},type:function(e){switch(e){case"1":return"Discount";case"2":return"Promotion";case"3":return"Gift";case"4":return"Bonus Point"}},dateFormat:function(e){if(e)return m()(e).format("DD/MM/YYYY")},voucherName:function(e){return e.length>15?e.substring(0,14)+"...":e}}},g=h,f=(i("43bb"),i("2877")),v=Object(f["a"])(g,c,u,!1,null,null,null),b=v.exports;a["default"].use(s.a);var y={directives:{"b-tooltip":l["b"]},components:{PromotionsTable:b},data:function(){return{}},created:function(){},beforeMount:function(){},methods:{addPromotion:function(){this.$router.push("/campaign/promotion/wizard")}}},C=y,w=(i("6ac3"),Object(f["a"])(C,n,o,!1,null,null,null));t["default"]=w.exports},bddb:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("base-header",{staticClass:"pb-6 mb-3 pt-1",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid"},[i("el-card",{attrs:{shadow:"never"}},[i("h2",[e._v("GENERAL INFORMATION")]),i("el-divider",{staticClass:"mt-3 mb-3"}),i("el-row",{attrs:{gutter:20,justify:"start"}},[i("el-col",{attrs:{span:12}},[i("el-card",{staticClass:"my-card",attrs:{shadow:"never"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("label",{staticStyle:{"font-size":"18px"}},[i("b",[e._v(" Name: ")]),e._v(" "+e._s(e.voucherGroupDetail.voucherName))])])],1),i("el-row",{staticClass:"mt-2",attrs:{gutter:20}},[e.voucherGroupDetail.actionType>e.$ENV.ACTION_TYPE.EMPTY?i("el-col",{attrs:{span:12}},[i("span",[i("label",[i("b",[e._v(" Action type: ")]),e._v(e._s(e._f("actionTypeFilter")(e.voucherGroupDetail.actionType))+" ")])]),i("h2",[e._v(e._s(e.voucherGroupDetail.action.name))]),e.voucherGroupDetail.action.delFlg?i("el-tag",{staticStyle:{"font-size":"0.95rem"},attrs:{type:"danger"}},[i("i",{staticClass:"el-icon-warning-outline"}),e._v(" This action is no longer existed. Please select another action ")]):e._e(),i("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.actionLoading,expression:"actionLoading"}],staticClass:"mt-2",staticStyle:{width:"100%"},model:{value:e.voucherGroupDetail.actionId,callback:function(t){e.$set(e.voucherGroupDetail,"actionId",t)},expression:"voucherGroupDetail.actionId"}},e._l(e.actions,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.actionId}})})),1)],1):e._e(),e.voucherGroupDetail.postActionType>e.$ENV.POST_ACTION_TYPE.EMPTY?i("el-col",{attrs:{span:12}},[i("span",[i("label",[i("b",[e._v(" Action type: ")]),e._v(e._s(e._f("postActionTypeFilter")(e.voucherGroupDetail.postActionType))+" ")])]),i("h2",[e._v(e._s(e.voucherGroupDetail.gift.name))]),e.voucherGroupDetail.gift.delFlg?i("el-tag",{staticStyle:{"font-size":"0.95rem"},attrs:{type:"danger"}},[i("i",{staticClass:"el-icon-warning-outline"}),e._v(" This action is no longer existed. Please select another action ")]):e._e(),i("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.giftLoading,expression:"giftLoading"}],staticClass:"mt-2",staticStyle:{width:"100%"},model:{value:e.voucherGroupDetail.giftId,callback:function(t){e.$set(e.voucherGroupDetail,"giftId",t)},expression:"voucherGroupDetail.giftId"}},e._l(e.gifts,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.giftId}})})),1)],1):e._e(),i("el-col",{attrs:{span:12}},[i("el-button",{staticClass:"float-right",attrs:{type:"success"},on:{click:e.updateGroup}},[e._v("Update")])],1)],1),i("el-row",{staticClass:"mt-2"})],1)],1),i("el-col",{attrs:{span:12}},[i("el-card",{staticClass:"my-card",attrs:{shadow:"never"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("label",{staticStyle:{"font-size":"18px"}},[i("b",[e._v(" Total voucher: ")]),e._v(e._s(e.voucherGroupDetail.total)+" voucher(s)")])])],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:8}},[i("center",[i("el-progress",{attrs:{color:"#67C23A",type:"circle",percentage:e.usedPercent}}),i("br"),i("label",{staticClass:"mt-2",staticStyle:{"font-size":"17px"}},[i("b",[e._v(" Used: ")]),e._v(" "+e._s(e.voucherGroupDetail.usedQuantity))])],1)],1),i("el-col",{attrs:{span:8}},[i("center",[i("el-progress",{attrs:{type:"circle",percentage:e.redempedPercent}}),i("br"),i("label",{staticClass:"mt-2",staticStyle:{"font-size":"17px"}},[i("b",[e._v(" Redemped: ")]),e._v(" "+e._s(e.voucherGroupDetail.redempedQuantity))])],1)],1),i("el-col",{attrs:{span:8}},[i("center",[i("el-progress",{attrs:{color:"#EBB563",type:"circle",percentage:e.remainPercent}}),i("br"),i("label",{staticClass:"mt-2",staticStyle:{"font-size":"17px"}},[i("b",[e._v(" Remain: ")]),e._v(" "+e._s(e.voucherGroupDetail.remain))])],1)],1)],1)],1)],1)],1)],1),i("el-card",{staticClass:"mt-3",attrs:{shadow:"never"}},[i("h2",[e._v("DETAIL INFORMATION")]),i("el-divider",{staticClass:"mt-3 mb-3"}),i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{attrs:{label:"Voucher List"}},[i("voucher-table",{on:{getVoucherGroupDetail:e.getVoucherGroupDetail}})],1),i("el-tab-pane",{attrs:{label:"Promotions"}},[i("voucher-promo-check",{attrs:{promoListParam:e.promoList}})],1),i("el-tab-pane",{attrs:{label:"Distribution"}},[i("voucher-channel-check")],1)],1)],1)],1)],1)},o=[],a=(i("45fc"),i("96cf"),i("1da1")),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("el-card",{staticClass:"pb-3",staticStyle:{height:"12vh"}},[i("el-row",[i("el-select",{staticClass:"mr-3",staticStyle:{width:"60%"},attrs:{placeholder:"Select Channel"},on:{change:e.selectChannel},model:{value:e.channelSelectId,callback:function(t){e.channelSelectId=t},expression:"channelSelectId"}},e._l(e.channels,(function(e,t){return i("el-option",{key:t,attrs:{label:e.channelName,value:e.channelId}})})),1)],1)],1)],1)],1),i("el-row",{staticClass:"mt-4"},[i("el-col",{attrs:{span:24}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{height:"400",data:e.checkVouchers,"header-row-class-name":"custom-table","cell-class-name":"custom-table",border:""}},[i("el-table-column",{attrs:{label:"No.",type:"index"}}),i("el-table-column",{attrs:{label:"Code"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{staticClass:"tag-custom",attrs:{effect:"dark",size:"medium",type:"success"}},[e._v(" "+e._s(t.row.voucherCode)+" ")])]}}])}),i("el-table-column",{attrs:{label:"Number",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{staticClass:"tag-custom",attrs:{size:"small",effect:"dark",type:"info"}},[e._v(" "+e._s(t.row.index)+" ")])]}}])}),i("el-table-column",{attrs:{label:"Promotion"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.promotion||t.row.promotion.delFlg?e._e():i("router-link",{staticStyle:{"word-break":"break-word"},attrs:{type:"primary",to:{name:"Promotion detail",params:{id:t.row.promotion.promotionId}}}},[e._v(" "+e._s(t.row.promotion.promotionName)+" ")]),null!=t.row.promotion&&t.row.promotion.delFlg?i("label",[e._v(" "+e._s(t.row.promotion.promotionName))]):e._e(),null==t.row.promotion?i("label",[e._v("N/A")]):e._e()]}}])}),i("el-table-column",{attrs:{label:"Redemped Date"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isRedemped?i("label",[e._v(e._s(e._f("formatDate")(t.row.redempedDate)))]):e._e()]}}])}),i("el-table-column",{attrs:{label:"Customer"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.membership?i("label",[e._v("N/A")]):e._e(),null!=t.row.membership?i("label",[e._v(e._s(t.row.membership.fullname))]):e._e()]}}])}),i("el-table-column",{attrs:{label:"Used"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isUsed?e._e():i("label",[e._v("No")])]}}])})],1),i("div",{staticClass:"mt-2 d-flex justify-content-end"},[i("base-pagination",{attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1)],1)],1)],1)},s=[],l=i("c1df"),c=i.n(l),u={name:"voucher-check-channel",filters:{formatDate:function(e){return c()(e).format("DD/MM/YYYY HH:mm")}},data:function(){return{pagination:{default:1},loading:!1,pageCount:1,channelSelectId:"",channelLoading:!1}},computed:{checkVouchers:function(){return this.$store.state.voucher.checkChannelVouchers},channels:function(){return this.$store.state.channel.channelForVoucher}},props:{promoListParam:Array},created:function(){this.getChannels()},beforeDestroy:function(){this.$store.commit("voucher/setCheckChannelId",""),this.$store.commit("voucher/setCheckChannelPageSize",10),this.$store.commit("voucher/setCheckChannelPageIndex",1),this.$store.commit("voucher/setCheckChannelCounter",0),this.$store.commit("voucher/setCheckChannelVoucher",[])},methods:{selectChannel:function(e){this.$store.commit("voucher/setCheckChannelId",e),this.pagination.default=1,this.changePage(1)},setPageCount:function(){var e=this.$store.state.voucher.checkChannelPageSize;this.pageCount=Math.ceil(this.$store.state.voucher.checkChannelCounter/e)},changePage:function(e){this.loading=!0,this.$store.commit("voucher/setCheckChannelPageIndex",e),this.getVoucherList()},getChannels:function(){var e=this;this.channelLoading=!0,this.$store.dispatch("channel/getChannelForVoucher").then((function(t){e.channelLoading=!1,200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Get channel Error",type:"danger"})})).catch((function(){e.channelLoading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Get channel Error",type:"danger"})}))},getVoucherList:function(){var e=this;this.loading=!0,this.$store.commit("voucher/setVoucherGroupId",this.$route.params.id),this.$store.dispatch("voucher/checkChannelOfVoucher").then((function(t){e.loading=!1,200!=t.status?e.$notify({icon:"el-icon-warning",title:"Error",message:"Check Promotion Error",type:"danger"}):e.setPageCount()})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Check Promotion Error",type:"danger"})}))}}},d=u,m=(i("60f6"),i("2877")),p=Object(m["a"])(d,r,s,!1,null,"4d9521f7",null),h=p.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:16}},[i("el-card",{staticClass:"pb-3",staticStyle:{height:"12vh"}},[i("el-row",[i("el-col",{attrs:{span:5}},[i("el-select",{staticClass:"text-dark",staticStyle:{width:"95%"},on:{change:e.changeStatus},model:{value:e.filterOption,callback:function(t){e.filterOption=t},expression:"filterOption"}},e._l(e.filterOptions,(function(e,t){return i("el-option",{key:t,staticStyle:{},attrs:{value:e.id,label:e.value}})})),1)],1),i("el-col",{attrs:{span:19}},[i("el-select",{staticClass:"mr-3",staticStyle:{width:"100%"},attrs:{placeholder:"Select Promotion"},on:{change:e.changeCheckPromo},model:{value:e.promoSelectId,callback:function(t){e.promoSelectId=t},expression:"promoSelectId"}},e._l(e.promoListParam,(function(e,t){return i("el-option",{key:t,attrs:{label:e.promoName,value:e.promotionId}})})),1)],1)],1)],1)],1),i("el-col",{attrs:{span:8}},[i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.countLoading,expression:"countLoading"}],staticStyle:{height:"12vh"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("label",[i("b",[e._v("Total: ")]),e._v(" "+e._s(e.countInfo.total)+" ")])]),i("el-col",{attrs:{span:12}},[i("label",[i("b",[e._v("Unused: ")]),e._v(" "+e._s(e.countInfo.unused)+" ")])]),i("el-col",{attrs:{span:12}},[i("label",[i("b",[e._v("Used: ")]),e._v(" "+e._s(e.countInfo.used)+" ")])]),i("el-col",{attrs:{span:12}},[i("label",[i("b",[e._v("Redemped: ")]),e._v(" "+e._s(e.countInfo.redemped)+" ")])])],1)],1)],1)],1),i("el-row",{staticClass:"mt-4"},[i("el-col",{attrs:{span:24}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{height:"400",data:e.checkVouchers,"header-row-class-name":"custom-table","cell-class-name":"custom-table",border:""}},[i("el-table-column",{attrs:{label:"No.",type:"index"}}),i("el-table-column",{attrs:{label:"Code"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{staticClass:"tag-custom",attrs:{effect:"dark",size:"medium",type:"success"}},[e._v(" "+e._s(t.row.voucherCode)+" ")])]}}])}),i("el-table-column",{attrs:{label:"Number",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{staticClass:"tag-custom",attrs:{size:"small",effect:"dark",type:"info"}},[e._v(" "+e._s(t.row.index)+" ")])]}}])}),i("el-table-column",{attrs:{label:"Promotion"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.promotion||t.row.promotion.delFlg?e._e():i("router-link",{staticStyle:{"word-break":"break-word"},attrs:{type:"primary",to:{name:"Promotion detail",params:{id:t.row.promotion.promotionId}}}},[e._v(" "+e._s(t.row.promotion.promotionName)+" ")]),null!=t.row.promotion&&t.row.promotion.delFlg?i("label",[e._v(" "+e._s(t.row.promotion.promotionName))]):e._e(),null==t.row.promotion?i("label",[e._v("N/A")]):e._e()]}}])}),i("el-table-column",{attrs:{label:"Redemped"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isRedemped?e._e():i("label",[e._v("No")]),t.row.isRedemped?i("label",[e._v(e._s(t.row.channel.channelName))]):e._e()]}}])}),i("el-table-column",{attrs:{label:"Customer"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.membership?i("label",[e._v("N/A")]):e._e(),null!=t.row.membership?i("label",[e._v(e._s(t.row.membership.fullname))]):e._e()]}}])}),i("el-table-column",{attrs:{label:"Used"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isUsed?e._e():i("label",[e._v("No")])]}}])})],1),i("div",{staticClass:"mt-2 d-flex justify-content-end"},[i("base-pagination",{attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1)],1)],1)],1)},f=[],v=(i("7db0"),{name:"voucher-check-promotion",filters:{},data:function(){return{countLoading:!1,pagination:{default:1},filterOptions:[{id:1,value:"All"},{id:2,value:"Unused"},{id:3,value:"Used"},{id:4,value:"Redemped"}],filterOption:1,loading:!1,pageCount:1,promoSelectId:"",promoCode:""}},computed:{promoIdList:function(){return this.promoListParam},checkVouchers:function(){return this.$store.state.voucher.checkVouchers},countInfo:function(){return this.$store.state.voucher.promoVoucherCount}},props:{promoListParam:Array},created:function(){},beforeDestroy:function(){this.$store.commit("voucher/setCheckIndexId",""),this.$store.commit("voucher/setCheckPageSize",10),this.$store.commit("voucher/setCheckPageIndex",1),this.$store.commit("voucher/setCheckCounter",0),this.$store.commit("voucher/setCheckVoucher",[]),this.$store.commit("voucher/setPromoVoucherCount",{total:0,redemped:0,unused:0,used:0})},methods:{changeStatus:function(e){this.$store.commit("voucher/setCheckStatus",e),""!=this.promoSelectId&&(this.pagination.default=1,this.changePage(this.pagination.default))},changeCheckPromo:function(e){this.loading=!0,this.promoCode=this.promoIdList.find((function(t){return t.promotionId==e})).promoCode,this.$store.commit("voucher/setCheckPageIndex",1),this.$store.commit("voucher/setCheckIndexId",e),this.getVoucherList(),this.getPromoVoucherCount(),this.pagination.default=1},setPageCount:function(){var e=this.$store.state.voucher.checkPageSize;this.pageCount=Math.ceil(this.$store.state.voucher.checkCounter/e)},getPromoVoucherCount:function(){var e=this;this.countLoading=!0,this.$store.commit("voucher/setVoucherGroupId",this.$route.params.id),this.$store.dispatch("voucher/getPromoVoucherCount").then((function(t){e.countLoading=!1,200!=t.status?e.$notify({icon:"el-icon-warning",title:"Error",message:"Check Promotion Error",type:"danger"}):e.setPageCount()})).catch((function(){e.countLoading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Check Promotion Error",type:"danger"})}))},changePage:function(e){""!=this.promoSelectId&&(this.loading=!0,this.$store.commit("voucher/setCheckPageIndex",e),this.$store.commit("voucher/setCheckIndexId",this.promoSelectId),this.getVoucherList())},getVoucherList:function(){var e=this;this.loading=!0,this.$store.commit("voucher/setVoucherGroupId",this.$route.params.id),this.$store.dispatch("voucher/checkPromoOfVoucher").then((function(t){e.loading=!1,200!=t.status?e.$notify({icon:"el-icon-warning",title:"Error",message:"Check Promotion Error",type:"danger"}):e.setPageCount()})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Check Promotion Error",type:"danger"})}))}}}),b=v,y=(i("c0cb"),Object(m["a"])(b,g,f,!1,null,"38e9ba8a",null)),C=y.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"voucher-table"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:14}},[i("el-card",{attrs:{shadow:""}},[i("el-row",{},[i("el-col",{attrs:{span:24}},[i("span",[i("el-input",{attrs:{placeholder:"Type to check voucher code"},model:{value:e.checkCode,callback:function(t){e.checkCode=t},expression:"checkCode"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search",type:"primary text-dark"},on:{click:e.checkVoucher},slot:"append"},[e._v("Check")])],1)],1)]),i("el-col",{staticClass:"mt-2",attrs:{span:24}},[i("el-input",{staticClass:"input-with-select text-dark",attrs:{placeholder:"Type to search code"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[i("el-select",{staticClass:"text-dark",attrs:{slot:"prepend"},on:{change:e.changeStatus},slot:"prepend",model:{value:e.filterOption,callback:function(t){e.filterOption=t},expression:"filterOption"}},e._l(e.filterOptions,(function(e,t){return i("el-option",{key:t,staticStyle:{},attrs:{value:e.id,label:e.value}})})),1)],1)],1)],1)],1)],1),i("el-col",{attrs:{span:10}},[i("add-more-voucher",{attrs:{voucherGroupId:e.voucherGroupDetail.voucherGroupId,quantity:e.voucherGroupDetail.total},on:{getVoucherGroupDetail:e.getVoucherGroupDetail}})],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"filterTable",staticClass:"mt-4",attrs:{height:"350",border:"",data:e.vouchers,"cell-class-name":"custom-table"}},[i("el-table-column",{attrs:{label:"No.",type:"index"}}),i("el-table-column",{attrs:{prop:"voucherName",label:"Code","column-key":"date",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{staticClass:"tag-custom",attrs:{effect:"dark",size:"medium",type:"success"}},[e._v(" "+e._s(t.row.voucherCode)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"redempedQuantity",label:"Number",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{staticClass:"tag-custom",attrs:{size:"small",effect:"dark",type:"info"}},[e._v(" "+e._s(t.row.index)+" ")])]}}])}),i("el-table-column",{attrs:{label:"Promotion"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.promotion||t.row.promotion.delFlg?e._e():i("router-link",{staticStyle:{"word-break":"break-word"},attrs:{type:"primary",to:{name:"Promotion detail",params:{id:t.row.promotion.promotionId}}}},[e._v(" "+e._s(t.row.promotion.promotionName)+" ")]),null!=t.row.promotion&&t.row.promotion.delFlg?i("label",[e._v(" "+e._s(t.row.promotion.promotionName))]):e._e(),null==t.row.promotion?i("label",[e._v("N/A")]):e._e()]}}])}),i("el-table-column",{staticClass:"col",attrs:{label:"Customer"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.membership?i("label",[e._v("N/A")]):e._e(),null!=t.row.membership?i("label",[e._v(e._s(t.row.membership.fullname))]):e._e()]}}])}),i("el-table-column",{attrs:{label:"Redemped"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isRedemped?e._e():i("label",[e._v("No")]),t.row.isRedemped?i("label",[e._v(e._s(t.row.channel.channelName))]):e._e()]}}])}),i("el-table-column",{attrs:{label:"Redemp Date"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isRedemped?i("label",[e._v(e._s(e._f("formatDate")(t.row.redempedDate)))]):e._e()]}}])}),i("el-table-column",{attrs:{prop:"usedQuantity",label:"Used"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("FiltersYesNo")(t.row.isUsed))+" ")]}}])}),i("el-table-column",{attrs:{label:"Used Date"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isUsed?i("label",[e._v(e._s(e._f("formatDate")(t.row.usedDate)))]):e._e()]}}])})],1),i("div",{staticClass:"card-footer d-flex justify-content-end"},[i("base-pagination",{attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1),i("el-dialog",{attrs:{title:"Voucher Information",visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("check-voucher-info")],1)],1)},x=[],_=(i("ac1f"),i("841c"),i("b012")),P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"addMoreVoucher"}},[i("el-card",{attrs:{shadow:""}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("span",[i("el-input-number",{staticStyle:{width:"10vw"},attrs:{max:e.maxQuantity,min:e.minQuantity},model:{value:e.addQuantity,callback:function(t){e.addQuantity=t},expression:"addQuantity"}}),i("el-button",{staticClass:"ml-3",attrs:{icon:"el-icon-plus",disabled:0==e.maxQuantity,type:"primary"},on:{click:e.addMore}},[e._v("Add Voucher")])],1)]),i("el-col",{staticClass:"mt-3",attrs:{span:24}},[i("label",[e._v(" Maximum quantity of voucher is "),i("b",[e._v(e._s(e.maxQuantity))]),e._v(" voucher(s) ")])])],1)],1)],1)},T=[],I=(i("a9e3"),i("2b0e")),E=i("4eb5"),k=i.n(E),$=i("5f5b");I["default"].use(k.a);var S={name:"add-more-voucher",directives:{"b-tooltip":$["b"]},props:{voucherGroupId:String,quantity:Number},data:function(){return{loading:!1,addQuantity:1}},computed:{beforeAddInfo:function(){return this.$store.state.voucher.beforeAddInfo},maxQuantity:function(){return this.beforeAddInfo.availableQuantity},minQuantity:function(){return 0==this.maxQuantity?0:1},groupId:function(){return this.voucherGroupId}},created:function(){this.checkBeforeAdd()},methods:{checkBeforeAdd:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.$store.commit("voucher/setVoucherGroupId",e.$route.params.id),e.$store.dispatch("voucher/checkBeforeAdd").then((function(t){e.loading=!1,200!=t.status&&(e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Get voucher quantity error",type:"danger"}))})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Get voucher quantity error",type:"danger"})}));case 3:case"end":return t.stop()}}),t)})))()},addMore:function(){var e=this;this.loading=!0,this.$store.commit("voucher/setMoreQuantity",this.addQuantity),this.$store.commit("voucher/setVoucherGroupId",this.groupId),this.$store.dispatch("voucher/addMore").then((function(t){200==t.status?(e.loading=!1,e.addQuantity=1,e.$emit("getVoucherGroupDetail"),e.checkBeforeAdd(),e.$notify({icon:"el-icon-circle-check",title:"Success",message:"Add voucher successfully",type:"success"})):(e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:t.data.message,type:"danger"}))})).catch((function(t){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:t.message,type:"danger"})}))}}},D=S,N=(i("f78f"),Object(m["a"])(D,P,T,!1,null,null,null)),O=N.exports,A=i("4739"),F={components:{AddMoreVoucher:O,CheckVoucherInfo:A["a"]},name:"voucher-list-table",props:{},filters:{formatDate:function(e){return c()(e).format("DD/MM/YYYY")},FiltersYesNo:function(e){return e?"Yes":"No"}},data:function(){return{dialogVisible:!1,checkCode:"",filterOptions:[{id:1,value:"All"},{id:2,value:"Unused"},{id:3,value:"Used"},{id:4,value:"Redemped"}],filterOption:1,voucherGroupParam:"",dialogVouchers:!1,radio:{default:3},pagination:{default:1},search:"",loading:!1,pageCount:1}},computed:{voucherGroupDetail:function(){return this.$store.state.voucher.voucherGroupDetail},vouchers:function(){return this.setPageCount(),this.$store.state.voucher.detailVoucher},promoCode:function(){return this.$store.state.voucher.detailPromoCode}},created:function(){this.getVoucherList()},watch:{search:function(){this.loading=!0,this.getSearch()}},methods:{checkVoucher:function(){var e=this;this.checkCode&&""!=this.checkCode&&(this.loading=!0,this.$store.commit("voucher/setCheckCode",this.checkCode),this.$store.commit("voucher/setVoucherGroupId",this.$route.params.id),this.$store.dispatch("voucher/checkVoucher").then((function(t){e.loading=!1,200==t.status?e.dialogVisible=!0:204==t.status?e.$notify({icon:"el-icon-warning",title:"Error",message:"Voucher not found",type:"warning"}):e.$notify({icon:"el-icon-warning",title:"Error",message:"Cannot get vouchers",type:"danger"})})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Cannot get vouchers",type:"danger"})})))},changeStatus:function(){this.loading=!0,this.pagination.default=1,this.getSearch()},getSearch:Object(_["debounce"])((function(){var e=this;this.$store.commit("voucher/setDetailPageIndex",this.pagination.default),""!=this.search?this.$store.commit("voucher/setSearchCode",this.search):this.$store.commit("voucher/setSearchCode",null),this.$store.commit("voucher/setVoucherStatus",this.filterOption),this.$store.commit("voucher/setPromotionId",null),this.$store.commit("voucher/setVoucherGroupId",this.$route.params.id),this.$store.dispatch("voucher/searchVoucherList").then((function(t){e.loading=!1,200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Cannot get vouchers",type:"danger"})})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Cannot get vouchers",type:"danger"})}))}),1e3),getVoucherGroupDetail:function(){this.$emit("getVoucherGroupDetail"),this.getVoucherList()},setPageCount:function(){var e=this.$store.state.voucher.detailPageSize;this.pageCount=Math.ceil(this.$store.state.voucher.detailCounter/e)},changePage:function(e){this.loading=!0,this.$store.commit("voucher/setDetailPageIndex",e),this.getSearch()},getVoucherList:function(){var e=this;this.loading=!0,this.$store.commit("voucher/setVoucherGroupId",this.$route.params.id),this.$store.dispatch("voucher/getVoucherDetailList").then((function(t){e.loading=!1,200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Cannot get vouchers",type:"danger"})})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Cannot get vouchers",type:"danger"})}))}}},L=F,M=(i("7233"),i("91d3"),Object(m["a"])(L,w,x,!1,null,"11541470",null)),G=M.exports,R={name:"voucher-detail",components:{VoucherTable:G,VoucherPromoCheck:C,VoucherChannelCheck:h},data:function(){return{pagination:{default:1},loading:!1,actionLoading:!1,conditionLoading:!1,giftLoading:!1,pageCount:1}},beforeDestroy:function(){this.$store.commit("voucher/setVoucherGroupDetail",{}),this.$store.commit("voucher/setCheckVoucherInfo",{})},computed:{voucherGroupDetail:function(){return this.$store.state.voucher.voucherGroupDetail},promoList:function(){var e=this.voucherGroupDetail.promoList;return e||[]},usedPercent:function(){var e=this.voucherGroupDetail.total,t=this.voucherGroupDetail.usedQuantity,i=Math.ceil(t/e*100);return i||0},redempedPercent:function(){var e=this.voucherGroupDetail.total,t=this.voucherGroupDetail.redempedQuantity,i=Math.ceil(t/e*100);return i||0},remainPercent:function(){var e=this.voucherGroupDetail.total,t=this.voucherGroupDetail.remain,i=Math.ceil(t/e*100);return i||0},actions:function(){return this.$store.state.voucher.actions},gifts:function(){return this.$store.state.voucher.gifts},conditions:function(){return this.$store.state.voucher.conditions}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getVoucherGroupDetail();case 3:return t.next=5,e.getActions();case 5:return t.next=7,e.getPostActions();case 7:e.checkDeleteAction();case 8:case"end":return t.stop()}}),t)})))()},methods:{updateGroup:function(){var e=this;this.loading=!0,this.$store.commit("voucher/setUpdateVoucherGroupParam",this.voucherGroupDetail),this.$store.dispatch("voucher/updateVoucherGroup").then((function(t){e.loading=!1,200==t.status?(e.$notify({icon:"el-icon-warning",title:"Success",message:"Update successful",type:"success"}),e.getVoucherGroupDetail()):e.$notify({icon:"el-icon-warning",title:"Error",message:"Update error !",type:"danger"})})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Update error !",type:"danger"})}))},checkDeleteAction:function(){if(null!=this.voucherGroupDetail.action){var e=this.voucherGroupDetail.actionId;this.actions.some((function(t){return t.actionId==e}))||(this.voucherGroupDetail.actionId="")}else{var t=this.voucherGroupDetail.giftId;this.gifts.some((function(e){return e.giftId==t}))||(this.voucherGroupDetail.giftId="")}},getPostActions:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.giftLoading=!0,i=e.voucherGroupDetail.postActionType,e.$store.commit("voucher/setPostActionType",i),t.next=5,e.$store.dispatch("voucher/getPostAction").then((function(t){e.giftLoading=!1,200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Get Gift error !",type:"danger"})})).catch((function(){e.giftLoading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Get Gift error !",type:"danger"})}));case 5:case"end":return t.stop()}}),t)})))()},getActions:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.actionLoading=!0,i=e.voucherGroupDetail.actionType,console.log("action type:",i),e.$store.commit("voucher/setActionType",i),t.next=6,e.$store.dispatch("voucher/getAction").then((function(t){e.actionLoading=!1,200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Get Action error !",type:"danger"})})).catch((function(){e.actionLoading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Get Action error !",type:"danger"})}));case 6:case"end":return t.stop()}}),t)})))()},getVoucherGroupDetail:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.$store.commit("voucher/setVoucherGroupId",e.$route.params.id),t.next=4,e.$store.dispatch("voucher/getVoucherGroupDetail").then((function(t){e.loading=!1,200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Get Voucher Detail error !",type:"danger"})})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Get Voucher Detail error !",type:"danger"})}));case 4:case"end":return t.stop()}}),t)})))()}},filters:{actionTypeFilter:function(e){switch(e){case 1:return"Discount amount of order";case 2:return"Discount percent of order";case 3:return"Discount shipping fee of order";case 4:return"Discount amount of item";case 5:return"Discount percent of item";case 6:return"Discount unit of item";case 7:return"Fixed price of item";case 8:return"Ladder price of item";case 9:return"Bundle price of item"}},postActionTypeFilter:function(e){switch(e){case 1:return"Gift products";case 2:return"Gift vouchers";case 3:return"Gift points";case 4:return"Gift game code"}},redempAndUseFilter:function(e){return e?"Yes":"No"}}},V=R,U=(i("e36d"),Object(m["a"])(V,n,o,!1,null,null,null));t["default"]=U.exports},bf50:function(e,t,i){},bfce:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-col",{staticClass:"draggable-zone-style",attrs:{span:24}},[i("draggable",{staticClass:"draggable-zone-style",attrs:{list:e.conditionItem,group:{name:"conditionItem",put:["groupItem","orderCondItem","prodCondItem"]}},on:{start:function(t){e.dragging=!0},end:function(t){e.dragging=!1}}},[i("el-col",{attrs:{span:24}},[i("nested-draggable",{attrs:{id:"condition-drop-zone",tasks:e.conditionItem,optionParams:e.optionParam}})],1)],1)],1)],1)},o=[],a=i("b76a"),r=i.n(a),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("draggable",{staticClass:"dragArea pt-2 pb-2",staticStyle:{"background-color":"white"},attrs:{list:e.tasks,group:{name:"conditionItem",put:e.optionParams}}},e._l(e.tasks,(function(t,n){return i("div",{key:n},[void 0!=t.condType?i("div",["PRODUCT"==t.condType?i("div",["QUANTITY"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" each product in ")]),i("el-button",{staticClass:"ml-2",staticStyle:{outline:"none",border:"0px","font-size":"1.1vw"},attrs:{type:"text",plain:""},on:{click:function(i){return e.openDrawerProduct(t.productList,n)}}},[e._v("selection list ("+e._s(t.productList.length)+") ")]),i("label",{staticClass:"ml-2"},[e._v("has quantity")]),i("el-select",{staticClass:"m-2 operator-style",attrs:{size:"small",placeholder:"Select"},model:{value:t.quantityOperator,callback:function(i){e.$set(t,"quantityOperator",i)},expression:"element.quantityOperator"}},e._l(e.numberOper,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),i("el-input-number",{staticClass:"my-input-style",attrs:{type:"text",size:"small",min:1,max:999999},model:{value:t.productQuantity,callback:function(i){e.$set(t,"productQuantity",i)},expression:"element.productQuantity"}}),i("el-button",{staticStyle:{outline:"none",border:"0px"},attrs:{icon:"el-icon-close text-muted",circle:"",size:"mini",plain:"",type:"text"},on:{click:function(t){return e.removeElement(n)}}})],1)],1)],1):e._e(),"CODE"==t.itemType?i("div",[i("span",[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",{staticClass:"ml-1 mr-1"},[e._v("order")]),i("el-select",{staticClass:"m-2",staticStyle:{width:"6.5vw"},attrs:{size:"small",placeholder:"Select"},model:{value:t.productConditionType,callback:function(i){e.$set(t,"productConditionType",i)},expression:"element.productConditionType"}},e._l(e.containCode,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),i("label",[e._v(" all products in ")]),i("el-button",{staticClass:"ml-2",staticStyle:{outline:"none",border:"0px","font-size":"1.1vw"},attrs:{type:"text",plain:""},on:{click:function(i){return e.openDrawerProduct(t.productList,n)}}},[e._v("selection list ("+e._s(t.productList.length)+") ")]),i("el-button",{staticStyle:{outline:"none",border:"0px"},attrs:{icon:"el-icon-close text-muted",circle:"",size:"mini",plain:"",type:"text"},on:{click:function(t){return e.removeElement(n)}}})],1),i("br")]):e._e()]):e._e(),"ORDER"==t.condType?i("div",["QUANTITY"==t.itemType?i("div",[i("span",[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v("quantity of product in order is")]),i("el-select",{staticClass:"m-2 operator-style",attrs:{size:"small",placeholder:"Select"},model:{value:t.quantityOperator,callback:function(i){e.$set(t,"quantityOperator",i)},expression:"element.quantityOperator"}},e._l(e.numberOper,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),i("el-input-number",{staticClass:"my-input-style",attrs:{type:"text",size:"small",min:1,max:999999},model:{value:t.quantity,callback:function(i){e.$set(t,"quantity",i)},expression:"element.quantity"}}),i("el-button",{staticStyle:{outline:"none",border:"0px"},attrs:{icon:"el-icon-close text-muted",circle:"",size:"mini",plain:"",type:"text"},on:{click:function(t){return e.removeElement(n)}}})],1),i("br")]):e._e(),"AMOUNT"==t.itemType?i("div",[i("span",[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v("order has total amount")]),i("el-select",{staticClass:"m-2 operator-style",attrs:{size:"small",placeholder:"Select"},model:{value:t.amountOperator,callback:function(i){e.$set(t,"amountOperator",i)},expression:"element.amountOperator"}},e._l(e.numberOper,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),i("el-input-number",{staticClass:"my-input-style",attrs:{type:"text",size:"small",min:1,max:9999999999},model:{value:t.amount,callback:function(i){e.$set(t,"amount",i)},expression:"element.amount"}}),i("el-button",{staticStyle:{outline:"none",border:"0px"},attrs:{icon:"el-icon-close text-muted",circle:"",size:"mini",plain:"",type:"text"},on:{click:function(t){return e.removeElement(n)}}})],1),i("br")]):e._e()]):e._e()]):e._e(),t.tasks?i("el-row",[i("el-col",{attrs:{span:22}},[t.tasks?i("nested-draggable",{staticClass:"pl-3 pr-3 custom-card",attrs:{tasks:t.tasks,optionParams:["orderCondItem","prodCondItem","g1"]}}):e._e()],1),i("el-col",{attrs:{span:2}},[i("el-button",{staticStyle:{outline:"none",border:"0px"},attrs:{icon:"el-icon-close text-muted",circle:"",size:"mini",plain:"",type:"text"},on:{click:function(t){return e.removeElement(n)}}})],1)],1):e._e(),n<e.tasks.length-1?i("el-select",{staticClass:"mt-2 mb-3",staticStyle:{width:"5vw"},attrs:{size:"small",value:t.nextOperator,placeholder:"Select"},model:{value:t.nextOperator,callback:function(i){e.$set(t,"nextOperator",i)},expression:"element.nextOperator"}},e._l(e.combineOper,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1):e._e()],1)})),0)],1),i("el-drawer",{attrs:{visible:e.drawer,size:"50%",direction:"rtl","before-close":e.handleCloseDrawer},on:{"update:visible":function(t){e.drawer=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.drawerLoading,expression:"drawerLoading"}],staticClass:"m-3"},[i("h3",[e._v("Product list")]),i("label",{staticClass:"custom-tag"},[i("i",{staticClass:"el-icon-warning-outline mr-1"}),e._v(" Selected "),i("b",[e._v(e._s(e.productSelection.length))]),e._v(" product(s) ")]),i("el-table",{ref:"multipleTable",attrs:{data:e.products,border:"",height:"400","row-key":e.getRowKey},on:{"selection-change":e.handleSelectionChange},model:{value:e.productSelection,callback:function(t){e.productSelection=t},expression:"productSelection"}},[i("el-table-column",{attrs:{"reserve-selection":!0,type:"selection"}}),i("el-table-column",{attrs:{type:"index"}}),i("el-table-column",{attrs:{property:"productName",width:"300",label:"Product name"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("label",{staticClass:"custom-content-break"},[e._v(" "+e._s(t.row.productName)+" ")])]}}])}),i("el-table-column",{attrs:{property:"productCode",label:"Product code"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{staticClass:"custom-content-break text-black",attrs:{type:"info",effect:"plain"}},[e._v(" "+e._s(t.row.code))])]}}])}),i("el-table-column",{attrs:{property:"cateName",label:"Category"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("label",{staticClass:"custom-content-break"},[e._v(" "+e._s(t.row.cateName)+" ")])]}}])})],1),i("el-col",{attrs:{span:24}},[i("el-button",{staticClass:"float-right mt-3",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.selectProduct}},[e._v("Select Product")])],1)],1)])],1)},l=[],c=(i("4de4"),i("4160"),i("a434"),i("159b"),{data:function(){return{productSelection:[],drawer:!1,selectIndex:0,drawerLoading:!1}},props:{tasks:{required:!0,type:Array},optionParams:Array},components:{draggable:r.a},computed:{containCode:function(){return this.$ENV.CONTAIN_CODE_PARAM},products:function(){return this.$store.state.condition.products},numberOper:function(){return this.$ENV.OPERATOR},combineOper:function(){return this.$ENV.NEXT_OPERATOR_PARAM}},mounted:function(){},created:function(){},methods:{selectProduct:function(){this.handleCloseDrawer()},removeElement:function(e){this.tasks.splice(e,1)},getRowKey:function(e){return e.productId},openDrawerProduct:function(e,t){var i=this;this.drawerLoading=!0,this.drawer=!0,this.clearSelectionList(),this.$nextTick((function(){e.forEach((function(e){var t=i.products.filter((function(t){return t.productId==e.productId}));i.$refs["multipleTable"].toggleRowSelection(t[0],!0)}))})),this.selectIndex=t,this.drawerLoading=!1},handleCloseDrawer:function(){var e=this;this.tasks[this.selectIndex].productList=[],this.productSelection.forEach((function(t){e.tasks[e.selectIndex].productList.push(t)})),this.clearSelectionList(),this.$refs["multipleTable"].clearSelection(),this.drawer=!1},clearSelectionList:function(){this.selectIndex=0;do{this.productSelection.pop()}while(this.productSelection.length>0)},handleSelectionChange:function(e){this.productSelection=e}},name:"nested-draggable"}),u=c,d=(i("d8b4"),i("89ff"),i("2877")),m=Object(d["a"])(u,s,l,!1,null,"316bd80c",null),p=m.exports,h={name:"drop-section",props:{conditionItemParam:Array,actionItemParam:Array,actionType:String},components:{draggable:r.a,nestedDraggable:p},created:function(){},data:function(){return{optionParam:["groupItem","orderCondItem","prodCondItem","g1"],drawer:!1}},computed:{products:function(){return this.$store.state.condition.products},conditionItem:function(){return this.conditionItemParam},actionItem:function(){return this.actionItemParam}},methods:{}},g=h,f=(i("2bc0"),Object(d["a"])(g,n,o,!1,null,"46f4d28e",null));t["a"]=f.exports},c0cb:function(e,t,i){"use strict";i("2479")},c509:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("base-header",{staticClass:"pb-6 mb-3 pt-1",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid"},[i("el-card",[e.isAction?i("h2",[e._v("ACTION BUILDER")]):e._e(),e.isAction?e._e():i("h2",[e._v("GIFT BUILDER")]),i("el-divider",{staticClass:"mt-3 mb-3"}),i("el-col",{staticClass:"mb-4",attrs:{span:24}},[i("div",[i("el-tag",{staticClass:"custom-tag-content",attrs:{type:"warning"}},[i("i",{staticClass:"el-icon-warning-outline mr-2"}),e._v(" "+e._s(e.$ENV.TEXT_EXPLAIN.Action))])],1)]),i("el-form",{ref:"actionObjForm",attrs:{"label-width":"200",rules:e.rules,model:e.actionObj,"label-position":"left"}},[i("el-row",{staticClass:"mb-2"},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{prop:"name",label:"Name"}},[i("el-input",{attrs:{rows:1,resize:"none",type:"textarea",maxlength:"100"},model:{value:e.actionObj.name,callback:function(t){e.$set(e.actionObj,"name",t)},expression:"actionObj.name"}})],1)],1)],1)],1),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:6}},[i("drag-section",{attrs:{isAction:e.isAction,actionItem:e.actionItem}})],1),i("el-col",{attrs:{span:18}},[i("drop-section",{ref:"dropSection",attrs:{actionItemParam:e.actionItem},on:{getProducts:e.getProducts}}),i("el-button",{staticClass:"mt-3 float-right",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.createAction}},[e._v("New Action")])],1)],1)],1)],1)],1)},o=[],a=(i("4160"),i("b0c0"),i("159b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticStyle:{"min-height":"40vh"}},[i("el-row",[i("el-col",{staticClass:"drop-zone",attrs:{span:24}},[e.isAction?i("h3",[e._v("Action items")]):e._e(),e.isAction?e._e():i("h3",[e._v("Gift items")]),i("el-collapse",[e.isAction?i("div",{attrs:{id:"act-cart-item-zone"}},[i("el-collapse-item",[i("template",{slot:"title"},[i("p",{staticClass:"p-0 m-0"},[e._v("Cart item")])]),i("draggable",{staticClass:" ",attrs:{list:e.prodActItem,clone:e.cloneProdAct,group:{name:"actionItem",pull:"clone",put:!1}}},e._l(e.prodActItem,(function(t,n){return i("el-col",{key:n,attrs:{span:24}},[i("el-tag",{staticClass:"mb-1 ml-1 mr-1 text-dark custom-tag-item",attrs:{effect:"plain",type:"success"}},[e._v(" "+e._s(t.name)+" ")])],1)})),1)],2)],1):e._e(),e.isAction?i("div",{attrs:{id:"act-cart-zone"}},[i("el-collapse-item",[i("template",{slot:"title"},[i("p",{staticClass:"p-0 m-0"},[e._v("Cart")])]),i("draggable",{staticClass:" ",attrs:{list:e.orderActItem,clone:e.cloneOrderAct,group:{name:"actionItem",pull:"clone",put:!1}}},e._l(e.orderActItem,(function(t,n){return i("el-col",{key:n,attrs:{span:24}},[i("el-tag",{staticClass:"mb-1 ml-1 mr-1 text-dark custom-tag-item",attrs:{effect:"plain",type:"success"}},[e._v(" "+e._s(t.name)+" ")])],1)})),1)],2)],1):e._e(),e.isAction?e._e():i("div",{attrs:{id:"act-gift-zone"}},[i("el-collapse-item",[i("template",{slot:"title"},[i("p",{staticClass:"p-0 m-0"},[e._v("Gift")])]),i("draggable",{staticClass:" ",attrs:{list:e.giftActItem,clone:e.cloneGiftAct,group:{name:"actionItem",pull:"clone",put:!1}}},e._l(e.giftActItem,(function(t,n){return i("el-col",{key:n,attrs:{span:24}},[i("el-tag",{staticClass:"mb-1 ml-1 mr-1 text-dark custom-tag-item",attrs:{effect:"plain",type:"success"}},[e._v(" "+e._s(t.name)+" ")])],1)})),1)],2)],1),e.isAction?e._e():i("div",{attrs:{id:"act-gift-zone"}},[i("el-collapse-item",[i("template",{slot:"title"},[i("p",{staticClass:"p-0 m-0"},[e._v("Bonus point")])]),i("draggable",{attrs:{list:e.bonusActItem,clone:e.cloneBonusAct,group:{name:"actionItem",pull:"clone",put:!1}}},e._l(e.bonusActItem,(function(t,n){return i("el-tag",{key:n,staticClass:"mb-1 ml-1 mr-1 text-dark custom-tag-item",attrs:{effect:"plain",type:"success"}},[e._v(" "+e._s(t.name)+" ")])})),1)],2)],1)])],1)],1)],1)],1)}),r=[],s=i("b76a"),l=i.n(s),c={name:"action-drag-section",props:{actionItem:Array,isAction:Boolean},components:{draggable:l.a},data:function(){return{drawer:!1,strategyOptions:[{value:1,name:"CHEAPEST"},{value:2,name:"MOST EXPENSIVE"},{value:3,name:"DEFAULT"}],prodActItem:[{actType:"PRODUCT",itemType:"AMOUNT",actionType:"1",name:"Discount amount (VNĐ)",value:0,minValueAfterDiscount:0,productSelection:[]},{actType:"PRODUCT",itemType:"PERCENTAGE",actionType:"1",discountType:"2",name:"Discount percentage (%)",valuePercent:0,amountLimit:0,productSelection:[]},{actType:"PRODUCT",itemType:"UNIT",actionType:"1",discountType:"3",name:"Discount unit",value:0,productSelection:[]},{actType:"PRODUCT",itemType:"FIXED",actionType:"1",discountType:"5",name:"Fixed price",fixedValue:0,productSelection:[]},{actType:"PRODUCT",itemType:"LADDER",actionType:"1",discountType:"6",name:"Ladder price",orderLadderProduct:0,ladderPrice:0,productSelection:[]},{actType:"PRODUCT",itemType:"BUNDLE",actionType:"1",discountType:"7",name:"Bundle price",bundleQuantity:0,bundlePrice:0,strategy:"3",productSelection:[]}],orderActItem:[{actType:"ORDER",itemType:"AMOUNT",actionType:"2",discountType:"1",name:"Discount amount (VNĐ)",value:1,minValueAfterDiscount:0},{actType:"ORDER",itemType:"PERCENTAGE",actionType:"2",discountType:"2",name:"Discount percentage (%)",valuePercent:1,amountLimit:0},{actType:"ORDER",itemType:"SHIPPING AMOUNT",actionType:"2",discountType:"4",name:"Shipping amount",type:"1",valueAmount:1,valuePercent:0,amountLimit:0},{actType:"ORDER",itemType:"SHIPPING PERCENTAGE",name:"Shipping percent",actionType:"2",discountType:"4",type:"2",valueAmount:0,valuePercent:1,amountLimit:0}],giftActItem:[{actType:"GIFT",itemType:"PRODUCT",actionType:"3",discountType:"8",name:"Product",quantity:0,productSelection:[]},{actType:"GIFT",itemType:"VOUCHER",actionType:"3",discountType:"9",name:"Voucher",giftVoucherCode:""},{actType:"GIFT",itemType:"GAME",actionType:"3",discountType:"9",name:"Game Code",giftVoucherCode:""}],bonusActItem:[{actType:"BONUS",actionType:"4",discountType:"10",name:"Bonus point",bonusPoint:0}],actItems:[],productSelection:[],orperators:[{id:"1",name:">"},{id:"2",name:">="},{id:"5",name:"="},{id:"3",name:"<"},{id:"4",name:"<="}],combineOper:[{id:"1",name:"Or"},{id:"2",name:"And"}],containCode:[{id:"0",name:"Include"},{id:"1",name:"Exclude"}]}},methods:{cloneProdAct:function(e){var t=e.itemType,i=this.$ENV.ACTION_TYPE;switch(t){case"AMOUNT":return{actType:"PRODUCT",itemType:"AMOUNT",actionType:i.PRODUCT_AMOUNT,name:"Discount amount (VNĐ)",value:0,minValueAfterDiscount:0,productSelection:[]};case"PERCENTAGE":return{actType:"PRODUCT",itemType:"PERCENTAGE",actionType:i.PRODUCT_PERCENT,name:"Discount percentage (%)",valuePercent:0,amountLimit:0,productSelection:[]};case"UNIT":return{actType:"PRODUCT",itemType:"UNIT",actionType:i.PRODUCT_UNIT,name:"Discount unit",value:0,productSelection:[]};case"FIXED":return{actType:"PRODUCT",itemType:"FIXED",actionType:i.PRODUCT_FIXED,name:"Fixed price",fixedValue:0,productSelection:[]};case"LADDER":return{actType:"PRODUCT",itemType:"LADDER",actionType:i.PRODUCT_LADDER,name:"Ladder price",orderLadderProduct:0,ladderPrice:0,productSelection:[]};case"BUNDLE":return{actType:"PRODUCT",itemType:"BUNDLE",actionType:i.PRODUCT_BUNDLE,name:"Bundle price",bundleQuantity:0,bundlePrice:0,strategy:3,productSelection:[]}}},cloneOrderAct:function(e){var t=this.$ENV.ACTION_TYPE,i=e.itemType;switch(i){case"AMOUNT":return{actType:"ORDER",itemType:"AMOUNT",actionType:t.ORDER_AMOUNT,name:"Discount amount (VNĐ)",value:1,minValueAfterDiscount:0};case"PERCENTAGE":return{actType:"ORDER",itemType:"PERCENTAGE",actionType:t.ORDER_PERCENT,name:"Discount percentage (%)",valuePercent:1,amountLimit:0};case"SHIPPING AMOUNT":return{actType:"ORDER",itemType:"SHIPPING AMOUNT",actionType:t.ORDER_SHIPPING,name:"Shipping amount",type:"1",valueAmount:1,valuePercent:0,amountLimit:0};case"SHIPPING PERCENTAGE":return{actType:"ORDER",itemType:"SHIPPING PERCENTAGE",name:"Shipping percent",actionType:t.ORDER_SHIPPING,type:"2",valueAmount:0,valuePercent:1,amountLimit:0}}},cloneGiftAct:function(e){var t=this.$ENV.POST_ACTION_TYPE,i=e.itemType;switch(i){case"PRODUCT":return{actType:"GIFT",itemType:"PRODUCT",name:"Product",actionType:t.GIFT_PRODUCT,quantity:0,productSelection:[]};case"VOUCHER":return{actType:"GIFT",itemType:"VOUCHER",actionType:t.GIFT_VOUCHER,name:"Voucher",giftVoucherGroupId:""};case"GAME":return{actType:"GIFT",itemType:"GAME",actionType:t.GIFT_GAME_CODE,name:"Game Code",gameCampaignId:""}}},cloneBonusAct:function(){var e=this.$ENV.POST_ACTION_TYPE;return{actType:"BONUS",name:"Bonus point",actionType:e.GIFT_POINT,bonusPoint:0}}}},u=c,d=(i("47b0"),i("2877")),m=Object(d["a"])(u,a,r,!1,null,"ead0cc48",null),p=m.exports,h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"drop-action"}},[i("el-card",{staticStyle:{"min-height":"50vh"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("draggable",{staticStyle:{"min-height":"40vh"},attrs:{list:e.actionItem,group:{name:"actionItem",put:"actionItem"}},on:{change:e.actChange}},[e.actionItem.length>0?i("div",{attrs:{id:"action-drop-zone"}},[i("draggable",{attrs:{list:e.actionItem,group:"actionItem"},on:{change:e.actChange,start:function(t){e.dragging=!0},end:function(t){e.dragging=!1}}},e._l(e.actionItem,(function(t,n){return i("div",{key:n,attrs:{id:"drop-action-content"}},[i("h2",[e._v(e._s(t.name))]),"PRODUCT"==t.actType?i("div",["AMOUNT"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" discount ")]),i("el-input-number",{staticClass:"drag-input-number ml-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:999999999},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"element.value"}}),i("label",{staticClass:"ml-1"},[e._v(" VNĐ ")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" minimum price of product after discount is ")]),i("el-input-number",{staticClass:"drag-input-number ml-2 mr-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:0,max:999999999},model:{value:t.minValueAfterDiscount,callback:function(i){e.$set(t,"minValueAfterDiscount",i)},expression:"element.minValueAfterDiscount"}}),i("label",[e._v(" VNĐ")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" for products in ")]),i("el-button",{staticClass:"ml-2 selectProductButton",staticStyle:{outline:"none",border:"0px"},attrs:{type:"text",plain:""},on:{click:function(i){return e.openDrawerProduct(t.productSelection)}}},[e._v("selection list ("+e._s(e.productSelection.length)+") ")])],1)],1)],1):e._e(),"PERCENTAGE"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" discount ")]),i("el-input-number",{staticClass:"drag-input-number ml-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:100},model:{value:t.valuePercent,callback:function(i){e.$set(t,"valuePercent",i)},expression:"element.valuePercent"}}),i("label",{staticClass:"ml-2"},[e._v(" %")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" and maximum discount price is ")]),i("el-input-number",{staticClass:"drag-input-number ml-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:0,max:999999999},model:{value:t.amountLimit,callback:function(i){e.$set(t,"amountLimit",i)},expression:"element.amountLimit"}}),i("label",[e._v("VNĐ")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" for products in ")]),i("el-button",{staticClass:"ml-2",staticStyle:{outline:"none",border:"0px","font-size":"1vw"},attrs:{type:"text",plain:""},on:{click:function(i){return e.openDrawerProduct(t.productSelection)}}},[e._v("selection list ("+e._s(e.productSelection.length)+") ")])],1)],1)],1):e._e(),"UNIT"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" discount ")]),i("el-input-number",{staticClass:"drag-input-number",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:100},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"element.value"}}),i("label",[e._v(" unit of products in cart ")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" for products in ")]),i("el-button",{staticClass:"ml-2",staticStyle:{outline:"none",border:"0px","font-size":"1vw"},attrs:{type:"text",plain:""},on:{click:function(i){return e.openDrawerProduct(t.productSelection)}}},[e._v("selection list ("+e._s(e.productSelection.length)+") ")])],1)],1)],1):e._e(),"FIXED"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" fixed price ")]),i("el-input-number",{staticClass:"drag-input-number",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:9999999999},model:{value:t.fixedValue,callback:function(i){e.$set(t,"fixedValue",i)},expression:"element.fixedValue"}}),i("label",[e._v(" VNĐ ")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" for products in ")]),i("el-button",{staticClass:"ml-2",staticStyle:{outline:"none",border:"0px","font-size":"1vw"},attrs:{type:"text",plain:""},on:{click:function(i){return e.openDrawerProduct(t.productSelection)}}},[e._v("selection list ("+e._s(e.productSelection.length)+") ")])],1)],1)],1):e._e(),"LADDER"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" buy product at the price ")]),i("el-input-number",{staticClass:"drag-input-number",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:99999999},model:{value:t.ladderPrice,callback:function(i){e.$set(t,"ladderPrice",i)},expression:"element.ladderPrice"}}),i("label",{staticClass:"ml-2"},[e._v(" VNĐ ")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" since the product")]),i("el-input-number",{staticClass:"drag-input-number",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:10},model:{value:t.orderLadderProduct,callback:function(i){e.$set(t,"orderLadderProduct",i)},expression:"element.orderLadderProduct"}})],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" for products in ")]),i("el-button",{staticClass:"ml-2",staticStyle:{outline:"none",border:"0px","font-size":"1vw"},attrs:{type:"text",plain:""},on:{click:function(i){return e.openDrawerProduct(t.productSelection)}}},[e._v("selection list ("+e._s(e.productSelection.length)+") ")])],1)],1)],1):e._e(),"BUNDLE"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" with the price")]),i("el-input-number",{staticClass:"drag-input-number ml-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:999999999},model:{value:t.bundlePrice,callback:function(i){e.$set(t,"bundlePrice",i)},expression:"element.bundlePrice"}}),i("label",{staticClass:"ml-2"},[e._v(" VNĐ")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" for products in ")]),i("el-button",{staticClass:"ml-2",staticStyle:{outline:"none",border:"0px","font-size":"1vw"},attrs:{type:"text",plain:""},on:{click:function(i){return e.openDrawerProduct(t.productSelection)}}},[e._v("selection list ("+e._s(e.productSelection.length)+") ")])],1)],1)],1):e._e()]):e._e(),"ORDER"==t.actType?i("div",["AMOUNT"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" discount ")]),i("el-input-number",{staticClass:"drag-input-number ml-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:999999999},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"element.value"}}),i("label",{staticClass:"ml-1"},[e._v(" VNĐ for cart")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" minimum price of cart after discount is ")]),i("el-input-number",{staticClass:"drag-input-number ml-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:0,max:999999999},model:{value:t.minValueAfterDiscount,callback:function(i){e.$set(t,"minValueAfterDiscount",i)},expression:"element.minValueAfterDiscount"}}),i("label",{staticClass:"ml-2"},[e._v(" VNĐ")])],1)],1)],1):e._e(),"PERCENTAGE"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" discount ")]),i("el-input-number",{staticClass:"drag-input-number",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:100},model:{value:t.valuePercent,callback:function(i){e.$set(t,"valuePercent",i)},expression:"element.valuePercent"}}),i("label",[e._v(" % for cart")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" maximum discount price is ")]),i("el-input-number",{staticClass:"drag-input-number ml-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:0,max:999999999},model:{value:t.amountLimit,callback:function(i){e.$set(t,"amountLimit",i)},expression:"element.amountLimit"}}),i("label",[e._v("VNĐ")])],1)],1)],1):e._e(),"SHIPPING AMOUNT"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" discount ")]),i("el-input-number",{staticClass:"drag-input-number",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:999999999},model:{value:t.valueAmount,callback:function(i){e.$set(t,"valueAmount",i)},expression:"element.valueAmount"}}),i("label",[e._v(" VNĐ for shipping fee of cart")])],1)],1)],1):e._e(),"SHIPPING PERCENTAGE"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" discount ")]),i("el-input-number",{staticClass:"drag-input-number",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:1,max:100},model:{value:t.valuePercent,callback:function(i){e.$set(t,"valuePercent",i)},expression:"element.valuePercent"}}),i("label",[e._v(" % for shipping fee of cart")])],1),i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" maximum discount price is ")]),i("el-input-number",{staticClass:"drag-input-number ml-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small",min:0,max:999999999},model:{value:t.amountLimit,callback:function(i){e.$set(t,"amountLimit",i)},expression:"element.amountLimit"}}),i("label",[e._v("VNĐ")])],1)],1)],1):e._e()]):e._e(),"GIFT"==t.actType?i("div",["PRODUCT"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" gift product in ")]),i("el-button",{staticClass:"ml-2",staticStyle:{outline:"none",border:"0px","font-size":"1vw"},attrs:{type:"text",plain:""},on:{click:function(i){return e.openDrawerProduct(t.productSelection)}}},[e._v("selection list ("+e._s(e.productSelection.length)+") ")])],1)],1)],1):e._e(),"VOUCHER"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" gift a Voucher Group ")]),i("el-select",{model:{value:t.giftVoucherGroupId,callback:function(i){e.$set(t,"giftVoucherGroupId",i)},expression:"element.giftVoucherGroupId"}},e._l(e.voucherGroups,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.voucherGroupId}})})),1)],1)],1)],1):e._e(),"GAME"==t.itemType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",{staticClass:"mr-3"},[e._v(" Gift a Game Code of ")]),i("el-select",{model:{value:t.gameCampaignId,callback:function(i){e.$set(t,"gameCampaignId",i)},expression:"element.gameCampaignId"}},e._l(e.games,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1):e._e()]):e._e(),"BONUS"==t.actType?i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-divider",{staticClass:"custom-divider",attrs:{direction:"vertical"}}),i("label",[e._v(" Give ")]),i("el-input-number",{staticClass:"drag-input-number ml-2",staticStyle:{width:"10vw"},attrs:{type:"text",size:"small"},model:{value:t.bonusPoint,callback:function(i){e.$set(t,"bonusPoint",i)},expression:"element.bonusPoint"}}),i("label",{staticClass:"ml-2"},[e._v(" point(s) for customer ")])],1)],1)],1):e._e()])})),0)],1):e._e()])],1)],1)],1),i("el-drawer",{attrs:{id:"drop-action-drawer",visible:e.drawer,size:"50%",direction:"rtl","before-close":e.beforeCloseDrawer},on:{"update:visible":function(t){e.drawer=t}}},[i("div",{staticClass:"m-3"},[i("h3",[e._v("Product list")]),i("label",{staticClass:"custom-tag"},[i("i",{staticClass:"el-icon-warning-outline mr-1"}),e._v(" Selected "),i("b",[e._v(e._s(e.productSelection.length))]),e._v(" product(s) ")]),i("el-table",{ref:"multipleTable",attrs:{data:e.products,border:"",height:"400",stripe:""},on:{"selection-change":e.handleSelectionChange,select:e.handleSelect},model:{value:e.productSelection,callback:function(t){e.productSelection=t},expression:"productSelection"}},[i("el-table-column",{attrs:{type:"selection"}}),i("el-table-column",{attrs:{property:"productName",width:"250",label:"Product name"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("label",{staticClass:"custom-content-break"},[e._v(" "+e._s(t.row.productName)+" ")])]}}])}),i("el-table-column",{attrs:{width:"150",property:"productCode",label:"Product code"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{staticClass:"custom-content-break text-black",attrs:{type:"info"}},[e._v(" "+e._s(t.row.code))])]}}])}),i("el-table-column",{attrs:{property:"cateName",label:"Category"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("label",{staticClass:"custom-content-break"},[e._v(" "+e._s(t.row.cateName)+" ")])]}}])}),e.actionItem.length>0&&"UNIT"!=e.actionItem[0].itemType?i("el-table-column",{attrs:{label:"Quantity"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{attrs:{min:1,max:10},model:{value:t.row.quantity,callback:function(i){e.$set(t.row,"quantity",i)},expression:"scope.row.quantity"}})]}}],null,!1,1266599470)}):e._e()],1),i("el-col",{attrs:{span:24}},[i("el-button",{staticClass:"float-right mt-3",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.selectProduct}},[e._v("Select Product")])],1)],1)])],1)},g=[],f=(i("7db0"),i("a434"),{name:"action-drop-section",components:{draggable:l.a},props:{actionItemParam:Array},computed:{games:function(){return this.$store.state.game_campaign.gameConfigs},promotion:function(){return this.$store.state.game_campaign.gamePromo},products:function(){return this.$store.state.condition.products},actionItem:function(){return this.actionItemParam},voucherGroups:function(){return this.$store.state.voucher.availVouchers}},watch:{actionItem:function(){void 0!=this.$refs["multipleTable"]&&this.$refs["multipleTable"].clearSelection(),this.productSelection=[]}},created:function(){},data:function(){return{strategyOptions:[{value:1,name:"CHEAPEST"},{value:2,name:"MOST EXPENSIVE"},{value:3,name:"DEFAULT"}],actItems:[],productSelection:[],drawer:!1}},methods:{beforeCloseDrawer:function(){this.selectProduct()},selectProduct:function(){var e=!0;"UNIT"!=this.actionItem[0].itemType&&(e=this.validGiftQuantity()),e?this.drawer=!1:this.$notify({icon:"el-icon-warning",title:"Error",message:"Please input quantity",type:"warning"})},validGiftQuantity:function(){var e=!0;return this.productSelection.forEach((function(t){void 0!=t.quantity&&0!=t.quantity||(e=!1)})),e},openDrawerProduct:function(){this.drawer=!0},handleCloseDrawer:function(){void 0!=this.$refs["multipleTable"]&&this.$refs["multipleTable"].clearSelection(),this.drawer=!1},handleSelectionChange:function(e){this.productSelection=e},handleSelect:function(e,t){this.productSelection=e;var i=this.actionItem[0].actionType;if(i==this.$ENV.POST_ACTION_TYPE.GIFT_PRODUCT){var n=void 0!=e.find((function(e){return e.productId==t.productId}));n||(t.quantity=void 0)}},actChange:function(e){var t=e.added.newIndex,i=0;0==t&&(i=1),this.actionItem.length>1&&(this.actionItem.splice(i,1),this.clearSelectionList(),void 0!=this.$refs["multipleTable"]&&this.$refs["multipleTable"].clearSelection())},clearSelectionList:function(){do{this.productSelection.pop()}while(this.productSelection.length>0)}}}),v=f,b=(i("58fc"),i("0322"),Object(d["a"])(v,h,g,!1,null,"3507f126",null)),y=b.exports,C={components:{DragSection:p,DropSection:y},name:"action-builder",data:function(){return{loading:!1,rules:{name:[{required:!0,trigger:["blur","change"],message:"Please input Name"}]},actionObj:{name:""},action:{},actionItem:[]}},computed:{isAction:function(){return"true"==this.$route.params.isAction||1==this.$route.params.isAction}},created:function(){this.getProducts(),this.getGameCampaign(),this.getVoucherGroups(),this.isAction},methods:{getGameCampaign:function(){var e=this;this.$store.commit("game_campaign/setPageSize",0),this.$store.commit("game_campaign/setPageIndex",0),this.$store.dispatch("game_campaign/getGameCampaignList").then((function(t){e.$store.commit("game_campaign/setPageSize",10),e.$store.commit("game_campaign/setPageIndex",1),200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Error while get Games",type:"warning"})})).catch((function(){e.$notify({icon:"el-icon-warning",title:"Error",message:"Error while get Games",type:"warning"})}))},createAction:function(){var e=this,t=this.handleAction(this.actionItem);t.name=this.actionObj.name,t.brandId="",this.$refs["actionObjForm"].validate((function(i){if(i){var n=e.actionItem[0].actType;"PRODUCT"==n||"ORDER"==n?e.addAction(t):e.addPostAction(t)}}))},addAction:function(e){var t=this;this.loading=!0,this.$store.commit("action/setInsertAction",e),this.$store.dispatch("action/insertAction").then((function(e){t.loading=!1,200==e.status?(t.$notify({icon:"el-icon-circle-check",title:"Success",message:"Create successfully",type:"success"}),t.$router.push("/action").catch((function(){}))):(t.loading=!1,t.$notify({icon:"el-icon-warning",title:"Error",message:"Error while inserting Action",type:"warning"}))})).catch((function(){t.$notify({icon:"el-icon-warning",title:"Error",message:"Error while inserting Action",type:"warning"})}))},addPostAction:function(e){var t=this;this.loading=!0,this.$store.commit("gift/setInsertPostAction",e),this.$store.dispatch("gift/insertPostAction").then((function(e){t.loading=!1,200==e.status?(t.$notify({icon:"el-icon-circle-check",title:"Success",message:"Create successfully",type:"success"}),t.$router.push("/gift").catch((function(){}))):(t.loading=!1,t.$notify({icon:"el-icon-warning",title:"Error",message:"Error while inserting Action",type:"warning"}))})).catch((function(){t.$notify({icon:"el-icon-warning",title:"Error",message:"Error while inserting Action",type:"warning"})}))},getProducts:function(){var e=this;this.$store.dispatch("condition/getBrandProduct").then((function(t){200!=t.status&&e.$notify({title:"Warning",message:"Cannot get Products",type:"warning"})})).catch((function(){e.$notify({title:"Warning",message:"Cannot get Products",type:"warning"})}))},getVoucherGroups:function(){var e=this;this.$store.commit("voucher/setAvailPageSize",0),this.$store.commit("voucher/setAvailPageIndex",0),this.$store.dispatch("voucher/getAvailableVoucher").then((function(t){200!=t.status&&e.$notify({title:"Warning",message:"Cannot get Vouchers",type:"warning"})})).catch((function(){e.$notify({title:"Warning",message:"Cannot get Vouchers",type:"warning"})}))},handleAction:function(e){if(0!=e.length){var t=this.$refs["dropSection"].productSelection,i=e[0],n=i.actionType,o=i.actType,a=this.$ENV.ACTION_TYPE,r=this.$ENV.POST_ACTION_TYPE;if("PRODUCT"==o||"ORDER"==o){if(n>=a.PRODUCT_AMOUNT&&0==t.length)return void this.$notify({title:"Warning",message:"Please select product for action",type:"warning"});var s={actionType:n,discountQuantity:0,discountAmount:0,discountPercentage:0,fixedPrice:0,maxAmount:0,minPriceAfter:0,orderLadderProduct:0,ladderPrice:0,bundlePrice:0,bundleQuantity:0,bundleStrategy:0,listProduct:[]};switch("PRODUCT"==o&&t.forEach((function(e){s.listProduct.push({productId:e.productId,quantity:e.quantity})})),n){case a.PRODUCT_AMOUNT:s.discountAmount=i.value,s.minPriceAfter=i.minValueAfterDiscount;break;case a.PRODUCT_PERCENT:s.discountPercentage=i.valuePercent,s.maxAmount=i.amountLimit;break;case a.PRODUCT_UNIT:s.discountQuantity=i.value;break;case a.PRODUCT_FIXED:s.fixedPrice=i.fixedValue;break;case a.PRODUCT_LADDER:s.orderLadderProduct=i.orderLadderProduct,s.ladderPrice=i.ladderPrice;break;case a.PRODUCT_BUNDLE:s.bundlePrice=i.bundlePrice,s.bundleStrategy=i.strategy;break;case a.ORDER_AMOUNT:s.discountAmount=i.value,s.minPriceAfter=i.minValueAfterDiscount;break;case a.ORDER_PERCENT:s.discountPercentage=i.valuePercent,s.maxAmount=i.amountLimit;break;case a.ORDER_SHIPPING:"1"==i.type?s.discountAmount=i.valueAmount:(s.discountPercentage=i.valuePercent,s.maxAmount=i.amountLimit);break}return s}if("GIFT"==o||"BONUS"==o){if(n==r.GIFT_PRODUCT&&0==t.length)return void this.$notify({title:"Warning",message:"Please select product",type:"warning"});var l={postActionType:n,giftVoucherGroupId:null,gameCampaignId:null,bonusPoint:0,listProduct:[]};switch(n==r.GIFT_PRODUCT&&t.forEach((function(e){var t={productId:e.productId,quantity:e.quantity};l.listProduct.push(t)})),n){case r.GIFT_VOUCHER:if(""==i.giftVoucherGroupId)return void this.$notify({icon:"el-icon-warning",title:"Error",message:"Please select voucher",type:"warning"});l.giftVoucherGroupId=i.giftVoucherGroupId;break;case r.GIFT_GAME_CODE:if(""==i.gameCampaignId)return void this.$notify({icon:"el-icon-warning",title:"Error",message:"Please select game",type:"warning"});l.gameCampaignId=i.gameCampaignId;break;case r.GIFT_POINT:if(0==i.bonusPoint)return void this.$notify({icon:"el-icon-warning",title:"Error",message:"Please input point",type:"warning"});l.bonusPoint=i.bonusPoint;break}return l}}else this.$notify({title:"Warning",message:"Please select action",type:"warning"})}}},w=C,x=(i("b825"),i("5d54"),Object(d["a"])(w,n,o,!1,null,"4e8263e7",null));t["default"]=x.exports},c809:function(e,t,i){},c8d2:function(e,t,i){var n=i("d039"),o=i("5899"),a="​᠎";e.exports=function(e){return n((function(){return!!o[e]()||a[e]()!=a||o[e].name!==e}))}},c8fd:function(e,t,i){},c90f:function(e,t,i){"use strict";i("98f6")},caad:function(e,t,i){"use strict";var n=i("23e7"),o=i("4d64").includes,a=i("44d2"),r=i("ae40"),s=r("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!s},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},cb45:function(e,t,i){"use strict";i("9a33")},cbbc:function(e,t,i){},ce97:function(e,t,i){},d1fe:function(e,t,i){"use strict";i("9490")},d421:function(e,t,i){},d46f:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 mb-2 pt-1",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid pt-2 pb-2"},[i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-form",{ref:"gameConfigForm",attrs:{model:e.gameConfig,"label-position":"left",rules:e.gameConfigRules}},[i("h3",[e._v("Game Campaign")]),i("el-divider",{staticClass:"custom-divider"}),i("el-row",[i("el-col",{staticClass:"ml-2",attrs:{span:4}},[i("el-form-item",{attrs:{label:"Has Code? "}},[i("el-switch",{attrs:{"active-text":"Yes","inactive-text":"No"},model:{value:e.gameConfig.hasCode,callback:function(t){e.$set(e.gameConfig,"hasCode",t)},expression:"gameConfig.hasCode"}},[e._v("> ")])],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"name",label:"Name"}},[i("el-col",{attrs:{span:18}},[i("el-input",{attrs:{maxlength:50},model:{value:e.gameConfig.name,callback:function(t){e.$set(e.gameConfig,"name",t)},expression:"gameConfig.name"}})],1)],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"Time",prop:"startGame"}},[i("el-col",{attrs:{span:8}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{prop:"startGame",type:"date",placeholder:"Pick a start date","picker-options":e.pickerOptionsstartGame},on:{change:e.changeStartGame},model:{value:e.gameConfig.startGame,callback:function(t){e.$set(e.gameConfig,"startGame",t)},expression:"gameConfig.startGame"}})],1),i("el-col",{staticClass:"line",attrs:{offset:1,span:1}},[e._v("-")]),i("el-col",{attrs:{span:8}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",prop:"endGame",placeholder:"Pick a end date","picker-options":e.pickerOptionEndGame,disabled:!e.gameConfig.startGame||e.gameConfig.isUnlimited},model:{value:e.gameConfig.endGame,callback:function(t){e.$set(e.gameConfig,"endGame",t)},expression:"gameConfig.endGame"}})],1)],1)],1),e.gameConfig.hasCode?i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{prop:"expiredDuration",label:"Game code duration"}},[i("el-row",[i("el-col",{attrs:{span:9}},[i("el-input-number",{attrs:{min:1},model:{value:e.gameConfig.expiredDuration,callback:function(t){e.$set(e.gameConfig,"expiredDuration",t)},expression:"gameConfig.expiredDuration"}})],1),i("el-col",{attrs:{span:3}},[e._v(" minutes ")])],1)],1)],1):e._e()],1),i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"gameMasterId",label:"Game"}},[i("el-select",{staticStyle:{width:"15vw"},style:e.gameConfig.gameStyle,attrs:{filterable:!0,placeholder:"Select game"},on:{change:e.changeGameMaster},model:{value:e.gameConfig.gameMasterId,callback:function(t){e.$set(e.gameConfig,"gameMasterId",t)},expression:"gameConfig.gameMasterId"}},e._l(e.gameMasterList,(function(t,n){return i("el-option",{key:n,attrs:{label:e._f("nameFilter")(t.name),value:t.id}})})),1)],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"Promotion",prop:"promotionId"}},[i("el-select",{staticStyle:{width:"18vw"},style:e.gameConfig.style,attrs:{"default-first-option":!0,filterable:!0,placeholder:"Select promotion"},on:{change:e.changePromo},model:{value:e.gameConfig.promotionId,callback:function(t){e.$set(e.gameConfig,"promotionId",t)},expression:"gameConfig.promotionId"}},e._l(e.promotion,(function(t,n){return i("el-option",{key:n,attrs:{label:e._f("nameFilter")(t.promotionName),value:t.promotionId}})})),1)],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"storeIdList",label:"Store"}},[i("el-select",{attrs:{placeholder:"Select",multiple:"","collapse-tags":""},model:{value:e.gameConfig.storeIdList,callback:function(t){e.$set(e.gameConfig,"storeIdList",t)},expression:"gameConfig.storeIdList"}},e._l(e.stores,(function(e,t){return i("el-option",{key:t,attrs:{label:e.storeName,value:e.storeId}})})),1)],1)],1)],1),i("el-row",{staticClass:"ml-2"},[i("el-col",{staticClass:"mt-2",attrs:{span:4}},[i("label",[i("b",[e._v("Minimum item(s):")]),e._v(" "+e._s(e.minItem))])]),i("el-col",{staticClass:"mt-2",attrs:{span:4}},[i("label",[i("b",[e._v("Maximum item(s):")]),e._v(" "+e._s(e.maxItem))])])],1)],1),i("el-divider",{staticClass:"custom-divider"}),e.gameConfig.promotionId?i("el-row",{attrs:{gutter:20}},[e._l(e.gameConfig.gameItems,(function(t,n){return i("el-col",{key:n,staticClass:"mb-3",attrs:{span:8}},[i("el-card",[i("el-form",{ref:"gameItemForm-"+n,refInFor:!0,attrs:{rules:e.gameItemRules,model:t,"label-position":"left","label-width":"100"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("h4",[e._v("Game Item "+e._s(n+1))])]),i("el-col",{attrs:{span:12}},[i("el-button",{staticClass:"float-right text-dark",staticStyle:{outline:"none",border:"0px"},attrs:{size:"mini",icon:"el-icon-close",circle:"",type:"text",plain:""},on:{click:function(t){return e.removeItem(n)}}})],1)],1),i("el-row",[i("el-form-item",{attrs:{label:"Promotion Tier",prop:"promotionTierId"}},[e.isAction?i("el-select",{attrs:{"default-first-option":!0,filterable:!0,placeholder:"Select promotion tier"},model:{value:t.promotionTierId,callback:function(i){e.$set(t,"promotionTierId",i)},expression:"item.promotionTierId"}},e._l(e.tiers,(function(e,t){return i("el-option",{directives:[{name:"show",rawName:"v-show",value:null!=e.action,expression:"tier.action != null"}],key:t,attrs:{label:e.action.name,value:e.promotionTierId}})})),1):e._e(),e.isAction?e._e():i("el-select",{attrs:{"default-first-option":!0,filterable:!0,placeholder:"Select promotion tier"},model:{value:t.promotionTierId,callback:function(i){e.$set(t,"promotionTierId",i)},expression:"item.promotionTierId"}},e._l(e.tiers,(function(e,t){return i("el-option",{key:t,attrs:{label:e.gift.name,value:e.promotionTierId}})})),1)],1)],1),i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"Display Text",prop:"displayText"}},[i("el-col",{attrs:{span:14}},[i("el-input",{attrs:{max:30},model:{value:t.displayText,callback:function(i){e.$set(t,"displayText",i)},expression:"item.displayText"}})],1)],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"textColor"}},[i("el-color-picker",{ref:"textColorPicker",refInFor:!0,attrs:{predefine:e.predefineColors},on:{"active-change":function(t){return e.activeChangeTextColor(n)}},model:{value:t.textColor,callback:function(i){e.$set(t,"textColor",i)},expression:"item.textColor"}})],1)],1)],1),i("el-row",[i("el-form-item",{attrs:{label:"Priority",prop:"priority"}},[i("el-col",{attrs:{span:20}},[i("el-slider",{attrs:{min:1,max:1e3,marks:e.marks},model:{value:t.priority,callback:function(i){e.$set(t,"priority",i)},expression:"item.priority"}})],1)],1)],1),i("el-row",{staticClass:"ml-2 mt-3"},[i("el-form-item",{attrs:{label:"Item Color",prop:"itemColor"}},[i("el-color-picker",{ref:"itemColorPicker",refInFor:!0,attrs:{predefine:e.predefineColors},on:{"active-change":function(t){return e.activeChangeItemColor(n)}},model:{value:t.itemColor,callback:function(i){e.$set(t,"itemColor",i)},expression:"item.itemColor"}})],1)],1)],1)],1)],1)})),i("el-col",{staticClass:"p-2",attrs:{span:8}},[i("center",[i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:e.addItem}},[e._v("New Item")])],1)],1)],2):e._e(),e.gameConfig.promotionId?i("el-divider",{staticClass:"custom-divider mt-4"}):e._e(),e.gameConfig.promotionId?i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:24}},[i("el-button",{staticClass:"float-right",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.createConfig}},[e._v("New Configuration")])],1)],1):e._e()],1)],1)],1)},o=[],a=(i("4de4"),i("4160"),i("a434"),i("b0c0"),i("159b"),i("2b0e")),r=i("4eb5"),s=i.n(r);a["default"].use(s.a);var l=40,c={name:"create-game-campaign",components:{},data:function(){return{loading:!1,minItem:0,maxItem:0,gameConfig:{brandId:"",gameMasterId:"",name:"",gameItems:[],promotionId:"",startGame:"",endGame:"",storeIdList:[],expiredDuration:2},isAction:!0,pickerOptionsstartGame:{disabledDate:function(e){return e.getTime()<=new Date((new Date).setDate((new Date).getDate()-1)).getTime()}},predefineColors:["#000000","#ffffff","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"],marks:{1:"Rarely",250:"Sometimes",500:"Often",750:"Usually",1e3:"Always"},colorIndex:2,pickerOptionEndGame:{disabledDate:this.handleDueDate},tiers:[],gameConfigRules:{name:[{required:!0,trigger:["blur","change"],message:"Please input name"}],startGame:[{required:!0,trigger:["blur","change"],message:"Please choose start time"}],endGame:[{required:!0,trigger:["blur","change"],message:"Please choose end time"}],promotionId:[{required:!0,trigger:["blur","change"],message:"Please choose end time"}],gameMasterId:[{required:!0,trigger:["blur","change"],message:"Please choose game"}],code:[{required:!0,trigger:["blur","change"],message:"Code is required"}],storeIdList:[{required:!0,trigger:["change"],message:"Store is required"}]},gameItemRules:{displayText:[{required:!0,trigger:["blur","change"],message:"Please enter display text"}],promotionTierId:[{required:!0,trigger:["blur","change"],message:"Please select Promotion tier"}],priority:[{required:!0,trigger:["blur","change"],message:"Please select Priority"}]},priorityLevel:[1,2,3,4,5]}},computed:{gameMasterList:function(){return this.$store.state.game_campaign.gameMaster},promotion:function(){return this.$store.state.game_campaign.gamePromo},stores:function(){return this.$store.state.game_campaign.stores}},created:function(){this.getGameMaster(),this.getPromoForGameCampaign(),this.getStoreForGameCampaign()},filters:{priorityFilter:function(e){switch(e){case 1:return"Rarely";case 2:return"Sometimes";case 3:return"Often";case 4:return"Usually";case 5:return"Always"}},nameFilter:function(e){return e.length>l?e.substring(0,l)+"...":e}},methods:{changeQuantity:function(e){if(this.gameConfig.gameItems.length>e){var t=e-1,i=this.gameConfig.gameItems.length-e;this.gameConfig.gameItems.splice(t,i)}},changePromo:function(e){var t=this,i="";this.promotion.forEach((function(t){t.promotionId==e&&(i=t.promotionTier)})),this.gameConfig.gameItems=[],this.tiers=[];var n="00000000-0000-0000-0000-000000000000";i.length>0&&(this.tiers=i,i.forEach((function(e){var i=t.colorIndex,n="";e.action?(t.isAction=!0,n=e.action.name):(t.isAction=!1,n=e.gift.name);var o={promotionTierId:e.promotionTierId,priority:1,displayText:"",description:"",itemColor:t.predefineColors[i],textColor:"#FFFFFF",name:n,insDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"}),updDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"})};t.gameConfig.gameItems.push(o),i<t.predefineColors.length-1?t.colorIndex++:t.colorIndex=2})),this.isAction?this.tiers.push({promotionTierId:n,action:{name:"Good Luck"}}):this.tiers.push({promotionTierId:n,gift:{name:"Good Luck"}}))},createConfig:function(){var e=this;if(this.gameConfig.gameItems.length<this.minItem||this.gameConfig.gameItems.length<this.gameConfig.quantity)this.$notify({icon:"el-icon-warning",title:"Error",message:"Not enough Item for Game",type:"warning"});else{var t=!0;this.$refs["gameConfigForm"].validate((function(e){t=e}));for(var i=0;i<this.gameConfig.gameItems.length;i++){var n="gameItemForm-"+i,o=this.$refs[n][0];o.validate((function(e){console.log("valid of form "+e),t&&(t=e)}))}t?(this.loading=!0,this.$store.commit("game_campaign/setGameCampaign",this.gameConfig),this.$store.dispatch("game_campaign/createGameCampaign").then((function(t){e.loading=!1,200!=t.status?(console.log(t.data.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when creating Game Configuration. Please try again",type:"danger"})):(e.$notify({icon:"el-icon-circle-check",title:"Success",message:"Create successfully",type:"success"}),e.$router.push("/game-campaign").catch((function(){})))})).catch((function(t){e.loading=!1,console.log(t.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when creating Game Configuration. Please try again",type:"danger"})}))):(window.scrollTo(0,0),this.$notify({icon:"el-icon-warning",title:"Error",message:"Please input required fields",type:"warning"}))}},handleDueDate:function(e){var t=new Date(this.gameConfig.startGame);return!(e.getTime()>t.getTime())},changeStartGame:function(){""!=this.gameConfig.endGame?this.gameConfig.endGame<=this.gameConfig.startGame&&(this.gameConfig.endGame=new Date(this.gameConfig.startGame+864e5)):this.gameConfig.endGame=new Date(this.gameConfig.startGame.getTime()+864e5)},removeItem:function(e){this.gameConfig.gameItems.splice(e,1),this.colorIndex--},addItem:function(){if(this.gameConfig.gameItems.length<this.maxItem){console.log("index: ",this.colorIndex);var e={promotionTierId:"",priority:1,displayText:"",description:"",itemColor:this.predefineColors[this.colorIndex],textColor:"#FFFFFF",name:"",insDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"}),updDate:(new Date).toLocaleString("vn",{timeZone:"Asia/Ho_Chi_Minh"})};this.gameConfig.gameItems.push(e),this.colorIndex<this.predefineColors.length-1?this.colorIndex++:this.colorIndex=2}else this.$notify({icon:"el-icon-warning",title:"Error",message:"Enough quantity of item",type:"warning"})},getStoreForGameCampaign:function(){var e=this;this.loading=!0,this.$store.dispatch("game_campaign/getStoresList").then((function(t){return console.log(t),200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Stores. Please try again",type:"danger"}),e.loading=!1,console.log(t.data["data"]),t.data})).catch((function(t){e.loading=!1,console.log(t.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Stores. Please try again",type:"danger"})}))},getPromoForGameCampaign:function(){var e=this;this.loading=!0,this.$store.dispatch("game_campaign/getPromoForGameCampaign").then((function(t){200!=t.status&&(console.log(t.data.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Promotion. Please try again",type:"danger"})),e.loading=!1})).catch((function(t){e.loading=!1,console.log(t.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Promotion. Please try again",type:"danger"})}))},changeGameMaster:function(e){var t=this.gameMasterList.filter((function(t){return t.id==e}))[0];this.minItem=t.minItem,this.maxItem=t.maxItem,this.gameConfig.gameItems=[],this.setupGameCampaignQuantity()},setupGameCampaignQuantity:function(){this.loading=!0,this.gameConfig.quantity<this.minItem?this.gameConfig.quantity=this.minItem:this.gameConfig.quantity>this.maxItem&&(this.gameConfig.quantity=this.maxItem),this.loading=!1},getGameMaster:function(){var e=this;this.loading=!0,this.$store.dispatch("game_campaign/getGameMasterList").then((function(t){if(200!=t.status)console.log(t.data.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Game Master. Please try again",type:"danger"});else if(e.gameMasterList.length>0){var i=e.gameMasterList[0];e.gameConfig.gameMasterId=i.id,e.maxItem=i.maxItem,e.minItem=i.minItem,e.setupGameCampaignQuantity()}e.loading=!1})).catch((function(t){e.loading=!1,console.log(t.message),e.$notify({icon:"el-icon-warning",title:"Error",message:"Error occur when getting Game Master. Please try again",type:"danger"})}))},activeChangeTextColor:function(e){var t=this.$refs.textColorPicker[e].color.value;this.gameConfig.gameItems[e].textColor=t},activeChangeItemColor:function(e){var t=this.$refs.itemColorPicker[e].color.value;this.gameConfig.gameItems[e].itemColor=t}}},u=c,d=(i("2cae"),i("2877")),m=Object(d["a"])(u,n,o,!1,null,null,null);t["default"]=m.exports},d58f:function(e,t,i){var n=i("1c0b"),o=i("7b0b"),a=i("44ad"),r=i("50c4"),s=function(e){return function(t,i,s,l){n(i);var c=o(t),u=a(c),d=r(c.length),m=e?d-1:0,p=e?-1:1;if(s<2)while(1){if(m in u){l=u[m],m+=p;break}if(m+=p,e?m<0:d<=m)throw TypeError("Reduce of empty array with no initial value")}for(;e?m>=0:d>m;m+=p)m in u&&(l=i(l,u[m],m,c));return l}};e.exports={left:s(!1),right:s(!0)}},d6bc:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 mb-2 pt-1",attrs:{type:"gradient-success"}}),i("div",{staticClass:"container-fluid"},[i("el-row",[i("div",{staticClass:"card shadow mt-3 pt-3 pb-2 pr-0 pl-0"},[i("div",{staticClass:"bg-transparent"},[i("el-steps",{attrs:{active:e.formIndex,"finish-status":"success","align-center":""}},[i("el-step",{attrs:{title:"Select promotion type"}}),i("el-step",{attrs:{title:"Setting"}}),i("el-step",{attrs:{title:"Save & Finish"}})],1)],1)])]),i("el-row",[i("promotion-type",{directives:[{name:"show",rawName:"v-show",value:0==e.formIndex,expression:"formIndex == 0"}],ref:"type",on:{"change-page":e.changeForm}}),i("promotion-configuration",{directives:[{name:"show",rawName:"v-show",value:1==e.formIndex,expression:"formIndex == 1"}],ref:"configuration",on:{"change-page":e.changeForm}}),i("promotion-preview",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"show",rawName:"v-show",value:2==e.formIndex,expression:"formIndex == 2"}]})],1),i("div",{staticClass:"card shadow mt-3 pt-3 pb-3 pr-4 pl-4"},[i("div",{staticClass:"bg-transparent"},[i("el-row",{staticClass:"ml-0"},[e.formIndex>0?i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"info"},on:{click:e.back}},[e._v(" Back ")])],1):e._e(),e.formIndex<2?i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v(" Next step ")])],1):e._e(),2==e.formIndex?i("el-col",{attrs:{span:3}},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.finish}},[e._v(" Save & Finish ")])],1):e._e()],1)],1)])],1)],1)},o=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"promotionTypeCustom"}},[i("div",{staticClass:"card shadow mt-3 pt-3 pb-2 pr-4 pl-4"},[i("div",{staticClass:"bg-transparent"},[i("el-row",{staticClass:"pb-3"},[i("el-col",{attrs:{span:22}},[i("h1",[e._v("PROMOTION TYPE")])]),i("el-col",{attrs:{span:2}},[i("a",{staticClass:"float-right",attrs:{href:"#"}},[i("i",{staticClass:"el-icon-question"}),i("span",[e._v("Get Help")])])])],1),i("el-row",{attrs:{gutter:20}},[i("label",{staticClass:"mb-0"},[e._v("What type of promotion ?")]),i("el-form",{ref:"promotionTypeForm",attrs:{model:e.promotionTypeForm,rules:e.rules}},[i("el-radio-group",{on:{change:e.changeTypeOption},model:{value:e.typeOption,callback:function(t){e.typeOption=t},expression:"typeOption"}},[i("div",{staticClass:"row align-items-center"},[i("el-col",{staticClass:"col-4"},[i("el-radio-button",{staticClass:"m-0 p-0",attrs:{label:1}},[e._v("Using voucher")])],1),i("el-col",{staticClass:"col-4"},[i("el-radio-button",{staticClass:"m-0 p-0",attrs:{label:2}},[e._v("Using code")])],1),i("el-col",{staticClass:"col-4"},[i("el-radio-button",{staticClass:"m-0 p-0",attrs:{label:3}},[e._v("Automatic")])],1)],1)]),i("el-row"),i("el-row",{staticClass:"mt-3",attrs:{gutter:20}},[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"","label-position":"top",prop:"promotionName",spellcheck:"false",required:""}},[i("h4",{staticClass:"font-weight-normal align-bottom mb-0"},[e._v(" Promotion Name ")]),i("center",[i("el-input",{attrs:{maxlength:100,"show-word-limit":""},model:{value:e.promotionTypeForm.promotionName,callback:function(t){e.$set(e.promotionTypeForm,"promotionName",t)},expression:"promotionTypeForm.promotionName"}})],1)],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:e.promotionTypeForm.isAuto?"":"promotionCode",required:!e.promotionTypeForm.isAuto}},[i("h4",{staticClass:"font-weight-normal align-bottom mb-0"},[e._v("Code")]),i("el-input",{attrs:{disabled:e.promotionTypeForm.isAuto,maxlength:e.promoCodeMaxLength,spellcheck:"false","show-word-limit":""},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.promotionTypeForm.promotionCode,callback:function(t){e.$set(e.promotionTypeForm,"promotionCode",t)},expression:"promotionTypeForm.promotionCode"}})],1)],1)],1),i("el-row",[i("label",{staticClass:"mb-0"},[e._v("What kind of action ?")]),i("el-col",{attrs:{span:24}},[i("el-radio-group",{attrs:{id:"kindGroup"},on:{change:e.changeActionType},model:{value:e.isActionType,callback:function(t){e.isActionType=t},expression:"isActionType"}},[i("el-radio-button",{attrs:{label:!0}},[e._v(" Discount ")]),i("el-radio-button",{attrs:{label:!1}},[e._v(" Gift")])],1)],1)],1),e.isActionType?i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:24}},[i("el-col",{attrs:{span:24}},[i("label",{staticClass:"mb-0"},[e._v("Discount Action")])]),i("el-radio-group",{staticClass:"mt-0",attrs:{id:"promotionType",fill:e.$ENV.COLORS.Main_colors,disabled:!e.isActionType},model:{value:e.promotionTypeForm.actionType,callback:function(t){e.$set(e.promotionTypeForm,"actionType",t)},expression:"promotionTypeForm.actionType"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-radio-button",{attrs:{label:e.$ENV.ACTION_TYPE.ORDER_AMOUNT}},[e._v(" Discount amount of order ")])],1),i("el-col",{attrs:{span:8}},[i("el-radio-button",{attrs:{label:e.$ENV.ACTION_TYPE.ORDER_PERCENT}},[e._v(" Discount percent of order ")])],1),i("el-col",{attrs:{span:8}},[i("el-radio-button",{attrs:{label:e.$ENV.ACTION_TYPE.ORDER_SHIPPING}},[e._v(" Discount shipping fee of order ")])],1)],1),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-radio-button",{attrs:{label:e.$ENV.ACTION_TYPE.PRODUCT_AMOUNT}},[e._v(" Discount amount of item ")])],1),i("el-col",{attrs:{span:8}},[i("el-radio-button",{attrs:{label:e.$ENV.ACTION_TYPE.PRODUCT_PERCENT}},[e._v(" Discount percent of item ")])],1),i("el-col",{attrs:{span:8}},[i("el-radio-button",{attrs:{label:e.$ENV.ACTION_TYPE.PRODUCT_UNIT}},[e._v(" Discount unit of item ")])],1)],1),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-radio-button",{attrs:{label:e.$ENV.ACTION_TYPE.PRODUCT_FIXED}},[e._v(" Fixed price of item ")])],1),i("el-col",{attrs:{span:8}},[i("el-radio-button",{attrs:{label:e.$ENV.ACTION_TYPE.PRODUCT_LADDER}},[e._v(" Ladder price of item ")])],1),i("el-col",{attrs:{span:8}},[i("el-radio-button",{attrs:{label:e.$ENV.ACTION_TYPE.PRODUCT_BUNDLE}},[e._v(" Bundle price of item ")])],1)],1)],1)],1)],1):e._e(),e.isActionType?e._e():i("el-row",{staticClass:"mt-2"},[i("el-col",{attrs:{span:24}},[i("el-col",{attrs:{span:24}},[i("label",{staticClass:"mb-0"},[e._v("Gift Action")])])],1)],1),e.isActionType?e._e():i("el-row",[i("el-col",{attrs:{span:24}},[i("div",{attrs:{id:"promotionType"}},[i("el-radio-group",{staticClass:"mt-0",attrs:{fill:e.$ENV.COLORS.Main_colors,disabled:e.isActionType},model:{value:e.promotionTypeForm.postActionType,callback:function(t){e.$set(e.promotionTypeForm,"postActionType",t)},expression:"promotionTypeForm.postActionType"}},[i("el-col",{attrs:{span:6}},[i("el-radio-button",{attrs:{label:e.$ENV.POST_ACTION_TYPE.GIFT_PRODUCT}},[e._v(" Gift products ")])],1),i("el-col",{attrs:{span:6}},[i("el-radio-button",{attrs:{label:e.$ENV.POST_ACTION_TYPE.GIFT_VOUCHER}},[e._v(" Gift vouchers ")])],1),i("el-col",{attrs:{span:6}},[i("el-radio-button",{attrs:{label:e.$ENV.POST_ACTION_TYPE.GIFT_POINT}},[e._v(" Gift points ")])],1),i("el-col",{attrs:{span:6}},[i("el-radio-button",{attrs:{label:e.$ENV.POST_ACTION_TYPE.GIFT_GAME_CODE}},[e._v(" Gift game code ")])],1)],1)],1)])],1),i("el-row",{staticClass:"mt-4",attrs:{type:"flex"}},[i("el-col",[i("h3",[e._v("TIMEFRAME")])])],1),i("el-row",{attrs:{type:"flex",gutter:0,justify:"center"}},[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"",prop:"startDate"}},[i("h5",{staticClass:"font-weight-normal mb-0 pl-0"},[e._v("Start date")]),i("el-col",{staticClass:"ml-0 mr-0",attrs:{span:11}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"dd-MM-yyyy",type:"date",placeholder:"Pick a date",clearable:!1,"picker-options":e.pickerOptionsStartDate},on:{change:e.changeStartDate},model:{value:e.promotionTypeForm.startDate,callback:function(t){e.$set(e.promotionTypeForm,"startDate",t)},expression:"promotionTypeForm.startDate"}})],1),i("el-col",{staticClass:"text-center",attrs:{span:2}},[e._v("at")]),i("el-col",{staticClass:"ml-0 mr-0",attrs:{span:11}},[i("el-time-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,placeholder:"Pick a time",format:"HH:mm"},model:{value:e.promotionTypeForm.startDate,callback:function(t){e.$set(e.promotionTypeForm,"startDate",t)},expression:"promotionTypeForm.startDate"}})],1)],1)],1),i("el-col",{staticClass:"text-center pt-4",attrs:{span:1}},[e._v(" - ")]),i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{prop:"endDate",label:""}},[i("h5",{staticClass:"font-weight-normal mb-0"},[e._v("End date")]),i("el-col",{staticClass:"ml-0 mr-0",attrs:{span:11}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,format:"dd-MM-yyyy",type:"date",placeholder:"Pick a date","picker-options":e.pickerOptionEndDate,disabled:!e.promotionTypeForm.startDate||e.promotionTypeForm.isUnlimited},model:{value:e.promotionTypeForm.endDate,callback:function(t){e.$set(e.promotionTypeForm,"endDate",t)},expression:"promotionTypeForm.endDate"}})],1),i("el-col",{staticClass:"text-center",attrs:{span:2}},[e._v("at")]),i("el-col",{staticClass:"ml-0 mr-0",attrs:{span:11}},[i("el-time-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,placeholder:"Pick a time","default-value":null!=e.promotionTypeForm.startDate&&""!=e.promotionTypeForm.startDate?e.promotionTypeForm.startDate+1:new Date,format:"HH:mm",disabled:!e.promotionTypeForm.startDate||e.promotionTypeForm.isUnlimited},model:{value:e.promotionTypeForm.endDate,callback:function(t){e.$set(e.promotionTypeForm,"endDate",t)},expression:"promotionTypeForm.endDate"}})],1)],1)],1),i("el-col",{staticClass:"pl-3",attrs:{span:3}},[i("el-checkbox",{staticClass:"mb-0 mt-4 pt-1",attrs:{id:"startDateCheckBox"},on:{change:e.changeUnlimited},model:{value:e.checkUnlimited,callback:function(t){e.checkUnlimited=t},expression:"checkUnlimited"}},[e._v(" Unlimited Date ")])],1)],1),i("el-row",{attrs:{type:"flex",gutter:0}},[i("el-col",{attrs:{span:7}},[i("el-form-item",{staticClass:"timeframe mb-0",attrs:{label:"Valid in this timeframe only"}},[i("el-switch",{on:{change:e.switchHour},model:{value:e.promotionTypeForm.isHourFilter,callback:function(t){e.$set(e.promotionTypeForm,"isHourFilter",t)},expression:"promotionTypeForm.isHourFilter"}})],1)],1),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.promotionTypeForm.isHourFilter,expression:"promotionTypeForm.isHourFilter"}],attrs:{span:17}},[i("el-checkbox",{staticClass:"align-middle mb-0 mt-2 float-right",attrs:{indeterminate:e.isIndeterminateTF},on:{change:e.handleCheckAllChangeTF},model:{value:e.checkAllTimeFrame,callback:function(t){e.checkAllTimeFrame=t},expression:"checkAllTimeFrame"}},[e._v(" Select all ")])],1)],1),e.promotionTypeForm.isHourFilter?i("el-row",[i("el-form-item",{attrs:{prop:"hourFilter"}},[i("el-row",{attrs:{gutter:20}},[i("el-checkbox-group",{model:{value:e.promotionTypeForm.hourFilter,callback:function(t){e.$set(e.promotionTypeForm,"hourFilter",t)},expression:"promotionTypeForm.hourFilter"}},e._l(e.hourFilterOptions,(function(t,n){return i("el-col",{key:n,attrs:{span:4}},[i("el-checkbox",{attrs:{label:t.value}},[i("label",{staticStyle:{"font-size":"1vw"}},[e._v(e._s(t.label)),i("i",{staticClass:"el-icon-alarm-clock ml-2"})])])],1)})),1)],1)],1)],1):e._e(),i("el-row",{attrs:{type:"flex"}},[i("el-col",{attrs:{span:7}},[i("el-form-item",{staticClass:"timeframe mb-0",attrs:{label:"Valid on particular days only"}},[i("el-switch",{on:{change:e.switchDay},model:{value:e.promotionTypeForm.isDateFilter,callback:function(t){e.$set(e.promotionTypeForm,"isDateFilter",t)},expression:"promotionTypeForm.isDateFilter"}})],1)],1),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.promotionTypeForm.isDateFilter,expression:"promotionTypeForm.isDateFilter"}],attrs:{span:17}},[i("el-checkbox",{staticClass:"align-middle mb-0 mt-2 float-right",attrs:{indeterminate:e.isIndeterminateDF},on:{change:e.handleCheckAllChangeDF},model:{value:e.checkAllDateFilter,callback:function(t){e.checkAllDateFilter=t},expression:"checkAllDateFilter"}},[e._v(" Select all ")])],1)],1),e.promotionTypeForm.isDateFilter?i("el-row",[i("el-form-item",{attrs:{prop:"dateFilter"}},[i("el-row",{attrs:{gutter:20}},[i("el-checkbox-group",{model:{value:e.promotionTypeForm.dateFilter,callback:function(t){e.$set(e.promotionTypeForm,"dateFilter",t)},expression:"promotionTypeForm.dateFilter"}},e._l(e.dateFilterOptions,(function(t){return i("el-col",{key:t.value,attrs:{span:3}},[i("el-checkbox",{attrs:{label:t.value}},[i("label",{staticStyle:{"font-size":"1vw"}},[e._v(e._s(t.label)),i("i",{staticClass:"el-icon-date ml-2"})])])],1)})),1)],1)],1)],1):e._e(),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"Description","label-position":"top",prop:"description"}},[i("center",[i("el-input",{attrs:{rows:6,resize:"none",type:"textarea",maxlength:4e3},model:{value:e.promotionTypeForm.description,callback:function(t){e.$set(e.promotionTypeForm,"description",t)},expression:"promotionTypeForm.description"}})],1)],1)],1)],1)],1)],1)])])},r=[],s=(i("7db0"),i("13d5"),i("a9e3"),i("b85c")),l=(i("96cf"),i("1da1")),c={watch:{promotionTypeForm:function(){this.promotionTypeForm.startDate&&(console.log("watch start date"),this.promotionTypeForm.startTime=new Date,this.promotionTypeForm.startTime.setHours(0,0))},checkUnlimited:function(e){this.promotionTypeForm.isUnlimited=!!e,!0===e&&(this.promotionTypeForm.endDate="")},minVoucherQuantity:function(){this.promotionTypeForm.fromIndex=this.voucherIndexInfo.fromIndex,this.promotionTypeForm.voucherQuantity=this.minVoucherQuantity}},name:"promotion-type",beforeDestroy:function(){this.$store.commit("voucher/setIndexInfo",{})},computed:{conditions:function(){return this.$store.state.voucher.conditions},voucherIndexInfo:function(){return this.$store.state.voucher.indexInfo},maxVoucherQuantity:function(){var e=this.voucherIndexInfo.remain;return e||0},minVoucherQuantity:function(){var e=this.voucherIndexInfo.remain;return e>0?1:0},vouchers:function(){return this.$store.state.voucher.voucherList},isExistPromoCode:function(){return this.$store.state.promotion.isExistPromoCode}},data:function(){var e=this,t=function(t,i,n){i?i.getTime()<=e.promotionTypeForm.startDate.getTime()?(e.promotionTypeForm.endDate="",n(new Error("Please choose End date after the Start date!"))):n():i||e.promotionTypeForm.isUnlimited?n():(e.promotionTypeForm.endDate="",n(new Error("Please choose End date!")))},i=function(t,i,n){e.promotionTypeForm.isHourFilter&&e.promotionTypeForm.hourFilter&&(0==e.promotionTypeForm.hourFilter.length?n(new Error("Please choose at least one Timeframe!")):n())},n=function(t,i,n){e.promotionTypeForm.isDateFilter&&e.promotionTypeForm.dateFilter&&(0==e.promotionTypeForm.dateFilter.length?n(new Error("Please choose at least one day!")):n())},o=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(i,n,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=4;break}o(new Error("Please input code")),t.next=6;break;case 4:return t.next=6,e.checkPromoCodeExisting(n).then((function(){if(e.isExistPromoCode)o(new Error("This code is existing"));else{for(var t=0;t<n.length;t++){if(n.charCodeAt(t)>127)return o(new Error("Unicode is not allowed!"));if(45==n.charCodeAt(t))return console.log("vô đây check dấu gạch ngang"),o(new Error("Dash (-) is not allowed!"))}o()}}));case 6:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}(),a=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(i,n,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.promotionTypeForm.hasVoucher||""!=e.promotionTypeForm.voucherGroupId){t.next=2;break}return t.abrupt("return",o(new Error("Please select Voucher")));case 2:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}();return{typeOption:1,hasVoucher:!1,pickerOptionEndDate:{disabledDate:this.handleDueDate},props:{formIndex:{type:Number,default:0,required:!1}},ruleVoucher:{voucherGroupId:[{validator:a,trigger:["blur","change"],message:"Please select Voucher"}],voucherQuantity:[{required:!0,trigger:["blur","change"],message:"Please input Quantity"}]},isActionType:!0,voucherGroupId:"",promoCodeMaxLength:20,checkAllTimeFrame:!1,isIndeterminateTF:!0,checkAllDateFilter:!1,isIndeterminateDF:!0,checkUnlimited:!1,promotionTypeForm:{promotionCode:"",promotionName:"",isAuto:!1,hasVoucher:!0,actionType:this.$ENV.ACTION_TYPE.ORDER_AMOUNT,postActionType:this.$ENV.POST_ACTION_TYPE.EMPTY,startDate:"",startTime:"",endDate:"",endTime:"",isHourFilter:!1,hourFilter:[],hourFilterNum:0,isDateFilter:!1,isUnlimited:!1,dateFilter:[],dateFilterNum:0,voucherGroupId:"",voucherQuantity:0,fromIndex:0},startDate:"",rules:{promotionName:[{required:!0,message:"Please input Promotion Name",trigger:["blur","change"]}],promotionCode:[{required:!0,message:"Please input Promotion Code",trigger:["blur","change"]},{validator:o,trigger:["blur","change"]}],promotionType:[{required:!0,message:"Please choose Promotion type",trigger:["blur","change"]}],startDate:[{type:"date",required:!0,message:"Please input Start date",trigger:"blur"}],endDate:[{validator:t,trigger:"change"}],hourFilter:[{validator:i,trigger:"change"}],dateFilter:[{validator:n,trigger:"change"}]},hourFilterOptions:[],dateFilterOptions:[{value:Math.pow(2,0),label:"Sunday"},{value:Math.pow(2,1),label:"Monday"},{value:Math.pow(2,2),label:"Tuesday"},{value:Math.pow(2,3),label:"Wednesday"},{value:Math.pow(2,4),label:"Thursday"},{value:Math.pow(2,5),label:"Friday"},{value:Math.pow(2,6),label:"Saturday"}],pickerOptionsStartDate:{disabledDate:function(e){return e.getTime()<=new Date((new Date).setDate((new Date).getDate()-1)).getTime()}},actionType:[{value:"1",label:"Action for item"},{value:"2",label:"Action for order"},{value:"3",label:"Gift action"}],promotionTypeParam:"1",isAuto:!1,loading:!1}},methods:{changeTypeOption:function(e){switch(this.$refs["promotionTypeForm"].clearValidate("promotionCode"),this.promotionTypeForm.promotionCode="",e){case 1:this.promotionTypeForm.hasVoucher=!0,this.promotionTypeForm.isAuto=!1;break;case 2:this.promotionTypeForm.hasVoucher=!1,this.promotionTypeForm.isAuto=!1;break;case 3:this.promotionTypeForm.hasVoucher=!1,this.promotionTypeForm.isAuto=!0;break}},changeSelectVoucher:function(e){var t=this.vouchers.find((function(t){return t.voucherGroupId==e}));null!=t.actionType&&t.actionType>this.$ENV.ACTION_TYPE.EMPTY?(this.isActionType=!0,this.promotionTypeForm.actionType=t.actionType,this.promotionTypeForm.postActionType=this.$ENV.POST_ACTION_TYPE.EMPTY):null!=t.postActionType&&t.postActionType>this.$ENV.POST_ACTION_TYPE.EMPTY&&(this.isActionType=!1,this.promotionTypeForm.actionType=this.$ENV.ACTION_TYPE.EMPTY,this.promotionTypeForm.postActionType=t.postActionType,console.log(this.promotionTypeForm.postActionType)),this.checkIndexInfo(e)},checkIndexInfo:function(e){var t=this;this.loading=!0,this.$store.commit("voucher/setCheckIndexId",e),this.$store.dispatch("voucher/getIndexInfo").then((function(e){200!=e.status&&t.$notify({title:"Error",message:"Cannot get Voucher info",type:"danger"}),t.loading=!1})).catch((function(){t.loading=!1,t.$notify({title:"Error",message:"Cannot get Voucher info",type:"danger"})}))},changeActionType:function(){this.isActionType?(this.promotionTypeForm.postActionType=this.$ENV.POST_ACTION_TYPE.EMPTY,this.promotionTypeForm.actionType=this.$ENV.ACTION_TYPE.ORDER_AMOUNT):(this.promotionTypeForm.postActionType=this.$ENV.POST_ACTION_TYPE.GIFT_PRODUCT,this.promotionTypeForm.actionType=this.$ENV.ACTION_TYPE.EMPTY)},changeHasVoucher:function(e){this.promotionTypeForm.voucherGroupId=null,this.promotionTypeForm.isAuto=!1,e?(this.promotionTypeForm.postActionType=this.$ENV.POST_ACTION_TYPE.EMPTY,this.promotionTypeForm.actionType=this.$ENV.ACTION_TYPE.EMPTY):(this.promotionTypeForm.postActionType=this.$ENV.POST_ACTION_TYPE.EMPTY,this.promotionTypeForm.actionType=this.$ENV.ACTION_TYPE.ORDER_AMOUNT),""==this.promotionTypeForm&&this.$refs["promotionTypeForm"].clearValidate("promotionCode")},getVoucherList:function(){var e=this;this.$store.dispatch("voucher/getVoucherListForPromo").then((function(t){200!=t.status&&e.$notify({title:"Error",message:"Cannot get Voucher",type:"danger"})})).catch((function(){e.$notify({title:"Error",message:"Cannot get Voucher",type:"danger"})}))},checkPromoCodeExisting:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=4;break}return t.$store.commit("promotion/setPromoCode",e),i.next=4,t.$store.dispatch("promotion/CheckExistPromoCode");case 4:case"end":return i.stop()}}),i)})))()},changeAuto:function(){this.promotionTypeForm.promotionCode="",this.$refs["promotionTypeForm"].clearValidate("promotionCode")},changeUnlimited:function(e){this.$refs["promotionTypeForm"].clearValidate("endDate"),e||null==this.promotionTypeForm.startDate||(this.promotionTypeForm.endDate=new Date(this.promotionTypeForm.startDate.getTime()+864e5))},changeStartDate:function(){this.promotionTypeForm.isUnlimited||(""!=this.promotionTypeForm.endDate?this.promotionTypeForm.endDate.getTime()<=this.promotionTypeForm.startDate.getTime()&&(this.promotionTypeForm.endDate=new Date(this.promotionTypeForm.startDate.getTime()+864e5)):this.promotionTypeForm.endDate=new Date(this.promotionTypeForm.startDate.getTime()+864e5))},handleDueDate:function(e){var t=new Date(this.promotionTypeForm.startDate);return!(e.getTime()>t.getTime())},handleAutoType:function(e){var t=this.promotionTypeForm;e?t.promotionType="2":this.handlePromotionType(this.promotionTypeParam)},handlePromotionType:function(e){var t=this.promotionTypeForm;switch(t.promotionType="2",e){case"1":this.isAuto||(t.promotionType="1"),t.actionType="1",t.discountType="1";break;case"2":this.isAuto||(t.promotionType="1"),t.actionType="2",t.discountType="1";break;case"3":this.isAuto||(t.promotionType="3"),t.actionType="3",t.discountType="8";break;case"4":this.isAuto||(t.promotionType="4"),t.actionType="4",t.discountType="10";break}},handleCheckAllChangeDF:function(e){console.log("handleCheckAllChangeDF val :>> ",e);var t,i=[],n=Object(s["a"])(this.dateFilterOptions);try{for(n.s();!(t=n.n()).done;){var o=t.value;i.push(o.value)}}catch(a){n.e(a)}finally{n.f()}this.promotionTypeForm.dateFilter=e?i:[],this.isIndeterminateDF=!this.isIndeterminateDF},handleCheckAllChangeTF:function(e){var t,i=[],n=Object(s["a"])(this.hourFilterOptions);try{for(n.s();!(t=n.n()).done;){var o=t.value;i.push(o.value)}}catch(a){n.e(a)}finally{n.f()}this.promotionTypeForm.hourFilter=e?i:[],this.isIndeterminateTF=!this.isIndeterminateTF},addDateFilterOptions:function(){for(var e=0;e<24;e++)e<10?this.hourFilterOptions.push({value:Math.pow(2,e),label:"0"+e+":00"}):this.hourFilterOptions.push({value:Math.pow(2,e),label:e+":00"})},switchDay:function(e){e||(this.promotionTypeForm.dateFilter=[])},switchHour:function(e){e||(this.promotionTypeForm.hourFilter=[])},nextStep:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("Please input required fields"),!1;t.handleSubmitForm(),t.$store.commit("promotion/setPromotionTypeForm",t.promotionTypeForm),t.$emit("change-page",1),console.log(t.promotionTypeForm.dateFilterNum),console.log(t.promotionTypeForm.hourFilterNum)}))},handleSubmitForm:function(){console.log(this.promotionTypeForm.hourFilter),console.log(this.promotionTypeForm.dateFilter),this.promotionTypeForm.hourFilterNum=0,this.promotionTypeForm.hourFilterNum=this.promotionTypeForm.hourFilter.reduce((function(e,t){return e+t}),0),0==this.promotionTypeForm.hourFilterNum&&(this.promotionTypeForm.hourFilterNum=16777215),this.promotionTypeForm.dateFilterNum=0,this.promotionTypeForm.dateFilterNum=this.promotionTypeForm.dateFilter.reduce((function(e,t){return e+t}),0),0==this.promotionTypeForm.dateFilterNum&&(this.promotionTypeForm.dateFilterNum=127)},getConditions:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("voucher/getConditions").then((function(t){e.loading=!1,200!=t.status&&e.$notify({icon:"el-icon-warning",title:"Error",message:"Get Condition error !",type:"danger"})})).catch((function(){e.loading=!1,e.$notify({icon:"el-icon-warning",title:"Error",message:"Get Condition error !",type:"danger"})}));case 3:case"end":return t.stop()}}),t)})))()}},created:function(){this.addDateFilterOptions()}},u=c,d=(i("cb45"),i("6063"),i("2877")),m=Object(d["a"])(u,a,r,!1,null,"7f30616d",null),p=m.exports,h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{staticClass:"mt-0",attrs:{id:"constraints"}},[i("div",[i("div",{staticClass:"card-header bg-transparent pl-0 pr-0"},[i("el-row",[i("el-col",{staticClass:"mt-1",attrs:{span:10}},[i("h1",[e._v("CONSTRAINTS")])]),i("el-col",{staticClass:"mt-2 pr-1",attrs:{offset:12,span:2}},[i("a",{staticClass:"float-right",attrs:{href:"#"}},[i("i",{staticClass:"el-icon-question"}),e._v(" "),i("span",[e._v("Get Help")])])])],1)],1)])]),i("el-form",{ref:"configurationForm",attrs:{model:e.configurationForm,rules:e.rules,id:"configuration"}},[i("el-row",[i("div",{staticClass:"card shadow mt-0"},[i("div",{staticClass:"card-header custom-card bg-transparent"},[i("el-row",[i("el-row",[i("h3",[e._v("PAYMENT METHOD")])]),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-row",{staticClass:"mt-2"},[i("p",{staticClass:"content-custom"},[e._v(" "+e._s(e.$ENV.TEXT_EXPLAIN.Payment)+" ")])])],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:"paymentMethod"}},[i("el-checkbox-group",{attrs:{fill:e.$ENV.COLORS.Main_colors},model:{value:e.configurationForm.paymentMethod,callback:function(t){e.$set(e.configurationForm,"paymentMethod",t)},expression:"configurationForm.paymentMethod"}},[i("el-row",[i("el-col",{attrs:{span:2}},[i("el-checkbox-button",{attrs:{label:"Cash",name:"paymentMethod"}})],1),i("el-col",{attrs:{span:3}},[i("el-checkbox-button",{attrs:{label:"Credit Cards",name:"paymentMethod"}})],1),i("el-col",{staticClass:"mr-2",attrs:{span:3}},[i("el-checkbox-button",{attrs:{label:"Bank Transfers",name:"paymentMethod"}})],1),i("el-col",{staticClass:"mr-4",attrs:{span:2}},[i("el-checkbox-button",{attrs:{label:"eWallets",name:"paymentMethod"}})],1),i("el-col",{staticClass:"mr-3",attrs:{span:3}},[i("el-checkbox-button",{attrs:{label:"Mobile Banking",name:"paymentMethod"}})],1),i("el-col",{attrs:{span:4}},[i("el-checkbox-button",{attrs:{label:"COD",name:"paymentMethod"}})],1)],1)],1)],1)],1)],1)],1)],1)])]),i("el-row",[i("div",{staticClass:"card shadow mt-3"},[i("div",{staticClass:"card-header custom-card bg-transparent"},[i("el-col",{attrs:{span:8}},[i("h3",[e._v("TARGET CUSTOMER")]),i("el-col",{attrs:{span:24}},[i("p",{staticClass:"content-custom"},[e._v(" "+e._s(e.$ENV.TEXT_EXPLAIN.Customer_type)+" ")])]),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:"customerType"}},[i("el-checkbox-group",{attrs:{fill:e.$ENV.COLORS.Main_colors},on:{change:e.changeCustomerType},model:{value:e.configurationForm.customerType,callback:function(t){e.$set(e.configurationForm,"customerType",t)},expression:"configurationForm.customerType"}},[i("el-col",{attrs:{span:6}},[i("el-checkbox-button",{attrs:{label:"Guest",name:"customerType"}})],1),i("el-col",{attrs:{span:8}},[i("el-checkbox-button",{attrs:{label:"Membership",name:"customerType"}})],1)],1)],1)],1)],1),i("el-col",{staticClass:"vertical-split",attrs:{span:8}},[i("div",[i("h3",[e._v("MEMBERSHIP LEVEL")]),i("el-col",{attrs:{span:24}},[i("p",{staticClass:"content-custom"},[e._v(" "+e._s(e.$ENV.TEXT_EXPLAIN.Member_level)+" ")])]),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:e.isForMembership?"memberLevelParams":""}},[i("el-select",{attrs:{disabled:!e.isForMembership,"collapse-tags":"",multiple:""},model:{value:e.configurationForm.memberLevelParams,callback:function(t){e.$set(e.configurationForm,"memberLevelParams",t)},expression:"configurationForm.memberLevelParams"}},e._l(e.memberLevels,(function(e){return i("el-option",{key:e.memberLevelId,attrs:{label:e.name,value:e.memberLevelId}})})),1)],1)],1)],1)]),i("el-col",{staticClass:"vertical-split",attrs:{span:8}},[i("h3",[e._v("CUSTOMER GENDER")]),i("el-col",{attrs:{span:24}},[i("p",{staticClass:"content-custom"},[e._v(" "+e._s(e.$ENV.TEXT_EXPLAIN.Customer_gender)+" ")])]),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:"customerGender"}},[i("el-checkbox-group",{attrs:{fill:e.$ENV.COLORS.Main_colors},model:{value:e.configurationForm.customerGender,callback:function(t){e.$set(e.configurationForm,"customerGender",t)},expression:"configurationForm.customerGender"}},[i("el-col",{attrs:{span:6}},[i("el-checkbox-button",{attrs:{label:"Male",name:"customerGender"}})],1),i("el-col",{attrs:{span:8}},[i("el-checkbox-button",{attrs:{label:"Female",name:"customerGender"}})],1)],1)],1)],1)],1)],1)])]),i("el-row",[i("div",{staticClass:"card shadow mt-3"},[i("div",{staticClass:"card-header custom-card bg-transparent"},[i("el-col",{attrs:{span:8}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("h3",[e._v("SALE MODE")]),i("el-row",[i("p",{staticClass:"content-custom"},[e._v(" "+e._s(e.$ENV.TEXT_EXPLAIN.Sale_mode)+" ")])])],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:"salesMode"}},[i("el-checkbox-group",{attrs:{fill:e.$ENV.COLORS.Main_colors},model:{value:e.configurationForm.salesMode,callback:function(t){e.$set(e.configurationForm,"salesMode",t)},expression:"configurationForm.salesMode"}},[i("el-col",{attrs:{span:6}},[i("el-checkbox-button",{attrs:{value:"Eat-in",label:"Eat-in",name:"salesMode"}})],1),i("el-col",{attrs:{span:8}},[i("el-checkbox-button",{attrs:{label:"Take-away",name:"salesMode"}})],1),i("el-col",{attrs:{span:6}},[i("el-checkbox-button",{attrs:{label:"Delivery",name:"salesMode"}})],1)],1)],1)],1)],1)],1),i("el-col",{staticClass:"vertical-split",attrs:{span:8}},[i("h3",[e._v("APPLY BY")]),i("el-col",{attrs:{span:24}},[i("p",{staticClass:"content-custom"},[e._v(" "+e._s(e.$ENV.TEXT_EXPLAIN.Apply_by)+" ")])]),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:"applyBy"}},[i("el-checkbox-group",{attrs:{fill:e.$ENV.COLORS.Main_colors},model:{value:e.configurationForm.applyBy,callback:function(t){e.$set(e.configurationForm,"applyBy",t)},expression:"configurationForm.applyBy"}},[i("el-col",{attrs:{span:6}},[i("el-checkbox-button",{attrs:{label:"Store",name:"applyBy"}})],1),i("el-col",{attrs:{span:5}},[i("el-checkbox-button",{attrs:{label:"Online",name:"applyBy"}})],1)],1)],1)],1)],1),i("el-col",{staticClass:"vertical-split",attrs:{span:8}},[i("div",[i("h3",[e._v("EXCLUSIVE")]),i("el-col",{attrs:{span:24}},[i("p",{staticClass:"content-custom"},[e._v(" "+e._s(e.$ENV.TEXT_EXPLAIN.Exclusive)+" ")])]),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:"exclusiveLabel"}},[i("el-radio-group",{attrs:{fill:e.$ENV.COLORS.Main_colors},model:{value:e.configurationForm.exclusiveLabel,callback:function(t){e.$set(e.configurationForm,"exclusiveLabel",t)},expression:"configurationForm.exclusiveLabel"}},[i("el-col",{staticClass:"p-0 m-1",attrs:{span:7}},[i("el-radio",{attrs:{border:"",label:"None"}})],1),i("el-col",{staticClass:"p-0 m-1",attrs:{span:7}},[i("el-radio",{attrs:{border:"",label:"Level"}})],1),i("el-col",{staticClass:"p-0 m-1",attrs:{span:7}},[i("el-radio",{attrs:{border:"",label:"Global"}})],1)],1)],1)],1)],1)])],1)])]),i("el-row",[i("div",{staticClass:"card shadow mt-3"},[i("div",{staticClass:"card-header custom-card bg-transparent"},[i("el-row",{attrs:{gutter:20,justify:"space-between"}},[i("el-col",{attrs:{span:24}},[i("el-col",{attrs:{span:24}},[i("h3",[e._v("STORES CONFIGURATION")])]),i("el-col",{attrs:{span:18}},[i("p",{staticClass:"content-custom"},[e._v(" "+e._s(e.$ENV.TEXT_EXPLAIN.Store)+" ")])]),i("el-col",{attrs:{span:6}},[i("el-checkbox",{staticClass:"float-right",attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("Select all")])],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{prop:"storeApply"}},[i("el-checkbox-group",{attrs:{fill:e.$ENV.COLORS.Main_colors},on:{change:e.handleCheckedStoresChange},model:{value:e.configurationForm.storeApply,callback:function(t){e.$set(e.configurationForm,"storeApply",t)},expression:"configurationForm.storeApply"}},e._l(e.storeList,(function(t){return i("el-col",{key:t.storeId,attrs:{span:6}},[i("el-checkbox",{attrs:{label:t}},[e._v(" "+e._s(e._f("storeNameFilter")(t.storeName))+" ")])],1)})),1)],1)],1)],1)],1)],1)])])],1)],1)},g=[],f=(i("4160"),i("caad"),i("d3b7"),i("25f0"),i("2532"),i("159b"),{name:"promotion-configuration",filters:{storeNameFilter:function(e){var t=35;return e.length>t?e.substring(0,t-3)+"...":e}},data:function(){var e=this,t=function(e,t,i){console.log("validate member level"),console.log(t),0==t.length?i(new Error("Please select level of member")):i()},i=function(t,i,n){"Yes"==e.configurationForm.isLimitUsage?i?i<=0?n(new Error("Please input a positive number")):i>100?n(new Error("Please input smaller than 100")):n():n(new Error("Please input your limit")):n()},n=function(e,t,i){t<0?i(new Error("Please input a positive number")):i()};return{props:{formIndex:{type:Number,default:0,required:!1}},checkAll:!1,isIndeterminate:!0,rules:{memberLevelParams:[{validator:t,trigger:["blur","change"]}],exclusiveLabel:[{required:!0,message:"Please choose Exclusive level",trigger:["blur","change"]}],rank:[{validator:n,trigger:"change"}],salesMode:[{required:!0,message:"Please choose at least one sale mode",trigger:["blur","change"]}],applyBy:[{required:!0,message:"Please choose at least one application",trigger:["blur","change"]}],isHolidayApply:[{required:!0,message:"Please check this if you want to apply for holiday or not!?",trigger:["blur","change"]}],customerType:[{required:!0,message:"Please choose at least one Customer type",trigger:["blur","change"]}],customerGender:[{required:!0,message:"Please choose at least one gender",trigger:["blur","change"]}],paymentMethod:[{required:!0,message:"Please choose at least one payment",trigger:["blur","change"]}],isLimitUsage:[{required:!0,message:"Please choose if you want to limit your voucher or not?",trigger:["blur","change"]}],limitUsage:[{validator:i,trigger:"change"}],storeApply:[{required:!0,message:"Please choose at least one store",trigger:["blur","change"]}]},sales:0,configurationForm:{exclusiveLabel:"None",exclusive:0,rank:0,salesMode:[],salesModeNum:"",applyBy:[],applyByNum:"",isHolidayApply:"Yes",isHolidayApplyNum:!1,customerType:[],customerTypeNum:0,customerGender:[],customerGenderNum:"",paymentMethod:[],paymentMethodNum:"",isLimitUsage:"No",isLimitUsageNum:!1,limitUsage:"",storeApply:[],imgUrl:"",memberLevels:[],memberLevelParams:[],isForGame:!0},isForMembership:!1}},computed:{memberLevels:function(){return this.$store.state.condition.levels},storeList:function(){return this.$store.state.stores.storeList},promotionTypeForm:function(){return this.$store.state.promotion.promotionTypeForm}},methods:{changeCustomerType:function(e){this.isForMembership=e.includes("Membership"),this.isForMembership||(this.configurationForm.memberLevels=[],this.configurationForm.memberLevelParams=[])},handleCheckAllChange:function(e){this.configurationForm.storeApply=e?this.storeList:[],console.log("this.storeList :>> ",this.storeList),console.log("this.configurationForm.storeApply :>> ",this.configurationForm.storeApply),this.isIndeterminate=!this.isIndeterminate,console.log("handleCheckAllChange :>> ",e),this.$store.commit("promotion/setIsLimitForStore",!e)},handleCheckedStoresChange:function(e){console.log("value :>> ",e);var t=e.length;this.checkAll=t===this.storeList.length,this.isIndeterminate=t>0&&t<this.storeList.length,this.$store.commit("promotion/setIsLimitForStore",!this.checkAll)},nextStep:function(e){var t=this;this.$refs[e].validate((function(e){if(!t.isForMembership||0!=t.configurationForm.memberLevelParams.length)return e?(t.handleConfigurationForm(),t.$store.commit("promotion/setPromotionConfigurationForm",t.configurationForm),void t.$emit("change-page",2)):(t.$message.error("Please input required fields"),!1);t.$notify({title:"Error",message:"Please select level of member",type:"error"})}))},handleChangeLimitation:function(e){"No"==e&&(this.configurationForm.limitUsage=1)},handleConfigurationForm:function(){var e=this,t=this.$ENV.EXCLUSIVE;switch(this.configurationForm.exclusiveLabel){case"None":this.configurationForm.exclusive=t.NONE;break;case"Level":var i=this.promotionTypeForm.actionType,n=this.promotionTypeForm.postActionType;console.log("possss >>>",n),i>this.$ENV.ACTION_TYPE.EMPTY?i<this.$ENV.ACTION_TYPE.ORDER_SHIPPING?this.configurationForm.exclusive=t.LEVEL_ORDER:i==this.$ENV.ACTION_TYPE.ORDER_SHIPPING?this.configurationForm.exclusive=t.LEVEL_SHIPPING:this.configurationForm.exclusive=t.LEVEL_PRODUCT:n>0&&(this.configurationForm.exclusive=t.LEVEL_GIFT);break;case"Global":this.configurationForm.exclusive=t.GLOBAL;break}this.configurationForm.salesModeNum=0,this.configurationForm.salesMode.forEach((function(t){switch(t){case"Eat-in":e.configurationForm.salesModeNum+=1;break;case"Take-away":e.configurationForm.salesModeNum+=2;break;case"Delivery":e.configurationForm.salesModeNum+=4;break}})),this.configurationForm.applyByNum=0,this.configurationForm.applyBy.forEach((function(t){switch(t){case"Store":e.configurationForm.applyByNum+=1;break;case"Online":e.configurationForm.applyByNum+=2;break}})),"Yes"==this.configurationForm.isHolidayApply?this.configurationForm.isHolidayApplyNum=!0:this.configurationForm.isHolidayApplyNum=!1,this.configurationForm.customerType.length>1?this.configurationForm.customerTypeNum=0:this.configurationForm.customerTypeNum="Guest"==this.configurationForm.customerType[0]?"2":"1",this.configurationForm.customerType.includes("Membership")&&this.configurationForm.memberLevelParams.forEach((function(t){e.memberLevels.forEach((function(i){i.memberLevelId==t&&e.configurationForm.memberLevels.push(i)}))})),this.configurationForm.customerGenderNum=0,this.configurationForm.customerGender.forEach((function(t){switch(t){case"Male":e.configurationForm.customerGenderNum+=1;break;case"Female":e.configurationForm.customerGenderNum+=2;break}})),this.configurationForm.paymentMethodNum=0,this.configurationForm.paymentMethod.forEach((function(t){switch(t){case"Cash":e.configurationForm.paymentMethodNum+=1;break;case"Credit Cards":e.configurationForm.paymentMethodNum+=2;break;case"Bank Transfers":e.configurationForm.paymentMethodNum+=4;break;case"eWallets":e.configurationForm.paymentMethodNum+=8;break;case"Mobile Banking":e.configurationForm.paymentMethodNum+=16;break;case"COD":e.configurationForm.paymentMethodNum+=32;break}})),"Yes"==this.configurationForm.isLimitUsage?this.configurationForm.isLimitUsageNum=!0:this.configurationForm.isLimitUsageNum=!1},getStoreList:function(){var e=this;this.$store.commit("stores/setPageIndex",0),this.$store.commit("stores/setPageSize",0),this.$store.dispatch("stores/getStoresList").then((function(){e.loading=!1}),(function(t){e.loading=!1,e.message=t.response&&t.response.data||t.message||t.toString()})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))},saveNewDraft:function(){var e=this;this.loading=!0,this.isSaved=!0,this.handleConfigurationForm(),this.$store.commit("promotion/setPromotionConfigurationForm",this.configurationForm),this.$store.dispatch("promotion/savePromotion").then((function(t){e.loading=!1,console.log("save promo"),console.log(t),200==t.status?(e.$message({type:"success",message:"Congrats! Create promotion successful."}),e.$router.push("/campaign/promotion")):e.$message({message:t.data.message+", please try again.",type:"error"})})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"})}))},saveDraft:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("Please input required fields"),!1;t.saveNewDraft()}))},getMemberLevels:function(){this.$store.dispatch("condition/getBrandLevel")}},created:function(){this.getStoreList(),this.getMemberLevels()}}),v=f,b=(i("a098"),Object(d["a"])(v,h,g,!1,null,"169b98fa",null)),y=b.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{staticClass:"mt-3",attrs:{id:"constraints"}},[i("div",[i("div",{staticClass:"card-header bg-transparent"},[i("el-row",[i("el-col",{staticClass:"mt-1",attrs:{span:10}},[i("h1",[e._v("PREVIEW")])]),i("el-col",{staticClass:"mt-2",attrs:{offset:12,span:2}},[i("a",{attrs:{href:"#"}},[i("i",{staticClass:"el-icon-question"}),e._v(" "),i("span",[e._v("Get Help")])])])],1)],1)])]),i("el-row",[i("el-card",{attrs:{shadow:"always"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("b",[e._v(" Name: ")]),e._v(e._s(e.promotionTypeForm.promotionName))])],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:12}},[i("el-row",[i("el-col",{attrs:{span:10}},[i("b",[e._v(" Start Date: ")])]),i("el-col",{attrs:{span:12}},[e._v(e._s(e._f("dateFormat")(e.promotionTypeForm.startDate)))])],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:10}},[i("b",[e._v(" End Date: ")])]),i("el-col",{attrs:{span:12}},[e._v(e._s(e._f("dateFormat")(e.promotionTypeForm.endDate)))])],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:10}},[i("b",[e._v(" Exclusive:")])]),i("el-col",{attrs:{span:12}},[e._v(e._s(e._f("exclusiveFilter")(e.promotionConfigurationForm.exclusive)))])],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:10}},[i("b",[e._v(" Status:")])]),i("el-col",{attrs:{span:12}},[e._v(e._s(e._f("statusFilter")(e.promotionTypeForm.status)))])],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:10}},[i("b",[e._v(" Payment methods:")])]),i("el-col",{attrs:{span:12}},[e._v(e._s(void 0==e.promotionConfigurationForm.paymentMethod?"":e.promotionConfigurationForm.paymentMethod.toString()))])],1)],1),i("el-col",{attrs:{span:12}},[i("el-row",[i("el-col",{attrs:{span:10}},[i("b",[e._v(" Sale mode:")])]),i("el-col",{attrs:{span:12}},[e._v(" "+e._s(void 0==e.promotionConfigurationForm.salesMode?"":e.promotionConfigurationForm.salesMode.toString())+" ")])],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:10}},[i("b",[e._v(" Apply by: ")])]),i("el-col",{attrs:{span:12}},[e._v(e._s(void 0==e.promotionConfigurationForm.applyBy?"":e.promotionConfigurationForm.applyBy.toString()))])],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:10}},[i("b",[e._v(" Available on holiday:")])]),i("el-col",{attrs:{span:12}},[e._v(e._s(e.promotionConfigurationForm.isHolidayApply))])],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:10}},[i("b",[e._v(" Customer type:")])]),i("el-col",{attrs:{span:12}},[e._v(e._s(void 0==e.promotionConfigurationForm.customerType?"":e.promotionConfigurationForm.customerType.toString()))])],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:10}},[i("b",[e._v(" Customer gender:")])]),i("el-col",{attrs:{span:12}},[e._v(e._s(void 0==e.promotionConfigurationForm.customerGender?"":e.promotionConfigurationForm.customerGender.toString()))])],1)],1)],1),i("el-row",{staticClass:"mt-3"},[i("el-col",{attrs:{span:12}},[i("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"",multiple:!1,"http-request":e.uploadImage,"show-file-list":!1,accept:"image/png, image/jpeg"}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v(" Drop file here or "),i("em",[e._v("click to upload")])])])],1),i("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingImage,expression:"loadingImage"}],attrs:{span:6}},[e.image?i("img",{staticClass:"img-fluid",attrs:{src:e.image}}):e._e()])],1)],1)],1)],1)},w=[],x=(i("b0c0"),i("2591")),_=i("c1df"),P=i.n(_),T={name:"promotion-preview",computed:{promotionTypeForm:function(){return this.$store.state.promotion.promotionTypeForm},promotionConfigurationForm:function(){return this.$store.state.promotion.promotionConfigurationForm}},created:function(){},data:function(){return{image:"",imageData:null,loadingImage:!1}},methods:{uploadImage:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.image=null,t.imageData=e.file,t.loadingImage=!0,n=x["a"].storage().ref("".concat(t.imageData.name)).put(t.imageData),n.on("state_changed",(function(e){t.uploadValue=e.bytesTransferred/e.totalBytes*100}),(function(e){console.log(e.message)}),(function(){t.uploadValue=100,n.snapshot.ref.getDownloadURL().then((function(e){t.image=e,t.$store.commit("promotion/setPromotionImage",t.image),t.loadingImage=!1}))}));case 5:case"end":return i.stop()}}),i)})))()}},filters:{statusFilter:function(){return"Draft"},exclusiveFilter:function(e){switch(e){case 0:return"None";case 1:return"Global";case 2:return"Level Order";case 3:return"Level Product";case 4:return"Level Shipping";case 5:return"Level Gift"}},promotionType:function(e){switch(e){case"1":return"Discount";case"2":return"Promotion";case"3":return"Gift";case"4":return"Bonus point"}},dateFormat:function(e){return e?P()(e).format("DD/MM/YYYY - HH:mm"):"Unlimit"}}},I=T,E=(i("1f73"),Object(d["a"])(I,C,w,!1,null,"4aadfb36",null)),k=E.exports,$={name:"wizard",components:{PromotionType:p,PromotionConfiguration:y,PromotionPreview:k},created:function(){var e=this.$session.get("user-info");if(void 0!=e){var t=e.brandId;void 0!=t?this.$store.commit("stores/setBrandId",t):this.$router.push("/login").catch((function(){}))}else this.$router.push("/login").catch((function(){}))},data:function(){return{formIndex:0,loading:!1,route:{path:"/campaign/promotion/wizard"},promotionType:!0,isSaved:!1}},methods:{nextStep:function(){switch(this.formIndex){case 0:this.$refs.type.nextStep("promotionTypeForm"),this.backTop();break;case 1:this.$refs.configuration.nextStep("configurationForm"),this.backTop();break;case 2:this.$refs.configuration.nextStep("");break}},changeForm:function(e){this.formIndex=e},backTop:function(){window.scrollTo({top:0,behavior:"smooth"})},back:function(){this.formIndex--},finish:function(){this.$refs.configuration.saveNewDraft()}}},S=$,D=Object(d["a"])(S,n,o,!1,null,null,null);t["default"]=D.exports},d6e4:function(e,t,i){},d8b4:function(e,t,i){"use strict";i("e512")},dc24:function(e,t,i){"use strict";i("d421")},e36d:function(e,t,i){"use strict";i("3389")},e512:function(e,t,i){},eb8d:function(e,t,i){"use strict";i("0d10")},ebd0:function(e,t,i){},eca8:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow container-fluid mt-3 mb-3 pb-2",attrs:{id:"product-cate"}},[i("div",{staticClass:"row pt-3 pb-2"},[e._m(0),i("div",{staticClass:"col-6"},[i("div",{staticClass:"row justify-content-end"},[e.isEdit?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close"},on:{click:e.editMode}},[e._v("Cancel")]):e._e(),e.isEdit?i("el-button",{attrs:{type:"success",icon:"el-icon-document-checked",size:"mini"},on:{click:e.saveProdCate}},[e._v("Save")]):e._e(),this.isPress?e._e():i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.productCateList.length>0,expression:"productCateList.length > 0"}],attrs:{type:"success",icon:"el-icon-edit-outline",size:"mini"},on:{click:e.editMode}},[e._v("Edit")]),e.isAdd?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close"},on:{click:e.addMode}},[e._v("Cancel")]):e._e(),this.isPress?e._e():i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:e.addMode}},[e._v("Add")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.productCateList.length>0,expression:"productCateList.length > 0"}],attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.multiSelection.length>0,size:"mini"},on:{click:e.cancelDialog}},[e._v("Delete")])],1)])]),e.isAdd?i("div",{staticClass:"col-12"},[i("el-form",{ref:"createForm",staticClass:"row justify-content-center",attrs:{model:e.createForm,rules:e.addRules}},[i("el-form-item",{staticClass:"col-5 mb-0",attrs:{prop:"cateId"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Category Id ")])]),i("el-input",{attrs:{type:"text",placeholder:"Input Id here",size:"small",maxlength:"30",spellcheck:"false","show-word-limit":""},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.createForm.cateId,callback:function(t){e.$set(e.createForm,"cateId",t)},expression:"createForm.cateId"}})],1),i("el-form-item",{staticClass:"col-5 mb-3",attrs:{prop:"name"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Category Name ")])]),i("el-input",{attrs:{type:"text",placeholder:"Input name here",size:"small",maxlength:"50",spellcheck:"false","show-word-limit":""},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1),i("el-form-item",{staticClass:"col-1 mb-0 mt-2 align-self-center"},[i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.submitForm("createForm")}}},[e._v("Add")])],1)],1)],1):e._e(),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"mb-2 product-cate-table",staticStyle:{width:"100%"},attrs:{data:e.productCateList,"max-height":"580",height:"580","cell-style":{padding:"0",height:"5vh"},stripe:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),i("el-table-column",{attrs:{label:"No.",type:"index",index:e.indexMethod,width:"50"}}),i("el-table-column",{attrs:{label:"Category Id",prop:"cateId"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?i("el-input",{attrs:{type:"text",placeholder:"Input Id here",size:"small",maxlength:"30",spellcheck:"false",valid:t.row.valid,"show-word-limit":""},on:{input:function(i){return e.handleChangeId(t.$index,t.row.cateId)}},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:t.row.cateId,callback:function(i){e.$set(t.row,"cateId",i)},expression:"scope.row.cateId"}}):e._e(),e.isEdit?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.cateId))])]}}])}),i("el-table-column",{attrs:{label:"Category Name",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?i("el-input",{attrs:{disabled:!e.isEdit,type:"text",placeholder:"Input name here",size:"small",maxlength:"50",spellcheck:"false",valid:t.row.valid,"show-word-limit":""},on:{input:function(i){return e.handleChangeName(t.$index,t.row.name)}},model:{value:t.row.name,callback:function(i){e.$set(t.row,"name",i)},expression:"scope.row.name"}}):e._e(),e.isEdit?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.name))])]}}])})],1),i("div",{staticClass:"d-flex justify-content-end pr-0"},[i("base-pagination",{ref:"basePagination",staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1),i("el-dialog",{attrs:{title:"Confirm action",visible:e.dialogVisible,width:"27%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("Are you sure you want to delete these items ?")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelDialog}},[e._v("Cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:e.hideProdCate}},[e._v("Confirm")])],1)])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-6"},[i("div",{staticClass:"row justify-content-start"},[i("strong",[e._v("Product Categories")])])])}],a=(i("4160"),i("caad"),i("c975"),i("a434"),i("b0c0"),i("ac1f"),i("2532"),i("5319"),i("498a"),i("159b"),i("b85c")),r={name:"product-cate-table",data:function(){return{isEdit:!1,isAdd:!1,isPress:!1,loading:!0,isDuplicate:!1,pagination:{default:1},pageCount:1,isActive:!0,multiSelection:[],errorIndex:[],editIndex:[],createForm:{cateId:"",name:""},dialogVisible:!1,addRules:{cateId:[{validator:this.validateAddCode,trigger:"change"}],name:[{validator:this.validateAddName,trigger:"change"}]}}},watch:{editIndex:function(){if(this.editIndex){var e,t=Object(a["a"])(this.editIndex);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=this.productCateList[i];n.cateId&&n.name.trim()||(!n.cateId&&n.name.trim()?this.errorIndex.includes(i)||(console.log("đẩy lỗi ở editIndex !product.cateId && product.name.trim()"),this.errorIndex.push(i)):n.cateId&&!n.name.trim()&&(this.errorIndex.includes(i)||(console.log("đẩy lỗi ở editIndex product.cateId && !product.name.trim()"),this.errorIndex.push(i))))}}catch(o){t.e(o)}finally{t.f()}}}},props:{},computed:{productCateList:function(){return this.setPageCount(),this.$store.state.product_cate.productCateList},productCateIdList:function(){return this.$store.state.product_cate.productCateIdList}},methods:{validateAddName:function(e,t,i){t?(console.log("validateAddName :>> ",t),t.trim()?i():i(new Error("Name is required!"))):i(new Error("Name is required!"))},validateAddCode:function(e,t,i){if(t){for(var n=this.productCateIdList,o=0;o<t.length;o++)t.charCodeAt(o)>127&&i(new Error("Accept no Unicode!"));t.trim()?-1!=n.indexOf(t)?i(new Error("Duplicate Id!")):i():i(new Error("Id is required!"))}else i(new Error("Id is required!"))},resetPage:function(){this.$refs["basePagination"].changePage(1)},getProductCate:function(){var e=this;this.$store.dispatch("product_cate/getProductCate").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("ProductCateTable.vue - getProdCate:>> "+t)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.addProductCate()}))},addProductCate:function(){var e=this;this.loading=!0,this.$store.commit("product_cate/setCateId",this.createForm.cateId.trim()),this.$store.commit("product_cate/setName",this.createForm.name.replace(/\s+/g," ").trim()),this.$store.dispatch("product_cate/addProdCate").then((function(){e.$message({message:"Add successful.",type:"success"}),console.log("dispatch success"),e.loading=!1,e.isPress=!e.isPress,e.isAdd=!e.isAdd,e.createForm.cateId="",e.createForm.name="",e.resetPage(),e.getProductCate()}),(function(t){e.$message({message:"Add failed.",type:"danger"}),console.log("ProductCateTable.vue - addProdCate:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("ProductCateTable.vue - addProdCate:>> "+t)}))},changePage:function(e){this.$store.commit("product_cate/setPageIndex",e),this.loading=!0,this.getProductCate()},setPageCount:function(){var e=this.$store.state.product_cate.PageSize;this.pageCount=Math.ceil(this.$store.state.product_cate.counter/e)},indexMethod:function(e){var t=this.$store.state.product_cate.PageSize,i=this.$store.state.product_cate.PageIndex;return e+=1,i>1?e+(i-1)*t:e},handleSelectionChange:function(e){console.log("val :>> ",e),this.multiSelection=e},editMode:function(){this.isEdit=!this.isEdit,this.isPress=!this.isPress,this.isEdit||(this.editIndex=[],this.errorIndex=[],this.handleSelectionChange([]),this.getProductCate())},addMode:function(){this.isAdd=!this.isAdd,this.isPress=!this.isPress,this.isAdd||(this.createForm.cateId="",this.createForm.name="",this.handleSelectionChange([]),this.getProductCate())},cancelDialog:function(){this.dialogVisible=!this.dialogVisible,this.dialogVisible||(this.handleSelectionChange([]),this.getProductCate())},handleChangeId:function(e,t){var i=this;if(console.log("handleChangeId :>> ",t),t){for(var n=!1,o=0;o<t.length;o++)t.charCodeAt(o)>127&&(n=!0);n?(this.$message({showClose:!0,center:!0,duration:2500,message:"Accept no Unicode!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeId existUnicode"),this.errorIndex.push(e)),console.log("this.errorIndex :>> ",this.errorIndex)):(this.errorIndex.includes(e)&&(console.log("gỡ lỗi ở handlechangeId"),this.errorIndex.splice(this.errorIndex.indexOf(e),1)),this.$store.commit("product_cate/setCateId",t),this.$store.commit("product_cate/setProductCateId",this.productCateList[e].productCateId),this.$store.dispatch("product_cate/checkDuplicate").then((function(){i.isDuplicate=i.$store.state.product_cate.isDuplicate,i.isDuplicate&&(i.$message({showClose:!0,center:!0,duration:2500,message:"Duplicate Code!",type:"error"}),i.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeId checkDuplicate"),i.errorIndex.push(e)))})))}else this.$message({showClose:!0,center:!0,duration:2500,message:"CateId is required!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeId khi mà ko có value"),this.errorIndex.push(e));this.handleChange(e)},handleChangeName:function(e,t){console.log("handleChangeName :>> ",t),t?t.trim()?this.errorIndex.includes(e)&&(console.log("gỡ lỗi ở handleChangeName khi mà có value"),this.errorIndex.splice(this.errorIndex.indexOf(e),1)):(this.$message({showClose:!0,center:!0,duration:2500,message:"Name is required!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeName khi mà !value.trim()"),this.errorIndex.push(e))):(this.$message({showClose:!0,center:!0,duration:2500,message:"Name is required!",type:"error"}),this.errorIndex.includes(e)||(console.log("đẩy lỗi ở handleChangeName khi mà ko có value"),this.errorIndex.push(e))),this.handleChange(e)},handleChange:function(e){this.editIndex.includes(e)?this.editIndex.splice(this.editIndex.indexOf(e),1,e):this.editIndex.push(e)},hideProdCate:function(){var e=this;this.loading=!this.loading;var t=this.multiSelection;this.$store.commit("product_cate/setHideParams",t),this.$store.dispatch("product_cate/hideProdCate").then((function(){e.$message({message:"Delete successful.",type:"warning"}),e.dialogVisible=!e.dialogVisible,e.resetPage(),e.getProductCate()}),(function(t){console.log("Delete FAIL: product_cate/hideProdCate"),console.log(t),e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("ProductCateTable.vue - hideProdCate:>> "+t)}))},saveProdCate:function(){var e=this;if(this.errorIndex.length>0)this.$message({showClose:!0,center:!0,duration:5e3,message:"Product Categories: Please check again the error field(s)!",type:"error"}),console.log("this.errorIndex :>> ",this.errorIndex);else if(this.loading=!0,null!=this.editIndex&&this.editIndex.length>0){var t=[];this.editIndex.forEach((function(i){var n={productCateId:e.productCateList[i].productCateId,cateId:e.productCateList[i].cateId.trim(),name:e.productCateList[i].name.replace(/\s +/g," ").trim()};t.push(n)})),this.$store.commit("product_cate/setUpdateParams",t),this.$store.dispatch("product_cate/saveProdCate").then((function(){e.$message({showClose:!0,center:!0,duration:3e3,message:"Save successful!",type:"success"}),e.isPress=!e.isPress,e.isEdit=!e.isEdit,e.editIndex=[],e.errorIndex=[],e.resetPage(),e.getProductCate()}),(function(t){e.$message({showClose:!0,center:!0,duration:3e3,message:"Save failed!",type:"error"}),console.log("ProductCateTable.vue - saveProdCate:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("ProductCateTable.vue - saveProdCate:>> "+t)}))}else this.isPress=!this.isPress,this.isEdit=!this.isEdit,this.getProductCate()}},created:function(){this.getProductCate()},destroyed:function(){this.$store.commit("product_cate/setPageIndex",1)},filters:{}},s=r,l=(i("8652"),i("2877")),c=Object(l["a"])(s,n,o,!1,null,null,null);t["a"]=c.exports},f0d1:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-7",attrs:{type:"gradient-success"}}),i("div",{staticClass:"ml-4 mr-4 mb-4 p-4 mt--5 float-center"},[i("div",{staticClass:"card shadow container-fluid mt-3 mb-3 pb-2",attrs:{id:"game"}},[i("div",{staticClass:"row pt-3 pb-2"},[e._m(0),i("div",{staticClass:"col-6"},[i("div",{staticClass:"row justify-content-end"},[e.isEdit?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close"},on:{click:e.editMode}},[e._v("Cancel")]):e._e(),e.isEdit?i("el-button",{attrs:{type:"success",icon:"el-icon-document-checked",size:"mini"},on:{click:e.saveGame}},[e._v("Save")]):e._e(),this.isPress?e._e():i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.gameList.length>0,expression:"gameList.length > 0"}],attrs:{type:"success",icon:"el-icon-edit-outline",size:"mini"},on:{click:e.editMode}},[e._v("Edit")]),e.isAdd?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-close"},on:{click:e.addMode}},[e._v("Cancel")]):e._e(),this.isPress?e._e():i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:e.addMode}},[e._v("Add")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.gameList.length>0,expression:"gameList.length > 0"}],attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.multiSelection.length>0,size:"mini"},on:{click:e.cancelDialog}},[e._v("Delete")])],1)])]),e.isAdd?i("div",{staticClass:"col-12"},[i("el-form",{ref:"createForm",staticClass:"row justify-content-center",attrs:{model:e.createForm,rules:e.addRules}},[i("el-form-item",{staticClass:"col-5 mb-3",attrs:{prop:"name"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Game Name ")])]),i("el-input",{attrs:{type:"text",placeholder:"Input name here",size:"small",spellcheck:"false",maxlength:"50","show-word-limit":""},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1),i("el-form-item",{staticClass:"col-2 mb-3",attrs:{prop:"minItem"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Min item ")])]),i("el-input-number",{attrs:{size:"small",min:5,max:15,placeholder:"Input min item here"},model:{value:e.createForm.minItem,callback:function(t){e.$set(e.createForm,"minItem",t)},expression:"createForm.minItem"}})],1),i("el-form-item",{staticClass:"col-2 mb-3",attrs:{prop:"maxItem"}},[i("p",{staticClass:"mb-0"},[i("small",[e._v(" Max item ")])]),i("el-input-number",{attrs:{size:"small",min:5,max:15,placeholder:"Input man item here"},model:{value:e.createForm.maxItem,callback:function(t){e.$set(e.createForm,"maxItem",t)},expression:"createForm.maxItem"}})],1),i("el-form-item",{staticClass:"col-1 mb-0 mt-2 align-self-center"},[i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.submitForm("createForm")}}},[e._v("Add")])],1)],1)],1):e._e(),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"mb-2 game-table",staticStyle:{width:"100%"},attrs:{data:e.gameList,"max-height":"580",height:"580","cell-style":{padding:"0",height:"5vh"},"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),i("el-table-column",{attrs:{label:"No.",type:"index",index:e.indexMethod,width:"50"}}),i("el-table-column",{attrs:{label:"Game Name",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?i("el-input",{attrs:{type:"text",placeholder:"Input name here",size:"small",maxlength:"30",spellcheck:"false","show-word-limit":""},on:{input:function(i){return e.handleChangeName(t.row,t.$index,t.row.name)}},model:{value:t.row.name,callback:function(i){e.$set(t.row,"name",i)},expression:"scope.row.name"}}):e._e(),e.isEdit?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.name))])]}}])}),i("el-table-column",{attrs:{label:"Min Item",prop:"minItem"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?i("el-input-number",{attrs:{min:5,max:15,placeholder:"Input min item here",size:"small",maxlength:"30",spellcheck:"false","show-word-limit":""},on:{input:function(i){return e.handleChangeMinMaxItem(t.row,t.$index,t.row.minItem,t.row.maxItem)}},model:{value:t.row.minItem,callback:function(i){e.$set(t.row,"minItem",i)},expression:"scope.row.minItem"}}):e._e(),e.isEdit?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.minItem))])]}}])}),i("el-table-column",{attrs:{label:"Max Item",prop:"maxItem"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?i("el-input-number",{attrs:{min:5,max:15,placeholder:"Input max item here",size:"small",maxlength:"30",spellcheck:"false","show-word-limit":""},on:{input:function(i){return e.handleChangeMinMaxItem(t.$index,t.row.minItem,t.row.maxItem,t.row)}},model:{value:t.row.maxItem,callback:function(i){e.$set(t.row,"maxItem",i)},expression:"scope.row.maxItem"}}):e._e(),e.isEdit?e._e():i("label",{staticClass:"mb-0"},[e._v(e._s(t.row.maxItem))])]}}])})],1),i("div",{staticClass:"d-flex justify-content-end pr-0"},[i("base-pagination",{ref:"basePagination",staticClass:"mb-0",attrs:{"page-count":e.pageCount},on:{input:e.changePage},model:{value:e.pagination.default,callback:function(t){e.$set(e.pagination,"default",t)},expression:"pagination.default"}})],1),i("el-dialog",{attrs:{title:"Confirm action",visible:e.dialogVisible,width:"27%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("Are you sure you want to delete these items ?")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelDialog}},[e._v("Cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:e.hideGame}},[e._v("Confirm")])],1)])],1)])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-6"},[i("div",{staticClass:"row justify-content-start"},[i("strong",[e._v("Games")])])])}],a=(i("4160"),i("caad"),i("c975"),i("a434"),i("b0c0"),i("ac1f"),i("2532"),i("5319"),i("498a"),i("159b"),{name:"game-table",data:function(){return{isEdit:!1,isAdd:!1,isPress:!1,loading:!0,isDuplicate:!1,pagination:{default:1},pageCount:1,multiSelection:[],errorIndex:[],editIndex:[],createForm:{name:"",minItem:0,maxItem:0},dialogVisible:!1,addRules:{name:[{validator:this.validateAddName,trigger:"change"}],storeId:[{required:!0,message:"Store is required!"}]}}},watch:{},props:{},computed:{gameList:function(){return this.setPageCount(),this.$store.state.game.gameList},storeList:function(){return this.$store.state.game.storeSelectList}},methods:{validateAddName:function(e,t,i){t?(console.log("validateAddName :>> ",t),t.trim()?i():i(new Error("Name is required!"))):i(new Error("Name is required!"))},resetPage:function(){this.$refs["basePagination"].changePage(1)},getGame:function(){var e=this;this.$store.dispatch("game/getGame").then((function(){e.loading=!1})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("GameTable.vue - getGame:>> "+t)}))},handleClickDropDown:function(e){console.log("val :>> ",e)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.addGame()}))},addGame:function(){var e=this;this.loading=!0,this.createForm.name.replace(/\s +/g," ").trim(),this.$store.commit("game/setNewGame",this.createForm),this.$store.dispatch("game/addGame").then((function(){e.$message({message:"Add successful.",type:"success"}),e.loading=!1,e.isPress=!e.isPress,e.isAdd=!e.isAdd,e.createForm.storeId="",e.createForm.name="",e.resetPage(),e.getGame()}),(function(t){e.$message({message:"Add failed.",type:"danger"}),console.log("GameTable.vue - addDev:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("GameTable.vue - addDev:>> "+t)}))},changePage:function(e){console.log("index :>> ",e),this.$store.commit("game/setPageIndex",e),this.loading=!0,this.getGame()},setPageCount:function(){var e=this.$store.state.game.PageSize;console.log("counter :>> ",this.$store.state.game.counter),console.log("pageSize :>> ",this.$store.state.game.PageSize),this.pageCount=Math.ceil(this.$store.state.game.counter/e)},indexMethod:function(e){var t=this.$store.state.game.PageSize,i=this.$store.state.game.PageIndex;return e+=1,i>1?e+(i-1)*t:e},handleSelectionChange:function(e){this.multiSelection=e},editMode:function(){this.isEdit=!this.isEdit,this.isPress=!this.isPress,this.isEdit||(this.handleSelectionChange([]),this.getGame())},addMode:function(){this.isAdd=!this.isAdd,this.isPress=!this.isPress,this.isAdd||(this.createForm.name="",this.createForm.storeId="",this.handleSelectionChange([]),this.getGame())},cancelDialog:function(){this.dialogVisible=!this.dialogVisible,this.dialogVisible||(this.handleSelectionChange([]),this.getGame())},handleChangeName:function(e,t,i){console.log("handleChangeName :>> ",i),i&&i.trim()?this.popError(e,t):(this.pushMsg("error","Name is required!"),this.pushError(e,t)),this.handleChange(t)},handleChangeMinMaxItem:function(e,t,i,n){i?n?i>n?(this.pushMsg("error","Min item must be smaller than max item!"),this.pushError(e,t)):this.popError(e,t):(this.pushMsg("error","Max item is required!"),this.pushError(e,t)):(this.pushMsg("error","Min item is required!"),this.pushError(e,t)),this.handleChange(t)},pushMsg:function(e,t){this.$message({showClose:!0,center:!0,duration:2500,message:t,type:e})},pushError:function(e,t){this.errorIndex.includes(t)||(e.isError=!0,this.errorIndex.push(t))},popError:function(e,t){this.errorIndex.includes(t)&&(e.isError=!1,this.errorIndex.splice(this.errorIndex.indexOf(t),1))},tableRowClassName:function(e){var t=e.row;return 1==t.isError&&void 0!=t.isError?"error-row":(0==t.isError||t.isError,"")},handleChange:function(e){console.log("handleChange trigger");var t=this.editIndex;t.includes(e)&&t.splice(t.indexOf(e),1),t.push(e)},hideGame:function(){var e=this;this.loading=!this.loading;var t=this.multiSelection;console.log("removeObj :>> ",t),this.$store.commit("game/setHideParams",t),this.$store.dispatch("game/hideGame").then((function(){e.$message({showClose:!0,center:!0,duration:3e3,message:"Delete successful.",type:"warning"}),e.resetPage(),e.dialogVisible=!e.dialogVisible,e.getGame()}),(function(t){console.log("Delete FAIL: game/hideGame"),e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("GameTable.vue - hideGame:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("GameTable.vue - hideGame:>> "+t)}))},saveGame:function(){var e=this;if(this.errorIndex.length>0)this.pushMsg("error","Game: Please check again the error field(s)!"),console.log("this.errorIndex :>> ",this.errorIndex);else if(this.loading=!0,null!=this.editIndex&&this.editIndex.length>0){var t=[];this.editIndex.forEach((function(i){var n={id:e.gameList[i].id,minItem:e.gameList[i].minItem,maxItem:e.gameList[i].maxItem,name:e.gameList[i].name.replace(/\s +/g," ").trim()};t.push(n)})),console.log("updateParams :>> ",t),this.$store.commit("game/setUpdateParams",t),this.$store.dispatch("game/saveGame").then((function(){e.$message({showClose:!0,center:!0,duration:3e3,message:"Save successful!",type:"success"}),e.isPress=!e.isPress,e.isEdit=!e.isEdit,e.editIndex=[],e.errorIndex=[],e.resetPage(),e.getGame()}),(function(t){e.$message({showClose:!0,center:!0,duration:3e3,message:"Save failed!",type:"error"}),console.log("GameTable.vue - saveGame:>> "+t)})).catch((function(t){e.loading=!1,e.$message({message:t.message+", please try again.",type:"error"}),console.log("GameTable.vue - saveGame:>> "+t)}))}else this.isPress=!this.isPress,this.isEdit=!this.isEdit,this.getGame()}},created:function(){this.getGame()},destroyed:function(){this.$store.commit("game/setPageIndex",1)},filters:{}}),r=a,s=(i("1fd2"),i("2877")),l=Object(s["a"])(r,n,o,!1,null,null,null);t["default"]=l.exports},f3e7:function(e,t,i){},f5b0:function(e,t,i){"use strict";i("7ff0")},f75f:function(e,t,i){"use strict";i("a896")},f78f:function(e,t,i){"use strict";i("4fee")}}]);
//# sourceMappingURL=demo.5a958d22.js.map